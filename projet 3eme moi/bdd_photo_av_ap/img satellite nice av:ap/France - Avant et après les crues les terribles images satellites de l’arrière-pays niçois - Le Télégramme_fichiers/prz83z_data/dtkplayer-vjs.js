(()=>{var __webpack_modules__={1481:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./extlibrary/videojs-errors/plugin.scss":1932,"./extlibrary/videojs-suggestedvideoendcap/videojs.suggestedVideoEndcap.scss":6016,"./extlibrary/videojs-suggestedvideoendcap/videojs.suggestedVideoEndcapTable.scss":6046,"./extlibrary/videojs-watermark/plugin.scss":4538,"./statics/styles/scss/main.scss":8518,"./statics/styles/scss/overlaypreview.scss":1655,"./statics/styles/scss/videojs/boursorama.scss":3883,"./statics/styles/scss/videojs/dtkplayer.scss":7903,"./statics/styles/scss/videojs/fonts/font_boursorama.scss":44,"./statics/styles/scss/videojs/fonts/font_default.scss":2537,"./statics/styles/scss/videojs/fonts/font_dtkplayer.scss":4583,"./statics/styles/scss/videojs/fonts/font_obs.scss":7021,"./statics/styles/scss/videojs/fonts/font_um.scss":3227,"./statics/styles/scss/videojs/fonts/font_vanityfair.scss":554,"./statics/styles/scss/videojs/fonts/variables-dtkplayer.scss":2795,"./statics/styles/scss/videojs/glow.scss":437,"./statics/styles/scss/videojs/gq.scss":1517,"./statics/styles/scss/videojs/jukebo.scss":3279,"./statics/styles/scss/videojs/lemonde.scss":8585,"./statics/styles/scss/videojs/obsdesktop.scss":8861,"./statics/styles/scss/videojs/obsmobile.scss":1069,"./statics/styles/scss/videojs/orange.scss":854,"./statics/styles/scss/videojs/plugins/ad.scss":1224,"./statics/styles/scss/videojs/plugins/cmp.scss":2466,"./statics/styles/scss/videojs/plugins/contextmenu.scss":940,"./statics/styles/scss/videojs/plugins/errors.scss":2544,"./statics/styles/scss/videojs/plugins/interactions.scss":338,"./statics/styles/scss/videojs/plugins/optout.scss":7914,"./statics/styles/scss/videojs/plugins/overlaytitle.scss":5565,"./statics/styles/scss/videojs/plugins/tooltip.scss":7078,"./statics/styles/scss/videojs/plugins/visible_player.scss":7904,"./statics/styles/scss/videojs/rtl.scss":8865,"./statics/styles/scss/videojs/style.scss":2477,"./statics/styles/scss/videojs/ultimediawl.scss":2787,"./statics/styles/scss/videojs/um.vertical.scss":7079,"./statics/styles/scss/videojs/vanityfair.scss":3640,"./statics/styles/scss/videojs/videojs.scss":8364};function webpackContext(req){req=webpackContextResolve(req);return __webpack_require__(req)}function webpackContextResolve(req){var e;if(!__webpack_require__.o(map,req))throw(e=new Error("Cannot find module '"+req+"'")).code="MODULE_NOT_FOUND",e;return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,(module.exports=webpackContext).id=1481},9445:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./statics/styles/scss/videojs/um.vertical.scss":7079};function webpackContext(req){req=webpackContextResolve(req);return __webpack_require__(req)}function webpackContextResolve(req){var e;if(!__webpack_require__.o(map,req))throw(e=new Error("Cannot find module '"+req+"'")).code="MODULE_NOT_FOUND",e;return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,(module.exports=webpackContext).id=9445},7841:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var a,e,t=m.call(o),i=[];try{for(;(void 0===n||0<n--)&&!(a=t.next()).done;)i.push(a.value)}catch(o){e={error:o}}finally{try{a&&!a.done&&(m=t.return)&&m.call(t)}finally{if(e)throw e.error}}return i},__spread=this&&this.__spread||function(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(__read(arguments[n]));return o},command_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(4306)),CommandMap_1=__webpack_require__(8687),CmpApiModel_1=__webpack_require__(6458),Disabled_1=__webpack_require__(9907),SupportedVersions_1=__webpack_require__(1845),__webpack_require__=(exports.API_KEY="__tcfapi",o.prototype.apiCall=function(o,n,m){for(var a,e=[],t=3;t<arguments.length;t++)e[t-3]=arguments[t];if("string"!=typeof o)m(null,!1);else if(SupportedVersions_1.SupportedVersions.has(n)){if("function"!=typeof m)throw new Error("invalid callback function");CmpApiModel_1.CmpApiModel.disabled?m(new Disabled_1.Disabled,!1):this.isCustomCommand(o)||this.isBuiltInCommand(o)?this.isCustomCommand(o)&&!this.isBuiltInCommand(o)?(a=this.customCommands)[o].apply(a,__spread([m],e)):o===command_1.TCFCommand.PING?this.isCustomCommand(o)?new CommandMap_1.CommandMap[o](this.customCommands[o],e[0],null,m):new CommandMap_1.CommandMap[o](m,e[0]):void 0===CmpApiModel_1.CmpApiModel.tcModel?this.callQueue.push(__spread([o,n,m],e)):this.isCustomCommand(o)&&this.isBuiltInCommand(o)?new CommandMap_1.CommandMap[o](this.customCommands[o],e[0],null,m):new CommandMap_1.CommandMap[o](m,e[0]):m(null,!1)}else m(null,!1)},o.prototype.purgeQueuedCalls=function(){var o=this.callQueue;this.callQueue=[],o.forEach(function(o){window[exports.API_KEY].apply(window,__spread(o))})},o.prototype.isCustomCommand=function(o){return this.customCommands&&"function"==typeof this.customCommands[o]},o.prototype.isBuiltInCommand=function(o){return void 0!==CommandMap_1.CommandMap[o]},o);function o(o){if(o){var e=command_1.TCFCommand.ADD_EVENT_LISTENER;if(null!==o&&void 0!==o&&o[e])throw new Error("Built-In Custom Commmand for "+e+" not allowed: Use "+command_1.TCFCommand.GET_TC_DATA+" instead");if(e=command_1.TCFCommand.REMOVE_EVENT_LISTENER,null!==o&&void 0!==o&&o[e])throw new Error("Built-In Custom Commmand for "+e+" not allowed");null!==o&&void 0!==o&&o[command_1.TCFCommand.GET_TC_DATA]&&(o[command_1.TCFCommand.ADD_EVENT_LISTENER]=o[command_1.TCFCommand.GET_TC_DATA],o[command_1.TCFCommand.REMOVE_EVENT_LISTENER]=o[command_1.TCFCommand.GET_TC_DATA]),this.customCommands=o}try{this.callQueue=window[exports.API_KEY]()||[]}catch(o){this.callQueue=[]}finally{window[exports.API_KEY]=this.apiCall.bind(this),this.purgeQueuedCalls()}}exports.CallResponder=__webpack_require__},7631:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CmpApiModel_1=__webpack_require__(6458),status_1=__webpack_require__(5331),CallResponder_1=__webpack_require__(7841),core_1=__webpack_require__(5088);function p(p,e,i,t){void 0===i&&(i=!1),this.numUpdates=0,this.throwIfInvalidInt(p,"cmpId",2),this.throwIfInvalidInt(e,"cmpVersion",0),CmpApiModel_1.CmpApiModel.cmpId=p,CmpApiModel_1.CmpApiModel.cmpVersion=e,this.isServiceSpecific=!!i,this.callResponder=new CallResponder_1.CallResponder(t)}p.prototype.throwIfInvalidInt=function(p,e,i){if(!("number"==typeof p&&Number.isInteger(p)&&i<=p))throw new Error("Invalid "+e+": "+p)},p.prototype.update=function(p,e){if(void 0===e&&(e=!1),CmpApiModel_1.CmpApiModel.disabled)throw new Error("CmpApi Disabled");CmpApiModel_1.CmpApiModel.cmpStatus=status_1.CmpStatus.LOADED,e?(CmpApiModel_1.CmpApiModel.displayStatus=status_1.DisplayStatus.VISIBLE,CmpApiModel_1.CmpApiModel.eventStatus=status_1.EventStatus.CMP_UI_SHOWN):void 0===CmpApiModel_1.CmpApiModel.tcModel?(CmpApiModel_1.CmpApiModel.displayStatus=status_1.DisplayStatus.DISABLED,CmpApiModel_1.CmpApiModel.eventStatus=status_1.EventStatus.TC_LOADED):(CmpApiModel_1.CmpApiModel.displayStatus=status_1.DisplayStatus.HIDDEN,CmpApiModel_1.CmpApiModel.eventStatus=status_1.EventStatus.USER_ACTION_COMPLETE),CmpApiModel_1.CmpApiModel.gdprApplies=null!==p,CmpApiModel_1.CmpApiModel.gdprApplies?(""===p?(CmpApiModel_1.CmpApiModel.tcModel=new core_1.TCModel,CmpApiModel_1.CmpApiModel.tcModel.cmpId=CmpApiModel_1.CmpApiModel.cmpId,CmpApiModel_1.CmpApiModel.tcModel.cmpVersion=CmpApiModel_1.CmpApiModel.cmpVersion):CmpApiModel_1.CmpApiModel.tcModel=core_1.TCString.decode(p),CmpApiModel_1.CmpApiModel.tcModel.isServiceSpecific=this.isServiceSpecific,CmpApiModel_1.CmpApiModel.tcfPolicyVersion=+CmpApiModel_1.CmpApiModel.tcModel.policyVersion,CmpApiModel_1.CmpApiModel.tcString=p):CmpApiModel_1.CmpApiModel.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():CmpApiModel_1.CmpApiModel.eventQueue.exec(),this.numUpdates++},p.prototype.disable=function(){CmpApiModel_1.CmpApiModel.disabled=!0,CmpApiModel_1.CmpApiModel.cmpStatus=status_1.CmpStatus.ERROR},exports.CmpApi=p},6458:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var status_1=__webpack_require__(5331),__webpack_require__=__webpack_require__(4691),__webpack_require__=(e.reset=function(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=status_1.CmpStatus.LOADING,this.disabled=!1,this.displayStatus=status_1.DisplayStatus.HIDDEN,this.eventQueue.clear()},e.apiVersion="2",e.eventQueue=new __webpack_require__.EventListenerQueue,e.cmpStatus=status_1.CmpStatus.LOADING,e.disabled=!1,e.displayStatus=status_1.DisplayStatus.HIDDEN,e);function e(){}exports.CmpApiModel=__webpack_require__},4691:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GetTCDataCommand_1=__webpack_require__(5203);function e(){this.eventQueue=new Map,this.queueNumber=0}e.prototype.add=function(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++},e.prototype.remove=function(e){return this.eventQueue.delete(e)},e.prototype.exec=function(){this.eventQueue.forEach(function(e,t){new GetTCDataCommand_1.GetTCDataCommand(e.callback,e.param,t,e.next)})},e.prototype.clear=function(){this.queueNumber=0,this.eventQueue.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.eventQueue.size},enumerable:!0,configurable:!0}),exports.EventListenerQueue=e},1845:(__unused_webpack_module,exports)=>{"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),e.has=function(e){return this.set_.has(e="string"==typeof e?+e:e)},e.set_=new Set([0,2,void 0,null]),exports.SupportedVersions=e},5741:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),CmpApiModel_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(6458)),__webpack_require__=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.respond=function(){this.listenerId=CmpApiModel_1.CmpApiModel.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),t.prototype.respond.call(this)},e}(__webpack_require__(5203).GetTCDataCommand);exports.AddEventListenerCommand=__webpack_require__},865:(__unused_webpack_module,exports)=>{"use strict";function t(t,e,n,a){this.success=!0,Object.assign(this,{callback:t,listenerId:n,param:e,next:a});try{this.respond()}catch(t){this.invokeCallback(null)}}Object.defineProperty(exports,"__esModule",{value:!0}),t.prototype.invokeCallback=function(t){var e=null!==t;"function"==typeof this.next?this.callback(this.next,t,e):this.callback(t,e)},exports.Command=t},8687:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n,e,C,a,d,PingCommand_1=__webpack_require__(3119),GetTCDataCommand_1=__webpack_require__(5203),GetInAppTCDataCommand_1=__webpack_require__(18),GetVendorListCommand_1=__webpack_require__(5713),AddEventListenerCommand_1=__webpack_require__(5741),RemoveEventListenerCommand_1=__webpack_require__(5290),__webpack_require__=__webpack_require__(5630);function m(){}n=__webpack_require__.TCFCommand.PING,e=__webpack_require__.TCFCommand.GET_TC_DATA,C=__webpack_require__.TCFCommand.GET_IN_APP_TC_DATA,a=__webpack_require__.TCFCommand.GET_VENDOR_LIST,d=__webpack_require__.TCFCommand.ADD_EVENT_LISTENER,__webpack_require__=__webpack_require__.TCFCommand.REMOVE_EVENT_LISTENER,m[n]=PingCommand_1.PingCommand,m[e]=GetTCDataCommand_1.GetTCDataCommand,m[C]=GetInAppTCDataCommand_1.GetInAppTCDataCommand,m[a]=GetVendorListCommand_1.GetVendorListCommand,m[d]=AddEventListenerCommand_1.AddEventListenerCommand,m[__webpack_require__]=RemoveEventListenerCommand_1.RemoveEventListenerCommand,exports.CommandMap=m},18:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),GetTCDataCommand_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(5203)),response_1=__webpack_require__(3792),__webpack_require__=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new response_1.InAppTCData(this.param))},e}(GetTCDataCommand_1.GetTCDataCommand);exports.GetInAppTCDataCommand=__webpack_require__},5203:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)},function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Command_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(865)),response_1=__webpack_require__(3792),__webpack_require__=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new response_1.TCData(this.param,this.listenerId))},r.prototype.throwIfParamInvalid=function(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")},r}(Command_1.Command);exports.GetTCDataCommand=__webpack_require__},5713:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)},function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),CmpApiModel_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(6458)),Command_1=__webpack_require__(865),core_1=__webpack_require__(5088),__webpack_require__=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.respond=function(){var t,e=this,o=CmpApiModel_1.CmpApiModel.tcModel,r=o.vendorListVersion;void 0===this.param&&(this.param=r),(t=this.param===r&&o.gvl?o.gvl:new core_1.GVL(this.param)).readyPromise.then(function(){e.invokeCallback(t.getJson())})},e}(Command_1.Command);exports.GetVendorListCommand=__webpack_require__},3119:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var n,__extends=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),response_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(3792)),__webpack_require__=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.respond=function(){this.invokeCallback(new response_1.Ping)},t}(__webpack_require__(865).Command);exports.PingCommand=__webpack_require__},5290:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)},function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),CmpApiModel_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(6458)),__webpack_require__=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.respond=function(){this.invokeCallback(CmpApiModel_1.CmpApiModel.eventQueue.remove(this.param))},t}(__webpack_require__(865).Command);exports.RemoveEventListenerCommand=__webpack_require__},5630:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.TCFCommand||(exports.TCFCommand={})).PING="ping",exports.GET_TC_DATA="getTCData",exports.GET_IN_APP_TC_DATA="getInAppTCData",exports.GET_VENDOR_LIST="getVendorList",exports.ADD_EVENT_LISTENER="addEventListener",exports.REMOVE_EVENT_LISTENER="removeEventListener"},4306:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r,e=__webpack_require__(5630);for(r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])},8114:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(4306)),__export(__webpack_require__(3792)),__export(__webpack_require__(5331)),__export(__webpack_require__(7631));__webpack_require__=__webpack_require__(7841);exports.API_KEY=__webpack_require__.API_KEY},9907:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Response_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(7246)),status_1=__webpack_require__(5331),__webpack_require__=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cmpStatus=status_1.CmpStatus.ERROR,e}return __extends(e,t),e}(Response_1.Response);exports.Disabled=__webpack_require__},9368:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)},function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),__read=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||0<r--)&&!(n=a.next()).done;)i.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},__spread=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(__read(arguments[r]));return t};Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__=function(t){function r(r){r=t.call(this,r)||this;return delete r.outOfBand,r}return __extends(r,t),r.prototype.createVectorField=function(t){return __spread(t).reduce(function(t,r){return t+(r[1]?"1":"0")},"")},r.prototype.createRestrictions=function(t){var r={};if(0<t.numRestrictions){var e=t.getMaxVendorId();t.getRestrictions().forEach(function(t){r[t.purposeId.toString()]="_".repeat(e)});for(var o=0;o<e;o++)!function(e){t.getRestrictions(e+1).forEach(function(t){var n=t.restrictionType.toString(),t=t.purposeId.toString(),a=r[t].substr(0,e),i=r[t].substr(e+1);r[t]=a+n+i})}(o)}return r},r}(__webpack_require__(5424).TCData);exports.InAppTCData=__webpack_require__},6448:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)},function(o,t){function p(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(p.prototype=t.prototype,new p)}),CmpApiModel_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(6458)),__webpack_require__=function(e){function o(){var o=e.call(this)||this;return o.cmpLoaded=!0,o.cmpStatus=CmpApiModel_1.CmpApiModel.cmpStatus,o.displayStatus=CmpApiModel_1.CmpApiModel.displayStatus,o.apiVersion=""+CmpApiModel_1.CmpApiModel.apiVersion,CmpApiModel_1.CmpApiModel.tcModel&&CmpApiModel_1.CmpApiModel.tcModel.vendorListVersion&&(o.gvlVersion=+CmpApiModel_1.CmpApiModel.tcModel.vendorListVersion),o}return __extends(o,e),o}(__webpack_require__(7246).Response);exports.Ping=__webpack_require__},7246:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CmpApiModel_1=__webpack_require__(6458);exports.Response=function(){this.cmpId=CmpApiModel_1.CmpApiModel.cmpId,this.cmpVersion=CmpApiModel_1.CmpApiModel.cmpVersion,this.gdprApplies=CmpApiModel_1.CmpApiModel.gdprApplies,this.tcfPolicyVersion=CmpApiModel_1.CmpApiModel.tcfPolicyVersion}},5424:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)},function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}),__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},__spread=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},CmpApiModel_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(6458)),__webpack_require__=function(e){function t(t,r){var o=e.call(this)||this;return o.eventStatus=CmpApiModel_1.CmpApiModel.eventStatus,o.cmpStatus=CmpApiModel_1.CmpApiModel.cmpStatus,o.listenerId=r,CmpApiModel_1.CmpApiModel.gdprApplies&&(r=CmpApiModel_1.CmpApiModel.tcModel,o.tcString=CmpApiModel_1.CmpApiModel.tcString,o.isServiceSpecific=r.isServiceSpecific,o.useNonStandardStacks=r.useNonStandardStacks,o.purposeOneTreatment=r.purposeOneTreatment,o.publisherCC=r.publisherCountryCode,o.outOfBand={allowedVendors:o.createVectorField(r.vendorsAllowed,t),disclosedVendors:o.createVectorField(r.vendorsDisclosed,t)},o.purpose={consents:o.createVectorField(r.purposeConsents),legitimateInterests:o.createVectorField(r.purposeLegitimateInterests)},o.vendor={consents:o.createVectorField(r.vendorConsents,t),legitimateInterests:o.createVectorField(r.vendorLegitimateInterests,t)},o.specialFeatureOptins=o.createVectorField(r.specialFeatureOptins),o.publisher={consents:o.createVectorField(r.publisherConsents),legitimateInterests:o.createVectorField(r.publisherLegitimateInterests),customPurpose:{consents:o.createVectorField(r.publisherCustomConsents),legitimateInterests:o.createVectorField(r.publisherCustomLegitimateInterests)},restrictions:o.createRestrictions(r.publisherRestrictions)}),o}return __extends(t,e),t.prototype.createRestrictions=function(e){var t={};if(0<e.numRestrictions)for(var r=e.getMaxVendorId(),n=1;n<=r;n++)!function(r){var o=r.toString();e.getRestrictions(r).forEach(function(e){var r=e.purposeId.toString();t[r]||(t[r]={}),t[r][o]=e.restrictionType})}(n);return t},t.prototype.createVectorField=function(e,t){return t?t.reduce(function(t,r){return t[r+""]=e.has(+r),t},{}):__spread(e).reduce(function(e,t){return e[t[0].toString(10)]=t[1],e},{})},t}(__webpack_require__(7246).Response);exports.TCData=__webpack_require__},3792:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(9907)),__export(__webpack_require__(9368)),__export(__webpack_require__(6448)),__export(__webpack_require__(7246)),__export(__webpack_require__(5424))},2341:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.CmpStatus||(exports.CmpStatus={})).STUB="stub",exports.LOADING="loading",exports.LOADED="loaded",exports.ERROR="error"},5818:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.DisplayStatus||(exports.DisplayStatus={})).VISIBLE="visible",exports.HIDDEN="hidden",exports.DISABLED="disabled"},2175:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.EventStatus||(exports.EventStatus={})).TC_LOADED="tcloaded",exports.CMP_UI_SHOWN="cmpuishown",exports.USER_ACTION_COMPLETE="useractioncomplete"},5331:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(2341)),__export(__webpack_require__(5818)),__export(__webpack_require__(2175))},5186:function(__unused_webpack_module,exports){"use strict";var __values=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),e.prototype.clone=function(){var e=this,r=new this.constructor;return Object.keys(this).forEach(function(t){var n=e.deepClone(e[t]);void 0!==n&&(r[t]=n)}),r},e.prototype.deepClone=function(e){var r,t,n=typeof e;if("number"==n||"string"==n||"boolean"==n)return e;if(null!==e&&"object"==n){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){var o=[];try{for(var i=__values(e),l=i.next();!l.done;l=i.next()){var a=l.value;o.push(this.deepClone(a))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return e instanceof Array?o:new e.constructor(o)}var f,u={};for(f in e)e.hasOwnProperty(f)&&(u[f]=this.deepClone(e[f]));return u}},exports.Cloneable=e},7061:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)},function(t,r){function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}),__awaiter=this&&this.__awaiter||function(e,t,r,s){return new(r=r||Promise)(function(n,o){function i(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}u((s=s.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var r,s,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},o={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,(o=n?[2&o[0],n.value]:o)[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,s=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((n=0<(n=i.trys).length&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Cloneable_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(5186)),errors_1=__webpack_require__(5458),Json_1=__webpack_require__(6056),model_1=__webpack_require__(250),__webpack_require__=function(e){function t(r){var s=e.call(this)||this,n=(s.isReady_=!1,s.isLatest=!1,t.baseUrl);if(s.lang_=t.DEFAULT_LANGUAGE,s.isVendorList(r))s.populate(r),s.readyPromise=Promise.resolve();else{if(!n)throw new errors_1.GVLError("must specify GVL.baseUrl before loading GVL json");0<r?t.CACHE.has(r=r)?(s.populate(t.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=t.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n)):t.CACHE.has(t.LATEST_CACHE_KEY)?(s.populate(t.CACHE.get(t.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+t.latestFilename))}return s}return __extends(t,e),Object.defineProperty(t,"baseUrl",{get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new errors_1.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");0<e.length&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e},enumerable:!0,configurable:!0}),t.emptyLanguageCache=function(e){var r=!1;return void 0===e&&0<t.LANGUAGE_CACHE.size?(t.LANGUAGE_CACHE=new Map,r=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(t.LANGUAGE_CACHE.delete(e.toUpperCase()),r=!0),r},t.emptyCache=function(e){var r=!1;return Number.isInteger(e)&&0<=e?(t.CACHE.delete(e),r=!0):void 0===e&&(t.CACHE=new Map,r=!0),r},t.prototype.cacheLanguage=function(){t.LANGUAGE_CACHE.has(this.lang_)||t.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},t.prototype.fetchJson=function(e){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=this.populate,[4,Json_1.Json.fetch(e)];case 1:return t.apply(this,[s.sent()]),[3,3];case 2:throw r=s.sent(),new errors_1.GVLError(r.message);case 3:return[2]}})})},t.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},t.prototype.changeLanguage=function(e){return __awaiter(this,void 0,void 0,function(){var s,n,o,r;return __generator(this,function(a){switch(a.label){case 0:if(r=e.toUpperCase(),!t.consentLanguages.has(r))return[3,6];if(r===this.lang_)return[3,5];if(this.lang_=r,!t.LANGUAGE_CACHE.has(r))return[3,1];for(n in s=t.LANGUAGE_CACHE.get(r))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:o=t.baseUrl+t.languageFilename.replace("[LANG]",e),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchJson(o)];case 3:return a.sent(),this.cacheLanguage(),[3,5];case 4:throw r=a.sent(),new errors_1.GVLError("unable to load language: "+r.message);case 5:return[3,7];case 6:throw new errors_1.GVLError("unsupported language "+e);case 7:return[2]}})})},Object.defineProperty(t.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),t.prototype.isVendorList=function(e){return void 0!==e&&void 0!==e.vendors},t.prototype.populate=function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&t.CACHE.set(t.LATEST_CACHE_KEY,this.getJson()),t.CACHE.has(this.vendorListVersion)||t.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},t.prototype.mapVendors=function(e){var t=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(e){t.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(e){t.bySpecialPurposeVendorMap[e]=new Set}),Object.keys(this.features).forEach(function(e){t.byFeatureVendorMap[e]=new Set}),Object.keys(this.specialFeatures).forEach(function(e){t.bySpecialFeatureVendorMap[e]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(e){return+e})),this.vendorIds=new Set(e),this.vendors_=e.reduce(function(e,r){var s=t.vendors_[""+r];return s&&void 0===s.deletedDate&&(s.purposes.forEach(function(e){t.byPurposeVendorMap[e+""].consent.add(r)}),s.specialPurposes.forEach(function(e){t.bySpecialPurposeVendorMap[e+""].add(r)}),s.legIntPurposes.forEach(function(e){t.byPurposeVendorMap[e+""].legInt.add(r)}),s.flexiblePurposes&&s.flexiblePurposes.forEach(function(e){t.byPurposeVendorMap[e+""].flexible.add(r)}),s.features.forEach(function(e){t.byFeatureVendorMap[e+""].add(r)}),s.specialFeatures.forEach(function(e){t.bySpecialFeatureVendorMap[e+""].add(r)}),e[r]=s),e},{})},t.prototype.getFilteredVendors=function(e,t,r,s){var n=this,o=e.charAt(0).toUpperCase()+e.slice(1),i={};return("purpose"===e&&r?this["by"+o+"VendorMap"][t+""][r]:this["by"+(s?"Special":"")+o+"VendorMap"][t+""]).forEach(function(e){i[e+""]=n.vendors[e+""]}),i},t.prototype.getVendorsWithConsentPurpose=function(e){return this.getFilteredVendors("purpose",e,"consent")},t.prototype.getVendorsWithLegIntPurpose=function(e){return this.getFilteredVendors("purpose",e,"legInt")},t.prototype.getVendorsWithFlexiblePurpose=function(e){return this.getFilteredVendors("purpose",e,"flexible")},t.prototype.getVendorsWithSpecialPurpose=function(e){return this.getFilteredVendors("purpose",e,void 0,!0)},t.prototype.getVendorsWithFeature=function(e){return this.getFilteredVendors("feature",e)},t.prototype.getVendorsWithSpecialFeature=function(e){return this.getFilteredVendors("feature",e,void 0,!0)},Object.defineProperty(t.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),t.prototype.narrowVendorsTo=function(e){this.mapVendors(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.getJson())},t.isInstanceOf=function(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo},t.LANGUAGE_CACHE=new Map,t.CACHE=new Map,t.LATEST_CACHE_KEY=0,t.DEFAULT_LANGUAGE="EN",t.consentLanguages=new model_1.ConsentLanguages,t.latestFilename="vendor-list.json",t.versionedFilename="archives/vendor-list-v[VERSION].json",t.languageFilename="purposes-[LANG].json",t}(Cloneable_1.Cloneable);exports.GVL=__webpack_require__},6056:(__unused_webpack_module,exports)=>{"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),e.absCall=function(e,t,n,r){return new Promise(function(o,s){var i=new XMLHttpRequest;i.withCredentials=n,i.addEventListener("load",function(){if(i.readyState==XMLHttpRequest.DONE)if(200<=i.status&&i.status<300){var e=i.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}o(e)}else s(new Error("HTTP Status: "+i.status+" response type: "+i.responseType))}),i.addEventListener("error",function(){s(new Error("error"))}),i.addEventListener("abort",function(){s(new Error("aborted"))}),null===t?i.open("GET",e,!0):i.open("POST",e,!0),i.responseType="json",i.timeout=r,i.ontimeout=function(){s(new Error("Timeout "+r+"ms "+e))},i.send(t)})},e.post=function(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=0),this.absCall(e,JSON.stringify(t),n,r)},e.fetch=function(e,t,n){return this.absCall(e,null,t=void 0===t?!1:t,n=void 0===n?0:n)},exports.Json=e},6382:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)},function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),Cloneable_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(5186)),errors_1=__webpack_require__(5458),GVL_1=__webpack_require__(7061),model_1=__webpack_require__(250),__webpack_require__=function(e){function t(t){var n=e.call(this)||this;return n.isServiceSpecific_=!1,n.supportOOB_=!0,n.useNonStandardStacks_=!1,n.purposeOneTreatment_=!1,n.publisherCountryCode_="AA",n.version_=2,n.consentScreen_=0,n.policyVersion_=2,n.consentLanguage_="EN",n.cmpId_=0,n.cmpVersion_=0,n.vendorListVersion_=0,n.numCustomPurposes_=0,n.specialFeatureOptins=new model_1.Vector,n.purposeConsents=new model_1.Vector,n.purposeLegitimateInterests=new model_1.Vector,n.publisherConsents=new model_1.Vector,n.publisherLegitimateInterests=new model_1.Vector,n.publisherCustomConsents=new model_1.Vector,n.publisherCustomLegitimateInterests=new model_1.Vector,n.vendorConsents=new model_1.Vector,n.vendorLegitimateInterests=new model_1.Vector,n.vendorsDisclosed=new model_1.Vector,n.vendorsAllowed=new model_1.Vector,n.publisherRestrictions=new model_1.PurposeRestrictionVector,t&&(n.gvl=t),n.created=new Date,n.updated(),n}return __extends(t,e),Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){GVL_1.GVL.isInstanceOf(e)||(e=new GVL_1.GVL(e)),this.gvl_=e,this.publisherRestrictions.gvl=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(e){if(!(Number.isInteger(+e)&&1<e))throw new errors_1.TCModelError("cmpId",e);this.cmpId_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(e){if(!(Number.isInteger(+e)&&-1<e))throw new errors_1.TCModelError("cmpVersion",e);this.cmpVersion_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(e){if(!(Number.isInteger(+e)&&-1<e))throw new errors_1.TCModelError("consentScreen",e);this.consentScreen_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(e){if(!/^([A-z]){2}$/.test(e))throw new errors_1.TCModelError("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if((e=+e>>0)<0)throw new errors_1.TCModelError("vendorListVersion",e);this.vendorListVersion_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new errors_1.TCModelError("policyVersion",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(e){this.useNonStandardStacks_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e},enumerable:!0,configurable:!0}),t.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},t.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},t.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},t.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},t.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},t.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},t.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},t.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},t.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},t.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},t.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},t.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},t.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},t.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(t.prototype,"numCustomPurposes",{get:function(){var t,e=this.numCustomPurposes_;return"object"==typeof this.customPurposes&&(t=Object.keys(this.customPurposes).sort(function(e,t){return+e-+t}),e=parseInt(t.pop(),10)),e},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new errors_1.TCModelError("numCustomPurposes",e)},enumerable:!0,configurable:!0}),t.prototype.updated=function(){this.lastUpdated=new Date},t.consentLanguages=GVL_1.GVL.consentLanguages,t}(Cloneable_1.Cloneable);exports.TCModel=__webpack_require__},2381:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var encoder_1=__webpack_require__(7170),model_1=__webpack_require__(250),IntEncoder_1=__webpack_require__(2082),TCModel_1=__webpack_require__(6382);function e(){}e.encode=function(e,n){var o,t="";return e=encoder_1.SemanticPreEncoder.process(e,n),(o=Array.isArray(null===n||void 0===n?void 0:n.segments)?n.segments:new encoder_1.SegmentSequence(e,n)[""+e.version]).forEach(function(n,r){var d="";r<o.length-1&&(d="."),t+=encoder_1.SegmentEncoder.encode(e,n)+d}),t},e.decode=function(e,n){var r=e.split("."),o=r.length;n=n||new TCModel_1.TCModel;for(var t=0;t<o;t++){var d=r[t],c=encoder_1.Base64Url.decode(d.charAt(0)).substr(0,encoder_1.BitLength.segmentType),c=model_1.SegmentIDs.ID_TO_KEY[IntEncoder_1.IntEncoder.decode(c,encoder_1.BitLength.segmentType).toString()];encoder_1.SegmentEncoder.decode(d,n,c)}return n},exports.TCString=e},4479:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var errors_1=__webpack_require__(5458);function r(){}r.encode=function(r){if(!/^[0-1]+$/.test(r))throw new errors_1.EncodingError("Invalid bitField");var e=r.length%this.LCM;r+=e?"0".repeat(this.LCM-e):"";for(var t="",n=0;n<r.length;n+=this.BASIS)t+=this.DICT[parseInt(r.substr(n,this.BASIS),2)];return t},r.decode=function(r){if(!/^[A-Za-z0-9\-_]+$/.test(r))throw new errors_1.DecodingError("Invalidly encoded Base64URL string");for(var e="",t=0;t<r.length;t++){var n=this.REVERSE_DICT.get(r[t]).toString(2);e+="0".repeat(this.BASIS-n.length)+n}return e},r.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",r.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),r.BASIS=6,r.LCM=24,exports.Base64Url=r},2219:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s,d,i,o,l,n,t,r,m,p,u,_,a,c,F,g,v,__webpack_require__=__webpack_require__(250);function e(){}s=__webpack_require__.Fields.cmpId,d=__webpack_require__.Fields.cmpVersion,i=__webpack_require__.Fields.consentLanguage,o=__webpack_require__.Fields.consentScreen,l=__webpack_require__.Fields.created,n=__webpack_require__.Fields.isServiceSpecific,t=__webpack_require__.Fields.lastUpdated,r=__webpack_require__.Fields.policyVersion,m=__webpack_require__.Fields.publisherCountryCode,p=__webpack_require__.Fields.publisherLegitimateInterests,u=__webpack_require__.Fields.publisherConsents,_=__webpack_require__.Fields.purposeConsents,a=__webpack_require__.Fields.purposeLegitimateInterests,c=__webpack_require__.Fields.purposeOneTreatment,F=__webpack_require__.Fields.specialFeatureOptins,g=__webpack_require__.Fields.useNonStandardStacks,v=__webpack_require__.Fields.vendorListVersion,__webpack_require__=__webpack_require__.Fields.version,e[s]=12,e[d]=12,e[i]=12,e[o]=6,e[l]=36,e[n]=1,e[t]=36,e[r]=6,e[m]=12,e[p]=24,e[u]=24,e[_]=24,e[a]=24,e[c]=1,e[F]=12,e[g]=1,e[v]=12,e[__webpack_require__]=6,e.anyBoolean=1,e.encodingType=1,e.maxId=16,e.numCustomPurposes=6,e.numEntries=12,e.numRestrictions=12,e.purposeId=6,e.restrictionType=2,e.segmentType=3,e.singleOrRange=1,e.vendorId=16,exports.BitLength=e},3858:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Base64Url_1=__webpack_require__(4479),BitLength_1=__webpack_require__(2219),field_1=__webpack_require__(9836),sequence_1=__webpack_require__(8780),errors_1=__webpack_require__(5458),Fields_1=__webpack_require__(4731),model_1=__webpack_require__(250),__webpack_require__=(e.encode=function(e,r){var n,i=this;try{n=this.fieldSequence[""+e.version][r]}catch(n){throw new errors_1.EncodingError("Unable to encode version: "+e.version+", segment: "+r)}var t="";return r!==model_1.Segment.CORE&&(t=field_1.IntEncoder.encode(model_1.SegmentIDs.KEY_TO_ID[r],BitLength_1.BitLength.segmentType)),n.forEach(function(n){var o=e[n],s=field_1.FieldEncoderMap[n],d=BitLength_1.BitLength[n];void 0===d&&i.isPublisherCustom(n)&&(d=+e[Fields_1.Fields.numCustomPurposes]);try{t+=s.encode(o,d)}catch(e){throw new errors_1.EncodingError("Error encoding "+r+"->"+n+": "+e.message)}}),Base64Url_1.Base64Url.encode(t)},e.decode=function(e,r,n){var i=this,t=Base64Url_1.Base64Url.decode(e),o=0;return n===model_1.Segment.CORE&&(r.version=field_1.IntEncoder.decode(t.substr(o,BitLength_1.BitLength[Fields_1.Fields.version]),BitLength_1.BitLength[Fields_1.Fields.version])),n!==model_1.Segment.CORE&&(o+=BitLength_1.BitLength.segmentType),this.fieldSequence[""+r.version][n].forEach(function(e){var n=field_1.FieldEncoderMap[e],s=BitLength_1.BitLength[e];if(0!==(s=void 0===s&&i.isPublisherCustom(e)?+r[Fields_1.Fields.numCustomPurposes]:s)){var d=t.substr(o,s);if(n===field_1.VendorVectorEncoder?r[e]=n.decode(d,r.version):r[e]=n.decode(d,s),Number.isInteger(s))o+=s;else{if(!Number.isInteger(r[e].bitLength))throw new errors_1.DecodingError(e);o+=r[e].bitLength}}}),r},e.isPublisherCustom=function(e){return 0===e.indexOf("publisherCustom")},e.fieldSequence=new sequence_1.FieldSequence,e);function e(){}exports.SegmentEncoder=__webpack_require__},818:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var errors_1=__webpack_require__(5458),model_1=__webpack_require__(250);function e(){}e.process=function(e,r){var n=e.gvl;if(!n)throw new errors_1.EncodingError("Unable to encode TCModel without a GVL");if(!n.isReady)throw new errors_1.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=n.language.toUpperCase(),0<(null===r||void 0===r?void 0:r.version)&&(null===r||void 0===r?void 0:r.version)<=this.processor.length?e.version=r.version:e.version=this.processor.length;r=e.version-1;if(!this.processor[r])throw new errors_1.EncodingError("Invalid version: "+e.version);return this.processor[r](e,n)},e.processor=[function(e){return e},function(e,r){e.publisherRestrictions.gvl=r,e.purposeLegitimateInterests.unset(1);var o=new Map;return o.set("legIntPurposes",e.vendorLegitimateInterests),o.set("purposes",e.vendorConsents),o.forEach(function(o,s){o.forEach(function(n,t){if(n){n=r.vendors[t];if(!n||n.deletedDate)o.unset(t);else if(0===n[s].length)if(e.isServiceSpecific)if(0===n.flexiblePurposes.length)o.unset(t);else{for(var c=e.publisherRestrictions.getRestrictions(t),l=!1,u=0,d=c.length;u<d&&!l;u++)l=c[u].restrictionType===model_1.RestrictionType.REQUIRE_CONSENT&&"purposes"===s||c[u].restrictionType===model_1.RestrictionType.REQUIRE_LI&&"legIntPurposes"===s;l||o.unset(t)}else o.unset(t)}})}),e.vendorsDisclosed.set(r.vendors),e}],exports.SemanticPreEncoder=e},632:(__unused_webpack_module,exports)=>{"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),e.encode=function(e){return+e+""},e.decode=function(e){return"1"===e},exports.BooleanEncoder=e},3101:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IntEncoder_1=__webpack_require__(2082),errors_1=__webpack_require__(5458);function e(){}e.encode=function(e,r){return IntEncoder_1.IntEncoder.encode(Math.round(e.getTime()/100),r)},e.decode=function(e,r){if(r!==e.length)throw new errors_1.DecodingError("invalid bit length");var n=new Date;return n.setTime(100*IntEncoder_1.IntEncoder.decode(e,r)),n},exports.DateEncoder=e},286:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o,r,d,n,c,t,i,s,l,E,_,F,V,a,m,u,p,I,x,g,L,v,C,q,B,model_1=__webpack_require__(250),BooleanEncoder_1=__webpack_require__(632),DateEncoder_1=__webpack_require__(3101),FixedVectorEncoder_1=__webpack_require__(8937),IntEncoder_1=__webpack_require__(2082),LangEncoder_1=__webpack_require__(835),PurposeRestrictionVectorEncoder_1=__webpack_require__(5889),__webpack_require__=__webpack_require__(3283);function e(){}o=model_1.Fields.version,r=model_1.Fields.created,d=model_1.Fields.lastUpdated,n=model_1.Fields.cmpId,c=model_1.Fields.cmpVersion,t=model_1.Fields.consentScreen,i=model_1.Fields.consentLanguage,s=model_1.Fields.vendorListVersion,l=model_1.Fields.policyVersion,E=model_1.Fields.isServiceSpecific,_=model_1.Fields.useNonStandardStacks,F=model_1.Fields.specialFeatureOptins,V=model_1.Fields.purposeConsents,a=model_1.Fields.purposeLegitimateInterests,m=model_1.Fields.purposeOneTreatment,u=model_1.Fields.publisherCountryCode,p=model_1.Fields.vendorConsents,I=model_1.Fields.vendorLegitimateInterests,x=model_1.Fields.publisherRestrictions,g=model_1.Fields.vendorsDisclosed,L=model_1.Fields.vendorsAllowed,v=model_1.Fields.publisherConsents,C=model_1.Fields.publisherLegitimateInterests,q=model_1.Fields.numCustomPurposes,B=model_1.Fields.publisherCustomConsents,model_1=model_1.Fields.publisherCustomLegitimateInterests,e[o]=IntEncoder_1.IntEncoder,e[r]=DateEncoder_1.DateEncoder,e[d]=DateEncoder_1.DateEncoder,e[n]=IntEncoder_1.IntEncoder,e[c]=IntEncoder_1.IntEncoder,e[t]=IntEncoder_1.IntEncoder,e[i]=LangEncoder_1.LangEncoder,e[s]=IntEncoder_1.IntEncoder,e[l]=IntEncoder_1.IntEncoder,e[E]=BooleanEncoder_1.BooleanEncoder,e[_]=BooleanEncoder_1.BooleanEncoder,e[F]=FixedVectorEncoder_1.FixedVectorEncoder,e[V]=FixedVectorEncoder_1.FixedVectorEncoder,e[a]=FixedVectorEncoder_1.FixedVectorEncoder,e[m]=BooleanEncoder_1.BooleanEncoder,e[u]=LangEncoder_1.LangEncoder,e[p]=__webpack_require__.VendorVectorEncoder,e[I]=__webpack_require__.VendorVectorEncoder,e[x]=PurposeRestrictionVectorEncoder_1.PurposeRestrictionVectorEncoder,e.segmentType=IntEncoder_1.IntEncoder,e[g]=__webpack_require__.VendorVectorEncoder,e[L]=__webpack_require__.VendorVectorEncoder,e[v]=FixedVectorEncoder_1.FixedVectorEncoder,e[C]=FixedVectorEncoder_1.FixedVectorEncoder,e[q]=IntEncoder_1.IntEncoder,e[B]=FixedVectorEncoder_1.FixedVectorEncoder,e[model_1]=FixedVectorEncoder_1.FixedVectorEncoder,exports.FieldEncoderMap=e},8937:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BooleanEncoder_1=__webpack_require__(632),errors_1=__webpack_require__(5458),model_1=__webpack_require__(250);function e(){}e.encode=function(e,o){for(var r="",n=1;n<=o;n++)r+=BooleanEncoder_1.BooleanEncoder.encode(e.has(n));return r},e.decode=function(e,o){if(e.length!==o)throw new errors_1.DecodingError("bitfield encoding length mismatch");for(var r=new model_1.Vector,n=1;n<=o;n++)BooleanEncoder_1.BooleanEncoder.decode(e[n-1])&&r.set(n);return r.bitLength=e.length,r},exports.FixedVectorEncoder=e},2082:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var errors_1=__webpack_require__(5458);function r(){}r.encode=function(r,e){var n;if((n=(r="string"==typeof r?parseInt(r,10):r).toString(2)).length>e||r<0)throw new errors_1.EncodingError(r+" too large to encode into "+e);return n=n.length<e?"0".repeat(e-n.length)+n:n},r.decode=function(r,e){if(e!==r.length)throw new errors_1.DecodingError("invalid bit length");return parseInt(r,2)},exports.IntEncoder=r},835:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IntEncoder_1=__webpack_require__(2082),errors_1=__webpack_require__(5458);function e(){}e.encode=function(e,r){var n=(e=e.toUpperCase()).charCodeAt(0)-65,o=e.charCodeAt(1)-65;if(n<0||25<n||o<0||25<o)throw new errors_1.EncodingError("invalid language code: "+e);if(r%2==1)throw new errors_1.EncodingError("numBits must be even, "+r+" is not valid");return IntEncoder_1.IntEncoder.encode(n,r/=2)+IntEncoder_1.IntEncoder.encode(o,r)},e.decode=function(e,r){if(r!==e.length||e.length%2)throw new errors_1.DecodingError("invalid bit length for language");var r=e.length/2,o=IntEncoder_1.IntEncoder.decode(e.slice(0,r),r)+65,e=IntEncoder_1.IntEncoder.decode(e.slice(r),r)+65;return String.fromCharCode(o)+String.fromCharCode(e)},exports.LangEncoder=e},5889:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BitLength_1=__webpack_require__(2219),BooleanEncoder_1=__webpack_require__(632),errors_1=__webpack_require__(5458),IntEncoder_1=__webpack_require__(2082),model_1=__webpack_require__(250);function e(){}e.encode=function(e){var t=IntEncoder_1.IntEncoder.encode(e.numRestrictions,BitLength_1.BitLength.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach(function(n){t=(t+=IntEncoder_1.IntEncoder.encode(n.purposeId,BitLength_1.BitLength.purposeId))+IntEncoder_1.IntEncoder.encode(n.restrictionType,BitLength_1.BitLength.restrictionType);for(var r=e.getVendors(n),o=r.length,i=0,d=0,c="",B=0;B<o;B++)!function(t){var n=r[t],s=(0===d&&(i++,d=n),r[o-1]),B=e.gvl.vendorIds;(t===o-1||r[t+1]>function(e){for(;++e<=s&&!B.has(e););return e}(n))&&(t=!(n===d),c=(c+=BooleanEncoder_1.BooleanEncoder.encode(t))+IntEncoder_1.IntEncoder.encode(d,BitLength_1.BitLength.vendorId),t&&(c+=IntEncoder_1.IntEncoder.encode(n,BitLength_1.BitLength.vendorId)),d=0)}(B);t=(t+=IntEncoder_1.IntEncoder.encode(i,BitLength_1.BitLength.numEntries))+c}),t},e.decode=function(e){var t=0,n=new model_1.PurposeRestrictionVector,r=IntEncoder_1.IntEncoder.decode(e.substr(t,BitLength_1.BitLength.numRestrictions),BitLength_1.BitLength.numRestrictions);t+=BitLength_1.BitLength.numRestrictions;for(var o=0;o<r;o++){var i=IntEncoder_1.IntEncoder.decode(e.substr(t,BitLength_1.BitLength.purposeId),BitLength_1.BitLength.purposeId),d=(t+=BitLength_1.BitLength.purposeId,IntEncoder_1.IntEncoder.decode(e.substr(t,BitLength_1.BitLength.restrictionType),BitLength_1.BitLength.restrictionType)),c=(t+=BitLength_1.BitLength.restrictionType,new model_1.PurposeRestriction(i,d)),s=IntEncoder_1.IntEncoder.decode(e.substr(t,BitLength_1.BitLength.numEntries),BitLength_1.BitLength.numEntries);t+=BitLength_1.BitLength.numEntries;for(var B=0;B<s;B++){var g=BooleanEncoder_1.BooleanEncoder.decode(e.substr(t,BitLength_1.BitLength.anyBoolean)),h=(t+=BitLength_1.BitLength.anyBoolean,IntEncoder_1.IntEncoder.decode(e.substr(t,BitLength_1.BitLength.vendorId),BitLength_1.BitLength.vendorId));if(t+=BitLength_1.BitLength.vendorId,g){var L=IntEncoder_1.IntEncoder.decode(e.substr(t,BitLength_1.BitLength.vendorId),BitLength_1.BitLength.vendorId);if(t+=BitLength_1.BitLength.vendorId,L<h)throw new errors_1.DecodingError("Invalid RangeEntry: endVendorId "+L+" is less than "+h);for(var _=h;_<=L;_++)n.add(_,c)}else n.add(h,c)}}return n.bitLength=t,n},exports.PurposeRestrictionVectorEncoder=e},1938:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.VectorEncodingType||(exports.VectorEncodingType={}))[exports.FIELD=0]="FIELD",exports[exports.RANGE=1]="RANGE"},3283:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var model_1=__webpack_require__(250),__1=__webpack_require__(7170),IntEncoder_1=__webpack_require__(2082),BooleanEncoder_1=__webpack_require__(632),FixedVectorEncoder_1=__webpack_require__(8937),VectorEncodingType_1=__webpack_require__(1938),errors_1=__webpack_require__(5458);function e(){}e.encode=function(e){var n,r=[],o=[],t=IntEncoder_1.IntEncoder.encode(e.maxId,__1.BitLength.maxId),d="",c=__1.BitLength.maxId+__1.BitLength.encodingType,_=c+e.maxId,i=2*__1.BitLength.vendorId+__1.BitLength.singleOrRange+__1.BitLength.numEntries,E=c+__1.BitLength.numEntries;return e.forEach(function(t,c){d+=BooleanEncoder_1.BooleanEncoder.encode(t),(n=e.maxId>i&&E<_)&&t&&(e.has(c+1)?0===o.length&&(o.push(c),E=(E+=__1.BitLength.singleOrRange)+__1.BitLength.vendorId):(o.push(c),E+=__1.BitLength.vendorId,r.push(o),o=[]))}),n?t=(t+=VectorEncodingType_1.VectorEncodingType.RANGE+"")+this.buildRangeEncoding(r):t=(t+=VectorEncodingType_1.VectorEncodingType.FIELD+"")+d,t},e.decode=function(e,n){var r,o=0,t=IntEncoder_1.IntEncoder.decode(e.substr(o,__1.BitLength.maxId),__1.BitLength.maxId),d=(o+=__1.BitLength.maxId,IntEncoder_1.IntEncoder.decode(e.charAt(o),__1.BitLength.encodingType));if(o+=__1.BitLength.encodingType,d===VectorEncodingType_1.VectorEncodingType.RANGE){if(r=new model_1.Vector,1===n){if("1"===e.substr(o,1))throw new errors_1.DecodingError("Unable to decode default consent=1");o++}var c=IntEncoder_1.IntEncoder.decode(e.substr(o,__1.BitLength.numEntries),__1.BitLength.numEntries);o+=__1.BitLength.numEntries;for(var _=0;_<c;_++){var i=BooleanEncoder_1.BooleanEncoder.decode(e.charAt(o)),E=(o+=__1.BitLength.singleOrRange,IntEncoder_1.IntEncoder.decode(e.substr(o,__1.BitLength.vendorId),__1.BitLength.vendorId));if(o+=__1.BitLength.vendorId,i){var g=IntEncoder_1.IntEncoder.decode(e.substr(o,__1.BitLength.vendorId),__1.BitLength.vendorId);o+=__1.BitLength.vendorId;for(var a=E;a<=g;a++)r.set(a)}else r.set(E)}}else{d=e.substr(o,t);o+=t,r=FixedVectorEncoder_1.FixedVectorEncoder.decode(d,t)}return r.bitLength=o,r},e.buildRangeEncoding=function(e){var n=e.length,r=IntEncoder_1.IntEncoder.encode(n,__1.BitLength.numEntries);return e.forEach(function(e){var n=1===e.length;r=(r+=BooleanEncoder_1.BooleanEncoder.encode(!n))+IntEncoder_1.IntEncoder.encode(e[0],__1.BitLength.vendorId),n||(r+=IntEncoder_1.IntEncoder.encode(e[1],__1.BitLength.vendorId))}),r},exports.VendorVectorEncoder=e},9836:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(632)),__export(__webpack_require__(3101)),__export(__webpack_require__(286)),__export(__webpack_require__(8937)),__export(__webpack_require__(2082)),__export(__webpack_require__(835)),__export(__webpack_require__(5889)),__export(__webpack_require__(1938)),__export(__webpack_require__(3283))},7170:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(4479)),__export(__webpack_require__(2219)),__export(__webpack_require__(3858)),__export(__webpack_require__(818)),__export(__webpack_require__(9836)),__export(__webpack_require__(8780))},4014:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var model_1=__webpack_require__(250);exports.FieldSequence=function(){var e;this[1]=((e={})[model_1.Segment.CORE]=[model_1.Fields.version,model_1.Fields.created,model_1.Fields.lastUpdated,model_1.Fields.cmpId,model_1.Fields.cmpVersion,model_1.Fields.consentScreen,model_1.Fields.consentLanguage,model_1.Fields.vendorListVersion,model_1.Fields.purposeConsents,model_1.Fields.vendorConsents],e),this[2]=((e={})[model_1.Segment.CORE]=[model_1.Fields.version,model_1.Fields.created,model_1.Fields.lastUpdated,model_1.Fields.cmpId,model_1.Fields.cmpVersion,model_1.Fields.consentScreen,model_1.Fields.consentLanguage,model_1.Fields.vendorListVersion,model_1.Fields.policyVersion,model_1.Fields.isServiceSpecific,model_1.Fields.useNonStandardStacks,model_1.Fields.specialFeatureOptins,model_1.Fields.purposeConsents,model_1.Fields.purposeLegitimateInterests,model_1.Fields.purposeOneTreatment,model_1.Fields.publisherCountryCode,model_1.Fields.vendorConsents,model_1.Fields.vendorLegitimateInterests,model_1.Fields.publisherRestrictions],e[model_1.Segment.PUBLISHER_TC]=[model_1.Fields.publisherConsents,model_1.Fields.publisherLegitimateInterests,model_1.Fields.numCustomPurposes,model_1.Fields.publisherCustomConsents,model_1.Fields.publisherCustomLegitimateInterests],e[model_1.Segment.VENDORS_ALLOWED]=[model_1.Fields.vendorsAllowed],e[model_1.Segment.VENDORS_DISCLOSED]=[model_1.Fields.vendorsDisclosed],e)}},1333:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var model_1=__webpack_require__(250);exports.SegmentSequence=function(e,s){this[1]=[model_1.Segment.CORE],this[2]=[model_1.Segment.CORE],2===e.version&&(e.isServiceSpecific?this[2].push(model_1.Segment.PUBLISHER_TC):((s=!(!s||!s.isForVendors))&&!0!==e[model_1.Fields.supportOOB]||this[2].push(model_1.Segment.VENDORS_DISCLOSED),s&&(e[model_1.Fields.supportOOB]&&0<e[model_1.Fields.vendorsAllowed].size&&this[2].push(model_1.Segment.VENDORS_ALLOWED),this[2].push(model_1.Segment.PUBLISHER_TC))))}},8780:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(4014)),__export(__webpack_require__(1333))},1265:function(__unused_webpack_module,exports){"use strict";var r,__extends=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),DecodingError=(Object.defineProperty(exports,"__esModule",{value:!0}),function(r){function t(t){t=r.call(this,t)||this;return t.name="DecodingError",t}return __extends(t,r),t}(Error));exports.DecodingError=DecodingError},5181:function(__unused_webpack_module,exports){"use strict";var r,__extends=this&&this.__extends||(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])})(t,n)},function(t,n){function o(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),EncodingError=(Object.defineProperty(exports,"__esModule",{value:!0}),function(r){function t(t){t=r.call(this,t)||this;return t.name="EncodingError",t}return __extends(t,r),t}(Error));exports.EncodingError=EncodingError},9565:function(__unused_webpack_module,exports){"use strict";var r,__extends=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),GVLError=(Object.defineProperty(exports,"__esModule",{value:!0}),function(r){function t(t){t=r.call(this,t)||this;return t.name="GVLError",t}return __extends(t,r),t}(Error));exports.GVLError=GVLError},9995:function(__unused_webpack_module,exports){"use strict";var r,__extends=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),TCModelError=(Object.defineProperty(exports,"__esModule",{value:!0}),function(r){function t(t,o,e){o=r.call(this,"invalid value "+o+" passed for "+t+" "+(e=void 0===e?"":e))||this;return o.name="TCModelError",o}return __extends(t,r),t}(Error));exports.TCModelError=TCModelError},5458:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(r){for(var e in r)exports.hasOwnProperty(e)||(exports[e]=r[e])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(1265)),__export(__webpack_require__(5181)),__export(__webpack_require__(9565)),__export(__webpack_require__(9995))},5088:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(7170)),__export(__webpack_require__(5458)),__export(__webpack_require__(250)),__export(__webpack_require__(5186)),__export(__webpack_require__(7061)),__export(__webpack_require__(6056)),__export(__webpack_require__(6382)),__export(__webpack_require__(2381))},5995:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)},function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)});Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.root=null,e}return __extends(e,t),e.prototype.isEmpty=function(){return!this.root},e.prototype.add=function(t){var e,r={value:t,left:null,right:null};if(this.isEmpty())this.root=r;else for(e=this.root;;)if(t<e.value){if(null===e.left){e.left=r;break}e=e.left}else{if(!(t>e.value))break;if(null===e.right){e.right=r;break}e=e.right}},e.prototype.get=function(){for(var t=[],e=this.root;e;)if(e.left){for(var r=e.left;r.right&&r.right!=e;)r=r.right;e=r.right==e?(r.right=null,t.push(e.value),e.right):(r.right=e).left}else t.push(e.value),e=e.right;return t},e.prototype.contains=function(t){for(var e=!1,r=this.root;r;){if(r.value===t){e=!0;break}t>r.value?r=r.right:t<r.value&&(r=r.left)}return e},e.prototype.min=function(t){var e;for(void 0===t&&(t=this.root);t;)t=t.left||(e=t.value,null);return e},e.prototype.max=function(t){var e;for(void 0===t&&(t=this.root);t;)t=t.right||(e=t.value,null);return e},e.prototype.remove=function(t,e){void 0===e&&(e=this.root);for(var i,r=null,o="left";e;)t<e.value?(e=(r=e).left,o="left"):t>e.value?(e=(r=e).right,o="right"):(e.left||e.right?e.left?e.right?(i=this.min(e.right),this.remove(i,e.right),e.value=i):r?r[o]=e.left:this.root=e.left:r?r[o]=e.right:this.root=e.right:r?r[o]=null:this.root=null,e=null)},e}(__webpack_require__(5186).Cloneable);exports.BinarySearchTree=__webpack_require__},5301:(__unused_webpack_module,exports)=>{"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),e.prototype.has=function(n){return e.langSet.has(n)},e.prototype.forEach=function(n){e.langSet.forEach(n)},Object.defineProperty(e.prototype,"size",{get:function(){return e.langSet.size},enumerable:!0,configurable:!0}),e.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]),exports.ConsentLanguages=e},4243:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.DeviceDisclosureStorageAccessType||(exports.DeviceDisclosureStorageAccessType={})).COOKIE="cookie",exports.WEB="web",exports.APP="app"},4731:(__unused_webpack_module,exports)=>{"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),e.cmpId="cmpId",e.cmpVersion="cmpVersion",e.consentLanguage="consentLanguage",e.consentScreen="consentScreen",e.created="created",e.supportOOB="supportOOB",e.isServiceSpecific="isServiceSpecific",e.lastUpdated="lastUpdated",e.numCustomPurposes="numCustomPurposes",e.policyVersion="policyVersion",e.publisherCountryCode="publisherCountryCode",e.publisherCustomConsents="publisherCustomConsents",e.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",e.publisherLegitimateInterests="publisherLegitimateInterests",e.publisherConsents="publisherConsents",e.publisherRestrictions="publisherRestrictions",e.purposeConsents="purposeConsents",e.purposeLegitimateInterests="purposeLegitimateInterests",e.purposeOneTreatment="purposeOneTreatment",e.specialFeatureOptins="specialFeatureOptins",e.useNonStandardStacks="useNonStandardStacks",e.vendorConsents="vendorConsents",e.vendorLegitimateInterests="vendorLegitimateInterests",e.vendorListVersion="vendorListVersion",e.vendorsAllowed="vendorsAllowed",e.vendorsDisclosed="vendorsDisclosed",e.version="version",exports.Fields=e},8626:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)},function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}),Cloneable_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(5186)),errors_1=__webpack_require__(5458),RestrictionType_1=__webpack_require__(2473),__webpack_require__=function(e){function t(t,r){var o=e.call(this)||this;return void 0!==t&&(o.purposeId=t),void 0!==r&&(o.restrictionType=r),o}return __extends(t,e),t.unHash=function(e){var r=e.split(this.hashSeparator),o=new t;if(2!==r.length)throw new errors_1.TCModelError("hash",e);return o.purposeId=parseInt(r[0],10),o.restrictionType=parseInt(r[1],10),o},Object.defineProperty(t.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+t.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(e){this.purposeId_=e},enumerable:!0,configurable:!0}),t.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&0<this.purposeId&&(this.restrictionType===RestrictionType_1.RestrictionType.NOT_ALLOWED||this.restrictionType===RestrictionType_1.RestrictionType.REQUIRE_CONSENT||this.restrictionType===RestrictionType_1.RestrictionType.REQUIRE_LI)},t.prototype.isSameAs=function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType},t.hashSeparator="-",t}(Cloneable_1.Cloneable);exports.PurposeRestriction=__webpack_require__},7096:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var e,__extends=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)},function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PurposeRestriction_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(8626)),BinarySearchTree_1=__webpack_require__(5995),RestrictionType_1=__webpack_require__(2473),__webpack_require__=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.map=new Map,t}return __extends(t,e),t.prototype.has=function(e){return this.map.has(e)},t.prototype.isOkToHave=function(e,t,r){var o,i=!0;if(null!==(o=this.gvl)&&void 0!==o&&o.vendors){var n=this.gvl.vendors[r];if(n)if(e===RestrictionType_1.RestrictionType.NOT_ALLOWED)i=n.legIntPurposes.includes(t)||n.purposes.includes(t);else if(n.flexiblePurposes.length)switch(e){case RestrictionType_1.RestrictionType.REQUIRE_CONSENT:i=n.flexiblePurposes.includes(t)&&n.legIntPurposes.includes(t);break;case RestrictionType_1.RestrictionType.REQUIRE_LI:i=n.flexiblePurposes.includes(t)&&n.purposes.includes(t)}else i=!1;else i=!1}return i},t.prototype.add=function(e,t){this.isOkToHave(t.restrictionType,t.purposeId,e)&&(t=t.hash,this.has(t)||(this.map.set(t,new BinarySearchTree_1.BinarySearchTree),this.bitLength=0),this.map.get(t).add(e))},t.prototype.restrictPurposeToLegalBasis=function(e){for(var t=this.gvl.vendorIds,r=e.hash,o=function(){var e,r,o;try{for(var i=__values(t),n=i.next();!n.done;n=i.next())o=n.value}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o}(),i=1;i<=o;i++)this.has(r)||(this.map.set(r,new BinarySearchTree_1.BinarySearchTree),this.bitLength=0),this.map.get(r).add(i)},t.prototype.getVendors=function(e){var o,t=[];return e?(e=e.hash,this.has(e)&&(t=this.map.get(e).get())):(o=new Set,this.map.forEach(function(e){e.get().forEach(function(e){o.add(e)})}),t=Array.from(o)),t},t.prototype.getRestrictionType=function(e,t){var r;return this.getRestrictions(e).forEach(function(e){e.purposeId===t&&(void 0===r||r>e.restrictionType)&&(r=e.restrictionType)}),r},t.prototype.vendorHasRestriction=function(e,t){for(var r=!1,o=this.getRestrictions(e),i=0;i<o.length&&!r;i++)r=t.isSameAs(o[i]);return r},t.prototype.getMaxVendorId=function(){var e=0;return this.map.forEach(function(t){e=Math.max(t.max(),e)}),e},t.prototype.getRestrictions=function(e){var t=[];return this.map.forEach(function(r,o){e&&!r.contains(e)||t.push(PurposeRestriction_1.PurposeRestriction.unHash(o))}),t},t.prototype.getPurposes=function(){var e=new Set;return this.map.forEach(function(t,r){e.add(PurposeRestriction_1.PurposeRestriction.unHash(r).purposeId)}),Array.from(e)},t.prototype.remove=function(e,t){var t=t.hash,o=this.map.get(t);o&&(o.remove(e),o.isEmpty()&&(this.map.delete(t),this.bitLength=0))},Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){var t=this;this.gvl_||(this.gvl_=e,this.map.forEach(function(e,r){var o=PurposeRestriction_1.PurposeRestriction.unHash(r);e.get().forEach(function(r){t.isOkToHave(o.restrictionType,o.purposeId,r)||e.remove(r)})}))},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(t.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),t}(__webpack_require__(5186).Cloneable);exports.PurposeRestrictionVector=__webpack_require__},2473:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.RestrictionType||(exports.RestrictionType={}))[exports.NOT_ALLOWED=0]="NOT_ALLOWED",exports[exports.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",exports[exports.REQUIRE_LI=2]="REQUIRE_LI"},4858:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(exports=exports.Segment||(exports.Segment={})).CORE="core",exports.VENDORS_DISCLOSED="vendorsDisclosed",exports.VENDORS_ALLOWED="vendorsAllowed",exports.PUBLISHER_TC="publisherTC"},6130:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _a,__webpack_require__=__webpack_require__(4858),__webpack_require__=(e.ID_TO_KEY=[__webpack_require__.Segment.CORE,__webpack_require__.Segment.VENDORS_DISCLOSED,__webpack_require__.Segment.VENDORS_ALLOWED,__webpack_require__.Segment.PUBLISHER_TC],e.KEY_TO_ID=((_a={})[__webpack_require__.Segment.CORE]=0,_a[__webpack_require__.Segment.VENDORS_DISCLOSED]=1,_a[__webpack_require__.Segment.VENDORS_ALLOWED]=2,_a[__webpack_require__.Segment.PUBLISHER_TC]=3,_a),e);function e(){}exports.SegmentIDs=__webpack_require__},6315:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var t,__extends=this&&this.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),__generator=this&&this.__generator||function(t,e){var r,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,(i=o?[2&i[0],o.value]:i)[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Cloneable_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(5186)),errors_1=__webpack_require__(5458),__webpack_require__=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bitLength=0,e.maxId_=0,e.set_=new Set,e}return __extends(e,t),e.prototype[Symbol.iterator]=function(){var t;return __generator(this,function(e){switch(e.label){case 0:t=1,e.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype.values=function(){return this.set_.values()},Object.defineProperty(e.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this.set_.has(t)},e.prototype.unset=function(t){var e=this;Array.isArray(t)?t.forEach(function(t){return e.unset(t)}):"object"==typeof t?this.unset(Object.keys(t).map(function(t){return+t})):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach(function(t){e.maxId_=Math.max(e.maxId,t)})))},e.prototype.isIntMap=function(t){var e=this,r="object"==typeof t;return r&&Object.keys(t).every(function(r){var n=Number.isInteger(parseInt(r,10));return(n=n&&e.isValidNumber(t[r].id))&&void 0!==t[r].name})},e.prototype.isValidNumber=function(t){return 0<parseInt(t,10)},e.prototype.isSet=function(t){var e=!1;return e=t instanceof Set?Array.from(t).every(this.isValidNumber):e},e.prototype.set=function(t){var e=this;if(Array.isArray(t))t.forEach(function(t){return e.set(t)});else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map(function(t){return+t}));else{if(!this.isValidNumber(t))throw new errors_1.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},e.prototype.empty=function(){this.set_=new Set},e.prototype.forEach=function(t){for(var e=1;e<=this.maxId;e++)t(this.has(e),e)},Object.defineProperty(e.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),e.prototype.setAll=function(t){this.set(t)},e}(Cloneable_1.Cloneable);exports.Vector=__webpack_require__},250:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(5995)),__export(__webpack_require__(5301)),__export(__webpack_require__(4731)),__export(__webpack_require__(8626)),__export(__webpack_require__(7096)),__export(__webpack_require__(4243)),__export(__webpack_require__(2473)),__export(__webpack_require__(4858)),__export(__webpack_require__(6130)),__export(__webpack_require__(6315))},5226:module=>{module.exports={volumePanel:{inline:!1},children:["playToggle","progressControl","customControlSpacer","currentTimeDisplay","TimeDivider","remainingTimeDisplay","durationDisplay","volumePanel","MoreButton","subsCapsButton","QualitySelector","ShareButton","fullscreenToggle"]}},9075:module=>{module.exports={volumePanel:{inline:!1},children:["playToggle","currentTimeDisplay","remainingTimeDisplay","progressControl","customControlSpacer","durationDisplay","volumePanel","MoreButton","subsCapsButton","QualitySelector","ShareButton","fullscreenToggle"]}},8852:module=>{module.exports={volumePanel:{inline:!0},children:["playToggle","progressControl","currentTimeDisplay","durationDisplay","customControlSpacer","volumePanel","subsCapsButton","fullscreenToggle"]}},3423:module=>{module.exports={volumePanel:{inline:!1},children:["playToggle","volumePanel","currentTimeDisplay","remainingTimeDisplay","progressControl","customControlSpacer","durationDisplay","MoreButton","subsCapsButton","QualitySelector","ShareButton","fullscreenToggle","BrandButton"]}},9889:module=>{module.exports={volumePanel:{inline:!1},children:["playToggle","volumePanel","currentTimeDisplay","remainingTimeDisplay","progressControl","customControlSpacer","durationDisplay","MoreButton","subsCapsButton","QualitySelector","ShareButton","fullscreenToggle"]}},2802:module=>{module.exports={path:"//www.ultimedia.com",eventlogUrl:"//dig.ultimedia.com/v/",deliveryapipath:"//www.ultimedia.com",statsurl:"//www.ultimedia.com",staticsPath:"//medialb.ultimedia.com/",allTagTimeout:1e4,mediametrieSerial:"229029210408",mdtkLotname:["02356945","02862723","02625432","02017316","02912517","02820193","02262262"],mdtkSound:["01435628","01311352","01336432","01753540","01113839","01307199","01308126","01766573","01886971","01271351","01709985","01381884","01932433","01667468","01113089","01001780","01553759","01330126","01759142","01650969","01253638","01065275","01932698","01242649","01574357"],focusMdtk:["01413983","01513117","01723414","01114596","01124706","01607189","01650969","01013394"]}},6617:module=>{module.exports={key:"07kBLqw/609tNCTIW+aLPP5PRkIur/kNndVtVA=="}},428:function(){!function(){var __indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};videojs.plugin("ga",function(options){var dataSetupOptions,end,error,eventCategory,eventLabel,eventsToTrack,fullscreen,loaded,parsedOptions,pause,percentsAlreadyTracked,percentsPlayedInterval,play,resize,seekEnd,seekStart,seeking,sendbeacon,timeupdate,volumeChange;return null==options&&(options={}),dataSetupOptions={},this.options_["data-setup"]&&(parsedOptions=JSON.parse(this.options_["data-setup"])).ga&&(dataSetupOptions=parsedOptions.ga),eventsToTrack=options.eventsToTrack||dataSetupOptions.eventsToTrack||["loadedmetadata","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],percentsPlayedInterval=options.percentsPlayedInterval||dataSetupOptions.percentsPlayedInterval||10,eventCategory=options.eventCategory||dataSetupOptions.eventCategory||"Video",eventLabel=options.eventLabel||dataSetupOptions.eventLabel,options.debug=options.debug||!1,seekStart=seekEnd=0,seeking=!(percentsAlreadyTracked=[]),loaded=function(){percentsAlreadyTracked=[],eventLabel=eventLabel||this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,""),0<=__indexOf.call(eventsToTrack,"loadedmetadata")&&sendbeacon("loadedmetadata",!0)},timeupdate=function(){for(var _i,currentTime=Math.round(this.currentTime()),duration=Math.round(this.duration()),percentPlayed=Math.round(currentTime/duration*100),percent=_i=0;_i<=99;percent=_i+=percentsPlayedInterval)percent<=percentPlayed&&__indexOf.call(percentsAlreadyTracked,percent)<0&&(0<=__indexOf.call(eventsToTrack,"start")&&0===percent&&0<percentPlayed?sendbeacon("start",!0):0<=__indexOf.call(eventsToTrack,"percentsPlayed")&&0!==percentPlayed&&sendbeacon("percent played",!0,percent),0<percentPlayed&&percentsAlreadyTracked.push(percent));0<=__indexOf.call(eventsToTrack,"seek")&&(seekStart=seekEnd,seekEnd=currentTime,1<Math.abs(seekStart-seekEnd)&&(sendbeacon("seek start",!(seeking=!0),seekStart),sendbeacon("seek end",!1,seekEnd)))},end=function(){sendbeacon("end",!0)},play=function(){var currentTime=Math.round(this.currentTime());sendbeacon("play",!0,currentTime),seeking=!1},pause=function(){var currentTime=Math.round(this.currentTime());currentTime===Math.round(this.duration())||seeking||sendbeacon("pause",!1,currentTime)},volumeChange=function(){var volume=!0===this.muted()?0:this.volume();sendbeacon("volume change",!1,volume)},resize=function(){sendbeacon("resize - "+this.width()+"*"+this.height(),!0)},error=function(){var currentTime=Math.round(this.currentTime());sendbeacon("error",!0,currentTime)},fullscreen=function(){var currentTime=Math.round(this.currentTime());"function"==typeof this.isFullscreen&&this.isFullscreen()||"function"==typeof this.isFullScreen&&this.isFullScreen()?sendbeacon("enter fullscreen",!1,currentTime):sendbeacon("exit fullscreen",!1,currentTime)},sendbeacon=function(action,nonInteraction,value){window.ga?ga("send","event",{eventCategory:eventCategory,eventAction:action,eventLabel:eventLabel,eventValue:value,nonInteraction:nonInteraction}):window._gaq?_gaq.push(["_trackEvent",eventCategory,action,eventLabel,value,nonInteraction]):options.debug&&console.log("Google Analytics not detected")},this.ready(function(){if(this.on("loadedmetadata",loaded),this.on("timeupdate",timeupdate),0<=__indexOf.call(eventsToTrack,"end")&&this.on("ended",end),0<=__indexOf.call(eventsToTrack,"play")&&this.on("play",play),0<=__indexOf.call(eventsToTrack,"pause")&&this.on("pause",pause),0<=__indexOf.call(eventsToTrack,"volumeChange")&&this.on("volumechange",volumeChange),0<=__indexOf.call(eventsToTrack,"resize")&&this.on("resize",resize),0<=__indexOf.call(eventsToTrack,"error")&&this.on("error",error),0<=__indexOf.call(eventsToTrack,"fullscreen"))return this.on("fullscreenchange",fullscreen)}),{sendbeacon:sendbeacon}})}.call(this)},2677:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var translator=__webpack_require__(1502);!function(){"use strict";window.videojs.plugin("suggestedVideoEndcap",function(opts){opts=opts||{header:translator.translate("headerRecommandation"),max:8,suggestions:[{title:"",url:"",image:"",alt:"",target:"_self",description:"",duration:"",label:""}]};var _sve,_a,_img,_title,player=this,alreadyEnded=!1,alreadyPaused=!1,sugs=opts.suggestions,_aside=document.createElement("aside"),_header=document.createElement("h5"),_div=document.createElement("div"),_frag=document.createDocumentFragment(),j=sugs.length>opts.max?opts.max:sugs.length,alreadyVisible=(_aside.className="vjs-suggested-video-endcap",_div.className="vjs-suggested-video-endcap-container",_header.innerHTML=opts.header,_header.className="vjs-suggested-video-endcap-header",_aside.appendChild(_header),!1);function visibility(){ellipsizeTextBox(),alreadyVisible||(_sve.style.visibility="visible",alreadyVisible=!0)}function ellipsizeTextBox(){document.querySelectorAll(".vjs-suggested-video-endcap-description").forEach(function(el,i){el.innerHTML=sugs[i].description+" - "+sugs[i].label,cut(el)}),document.querySelectorAll(".vjs-suggested-video-endcap-title").forEach(function(el,i){el.innerHTML=sugs[i].title+" - "+formateDuration(sugs[i].duration),cut(el)})}function cut(el){for(var wordArray=el.innerHTML.split(" ");el.scrollHeight>el.offsetHeight;){var currentText=el.textContent;if(wordArray.pop(),el.innerHTML=wordArray.join(" ")+"...",el.textContent==currentText)return}}function str_pad_left(string,pad,length){return(new Array(length+1).join(pad)+string).slice(-length)}function formateDuration(duration){var minutes=Math.floor(duration/60),duration=duration-60*minutes;return str_pad_left(minutes,"0",2)+":"+str_pad_left(duration,"0",2)}player.one("suggest-destroy",function(){_sve&&_sve.parentNode&&_sve.parentNode.removeChild(_sve),player.bigPlayButton.show()}),player.on(["ended","recommandation-click","recommandation-pause"],function(e){if(0!==sugs.length){var w_min=player.el().classList.contains("vjs-layout-tiny"),h_min=player.el().classList.contains("vjs-layout-h-m-md"),isVisible=player.el().classList.contains("dtk-visible-player");if(!isVisible&&!w_min&&!h_min){if("ended"===e.type&&(alreadyEnded=!0),"recommandation-click"===e.type&&(alreadyPaused=!0),!_sve){for(var i=0;i<j;i++){(_a=document.createElement("a")).className="vjs-suggested-video-endcap-link",_a.href=sugs[i].url,_a.target=sugs[i].target||"_self",_a.title=sugs[i].title;sugs[i].alt||sugs[i].title;(_img=document.createElement("div")).className="vjs-suggested-video-endcap-img",_img.innerHTML='<img src="'+sugs[i].image+'" alt="" />',_a.appendChild(_img),(_img=document.createElement("div")).className="vjs-suggested-video-endcap-text",_a.appendChild(_img);var duration=formateDuration(sugs[i].duration);(_title=document.createElement("span")).className="vjs-suggested-video-endcap-title",_title.innerHTML=sugs[i].title+" - "+duration,_img.appendChild(_title),(_title=document.createElement("span")).className="vjs-suggested-video-endcap-description",_title.innerHTML=sugs[i].description+" - "+sugs[i].label,_img.appendChild(_title),_div.appendChild(_a)}_aside.appendChild(_div),_sve=_aside,_frag.appendChild(_aside),player.el().appendChild(_frag),setTimeout(visibility,1e3),player.bigPlayButton.hide()}!_sve.classList.contains("is-active")||alreadyEnded||alreadyPaused?("recommandation-click"===e.type&&!alreadyEnded&&alreadyPaused&&(player.hasClass("vjs-paused")?player.play():player.pause()),"recommandation-pause"!==e.type||alreadyEnded||alreadyPaused||(_sve.classList.add("is-paused"),player.el().classList.add("recommandation-banner"),_sve.style.bottom=player.controlBar.height()+"px"),_sve.classList.add("is-active"),ellipsizeTextBox(),ellipsizeTextBox()):player.play()}}}),player.on("play",function(){alreadyPaused=alreadyEnded=!1,_sve&&(_sve.classList.remove("is-active"),_sve.classList.remove("is-paused"),player.el().classList.remove("recommandation-banner"))}),player.on("playerresize",function(e){_sve&&(ellipsizeTextBox(),ellipsizeTextBox())})})}()},6346:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__.d(__webpack_exports__,{Z:()=>function(flag){return"boolean"!==_typeof(flag)?parseInt(flag):flag?1:0}})},5146:module=>{function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var HttpRequest=function(){function HttpRequest(){if(!(this instanceof HttpRequest))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=HttpRequest,staticProps=[{key:"getXhr",value:function(){var xhr;if(window.XMLHttpRequest||window.ActiveXObject)if(window.ActiveXObject)try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP")}else xhr=new XMLHttpRequest;else xhr=null;if(null===xhr)throw new Error("No ajax support");return xhr}},{key:"get",value:function(url,data){HttpRequest.ajax({url:url,data:data,success:2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},dataType:3<arguments.length&&void 0!==arguments[3]?arguments[3]:"text"})}},{key:"post",value:function(url,data){HttpRequest.ajax({type:"POST",url:url,data:data,success:2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},dataType:3<arguments.length?arguments[3]:void 0})}},{key:"getScript",value:function(url){var success=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},scriptTag=document.createElement("script"),firstScriptTag=document.getElementsByTagName("script")[0];scriptTag.src=url,scriptTag.readyState?scriptTag.onreadystatechange=function(){"loaded"!==scriptTag.readyState&&"complete"!==scriptTag.readyState||(scriptTag.onreadystatechange=null,success())}:scriptTag.onload=function(){success()},firstScriptTag.parentNode.insertBefore(scriptTag,firstScriptTag),scriptTag.remove()}},{key:"ajax",value:function(options){if(void 0===options.type&&(options.type="GET"),void 0===options.data&&(options.data=[]),void 0===options.async&&(options.async=!0),"jsonp"===options.dataType)return void 0===options.jsonp&&(options.jsonp=!1),url=options.url,url+=(-1!==url.indexOf("?")?"&":"?")+HttpRequest.dataToStr(options.data),void HttpRequest.jsonp(url,options.jsonp);var json=!1,url=("json"===options.dataType&&(json=!0),HttpRequest.getXhr());void 0!==options.success&&(url.onreadystatechange=function(event){var data;this.readyState===XMLHttpRequest.DONE&&200===this.status&&(data=this.responseText,json&&(data=JSON.parse(data)),options.success(data),void 0!==options.complete&&options.complete())}),url.addEventListener("error",this.error(options)),url.open(options.type,options.url,options.async),"POST"===options.type&&url.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),url.send(HttpRequest.dataToStr(options.data))}},{key:"error",value:function(options){void 0!==options.error&&(options.error(),void 0!==options.complete&&options.complete())}},{key:"jsonp",value:function(url){var scriptTag=document.createElement("script"),firstScriptTag=document.getElementsByTagName("script")[0];scriptTag.src=url,firstScriptTag.parentNode.insertBefore(scriptTag,firstScriptTag),scriptTag.remove()}},{key:"dataToStr",value:function(data){var keys=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],isArray=2<arguments.length&&void 0!==arguments[2]&&arguments[2],p=Object.keys(data).map(function(key){var tKey,val=data[key];return null===val&&(val=""),"[object Object]"===Object.prototype.toString.call(val)||Array.isArray(val)?(Array.isArray(data)?keys.push(""):keys.push(key),HttpRequest.dataToStr(val,keys,Array.isArray(val))):(tKey=key,0<keys.length&&(tKey=(isArray?keys:[].concat(_toConsumableArray(keys),[key])).reduce(function(str,k){return""===str?k:"".concat(str,"[").concat(k,"]")},"")),"".concat(encodeURIComponent(tKey),isArray?"[]=":"=").concat(encodeURIComponent(val)))}).join("&");return keys.pop(),p}}],(protoProps=null)&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),HttpRequest}();module.exports=HttpRequest},5756:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var jwplayerConf=__webpack_require__(6617),PlayerAdapterFactory=function(){function PlayerAdapterFactory(){if(!(this instanceof PlayerAdapterFactory))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=PlayerAdapterFactory,(protoProps=[{key:"createPlayerAdapter",value:function(divtarget,isMobile){void 0===isMobile&&(isMobile=0);var adapter=new __webpack_require__.g.PlayerAdapter(divtarget),conf=(adapter.setMobile(isMobile),{});switch(adapter.getPlayerType()){case"JwPlayer7Adapter":conf.key=jwplayerConf.key;break;case"VideoJsAdapter":break;default:throw new RangeError("Unsupported player type: "+_typeof(adapter))}return adapter.setup(conf),adapter}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PlayerAdapterFactory}();module.exports=PlayerAdapterFactory},6736:module=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var PostMessageManager=function(){function PostMessageManager(el){if(!(this instanceof PostMessageManager))throw new TypeError("Cannot call a class as a function");el.addEventListener?el.addEventListener("message",this.readPostMessage.bind(this),!1):el.attachEvent("message",this.readPostMessage.bind(this)),this.listeners=[]}var Constructor,protoProps,staticProps;return Constructor=PostMessageManager,(protoProps=[{key:"attachListener",value:function(listener){this.listeners.push(listener)}},{key:"readPostMessage",value:function(message){this.listeners.map(function(listener){"function"==typeof listener?listener(message):"object"==_typeof(listener)&&listener.readPostMessage&&listener.readPostMessage(message)})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PostMessageManager}();module.exports=PostMessageManager},4122:(module,__unused_webpack_exports,__webpack_require__)=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var SkinLoader=function(){function SkinLoader(){if(!(this instanceof SkinLoader))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=SkinLoader,(protoProps=[{key:"initSkin",value:function(skinName){this._skinName=skinName}},{key:"setStylesLocation",value:function(path){this._cssPath=path}},{key:"loadStyles",value:function(){this.getCssSkin(this._skinName)}},{key:"loadStylesVertical",value:function(){this.getCssSkinVertical(this._skinName)}},{key:"getSkinNameDB",value:function(){return this._skinName}},{key:"getSkinName",value:function(){var class_name=this._skinName;switch(this._skinName){case"jukebo":case"ultimediawl":case"rtl":class_name="um";break;case"obsdesktop":case"obsmobile":class_name="obs";break;case"vanityfair":case"gq":class_name="cn";case"dtkplayer":class_name="dtkplayer-skin"}return class_name}},{key:"getCssSkin",value:function(){__webpack_require__(1481)("./"+this._cssPath+this._skinName+".scss")}},{key:"getCssSkinVertical",value:function(){"um"==this.getSkinName()&&__webpack_require__(9445)("./"+this._cssPath+this.getSkinName()+".vertical.scss")}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SkinLoader}();module.exports=SkinLoader},1502:(module,__unused_webpack_exports,__webpack_require__)=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var translator=new(function(){function Translator(){if(!(this instanceof Translator))throw new TypeError("Cannot call a class as a function");var lang=(lang=window.navigator.userLanguage||window.navigator.language).slice(0,2);this.setLanguage(lang),this.translations={}}var Constructor,protoProps,staticProps;return Constructor=Translator,(protoProps=[{key:"setLanguage",value:function(lang){this.lang=lang}},{key:"addTranslation",value:function(lang,translations){this.translations[lang]=translations}},{key:"translate",value:function(sentence,forcelang){var lang=this.lang;return null==this.translations[lang=null!=forcelang?forcelang:lang]||null==this.translations[lang][sentence]?"en"!=lang?this.translate(sentence,"en"):sentence:this.translations[lang][sentence]}},{key:"getDefaultTranslation",value:function(sentence){return null==this.translations[lang]||null==this.translations[this.lang][sentence]?this.getDefaultTranslation(sentence):this.translations[this.lang][sentence]}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Translator}());translator.addTranslation("fr",__webpack_require__(3516)),translator.addTranslation("en",__webpack_require__(1112)),translator.addTranslation("es",__webpack_require__(9797)),module.exports=translator},2323:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var AddonAbstract=function(){function AddonAbstract(){if(!(this instanceof AddonAbstract))throw new TypeError("Cannot call a class as a function");this.myVarname=null}var Constructor,protoProps,staticProps;return Constructor=AddonAbstract,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"setVarname",value:function(varname){this.myVarname=varname}},{key:"getMyVarName",value:function(){if(null==this.myVarname)for(var name in window)if(window[name]===this){this.myVarname=name;break}return this.myVarname}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AddonAbstract}();module.exports=AddonAbstract},1610:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var AddonsManager=function(){function AddonsManager(player){if(!(this instanceof AddonsManager))throw new TypeError("Cannot call a class as a function");this.addons={},this.player=player}var Constructor,protoProps,staticProps;return Constructor=AddonsManager,(protoProps=[{key:"attachAddon",value:function(addon,varname,notglobal){return void 0===notglobal&&(notglobal=!1),addon.setPlayer(this.player),addon.setVarname(varname),this.addons[varname]=addon,notglobal||(window[varname]=addon),this}},{key:"init",value:function(){for(var addon in this.addons)this.addons[addon].init()}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AddonsManager}();module.exports=AddonsManager},3299:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var CimMatching=function(){function CimMatching(){if(!(this instanceof CimMatching))throw new TypeError("Cannot call a class as a function");this.arrayMatching={4:"sp",30:"ce"}}var Constructor,protoProps,staticProps;return Constructor=CimMatching,(protoProps=[{key:"getCimType",value:function(dgtkType){return void 0!==this.arrayMatching[dgtkType]?this.arrayMatching[dgtkType]:"nw"}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CimMatching}();module.exports=CimMatching},9250:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var NotificationPlugin=function(){function NotificationPlugin(){if(!(this instanceof NotificationPlugin))throw new TypeError("Cannot call a class as a function");this.alreadyNotification=!1}var Constructor,protoProps,staticProps;return Constructor=NotificationPlugin,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){this.player.infos.notification&&!this.alreadyNotification&&(this.sendCreateNotification(this.player.getInfo("float_video_css"),this.player.getInfo("top_float_video_css"),this.player.getInfo("bottom_float_video_css"),this.player.getInfo("right_float_video_css"),this.player.getInfo("left_float_video_css"),this.player.getInfo("width_float_video_css"),this.player.getInfo("display_visible_mobile")),this.alreadyNotification=!0,this.player.infos.float_video=1,this.player.infos.multiadPreload=0)}},{key:"sendCreateNotification",value:function(position,top,bottom,right,left,width,display_mobile){window.parent.postMessage({action:"create_notification",target:"iframe",position:position,top:top,bottom:bottom,right:right,left:left,width:width,display_mobile:display_mobile},"*")}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NotificationPlugin}();module.exports=NotificationPlugin},1841:(module,__unused_webpack_exports,__webpack_require__)=>{function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var translator=__webpack_require__(1502),__webpack_require__=(__webpack_require__(1655),function(){function OverlayPreviewPlugin(){_classCallCheck(this,OverlayPreviewPlugin),this.overlay_preview_close}return _createClass(OverlayPreviewPlugin,[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){var overlayAd,overlayAdSkip,datas,instanceOverlay,overlayAdEnd,target=this.player.getTarget(),overlaySuggest=(this.showSkipAd=this.player.infos.showSkipAd,this.isCountDown=2==this.player.infos.skipAdType?1:0,0!=this.player.getInfo("isMobile")||1!=this.player.getInfo("displayOverlayPreview")||this.isCountDown||(overlayAd=new OverlayComponent(this.player),datas={header:translator.translate("headerOverlayAdPreview"),image:this.player.infos.overlay_image,title:this.player.infos.title,position:"left",btnClose:!0,countdown:!1,type:"overlayAd"},this.player.on("dtk-reload",function(e,options){this.wrap_overlay_preview&&this.wrap_overlay_preview.parentNode.removeChild(this.wrap_overlay_preview),datas.image=options.video.overlay_image,datas.title=options.video.title,overlayAd.createOverlayPreview(target,datas)}.bind(this)),overlayAd.createOverlayPreview(target,datas),this.player.addListener("preroll",function(){this.player._video_preview_active||overlayAd.showOverlayPreview(!1)}.bind(this)),overlayAd.alreadyHide||this.player.addListener("after_preroll",function(){overlayAd.closeOverlayPreview()})),new OverlayComponent),overlayAdPreview=(this.player.infos.recoOverlay&&this.player.addListener("playlist_ready",function(videolist){videolist={header:translator.translate("headerOverlayPreview"),image:videolist[0].thumb,title:videolist[0].title,position:"right",btnClose:!0,countdown:!1,type:"overlaySuggest"};overlaySuggest.createOverlayPreview(target,videolist),this.player.on("timeupdate",function(){overlaySuggest.alreadyDisplay||100*(1-this.player.getPosition()/this.player.getDuration())<30&&(this.player.adapter.videojs.hasClass("dtk-visible-player")||overlaySuggest.showOverlayPreview(!1))}.bind(this))}.bind(this)),this.isCountDown&&this.showSkipAd&&(overlayAdSkip=new OverlayComponent(this.player),datas={header:translator.translate("headerOverlayAdPreview"),image:this.player.infos.overlay_image,title:this.player.infos.title,position:"left",btnClose:!0,countdown:this.isCountDown,eventCountdown:"adSkip-updateCountdown",type:"overlayAdSkip"},overlayAdSkip.onEndCountdown=function(){overlayAdSkip.overlay_preview_label.innerHTML=translator.translate("afterSkipAdMessage"),overlayAdSkip.overlay_preview_countdown.style.display="none",overlayAdSkip.wrap_overlay_preview.style.cursor="pointer",overlayAdSkip.wrap_overlay_preview.addEventListener("click",overlayAdSkip.skipadCallback.bind(overlayAdSkip))},this.player.on("dtk-reload",function(e,options){this.wrap_overlay_preview&&this.wrap_overlay_preview.parentNode.removeChild(this.wrap_overlay_preview),datas.image=options.video.overlay_image,datas.title=options.video.title,overlayAdSkip.createOverlayPreview(target,datas)}.bind(this)),overlayAdSkip.createOverlayPreview(target,datas),(instanceOverlay=this).player.addListener("preroll",function(){overlayAdSkip.showOverlayPreview(instanceOverlay.isCountDown)}),overlayAdSkip.alreadyHide||this.player.addListener("after_preroll",function(){overlayAdSkip.closeOverlayPreview()})),new OverlayComponent(this.player));overlayAdPreview.DEFAULT_DURATION_COUNTDOWN=this.player.infos.DEFAULT_DURATION_PREVIEW_MESSAGE,overlayAdPreview.DEFAULT_THRESHOLD_PREVIEW=this.player.infos.DEFAULT_THRESHOLD_PREVIEW,datas={header:translator.translate("beforePreviewAdMessage"),image:"",title:"",position:"right",btnClose:!1,countdown:!1,type:"overlayAdPreview"},this.player.on("dtk-reload",function(e,options){this.wrap_overlay_preview&&this.wrap_overlay_preview.parentNode.removeChild(this.wrap_overlay_preview),overlayAdPreview.createOverlayPreview(target,datas)}.bind(this)),overlayAdPreview.createOverlayPreview(target,datas),overlayAdPreview.countdownEndTimeout=null,overlayAdPreview.countdownInProgress=!1,overlayAdPreview.checkMessagePreview=function(data){data=data.v;null!==overlayAdPreview.countdownEndTimeout&&data<overlayAdPreview.DEFAULT_THRESHOLD_PREVIEW?(clearTimeout(overlayAdPreview.countdownEndTimeout),overlayAdPreview.countdownEndTimeout=null,overlayAdPreview.closeOverlayPreview(),overlayAdPreview.removeClass(overlayAdPreview.overlay_preview_label,"overlay-preview--animate")):!overlayAdPreview.countdownEndTimeout&&overlayAdPreview.countdownInProgress&&data>=overlayAdPreview.DEFAULT_THRESHOLD_PREVIEW&&this.player.notify("showCountdownPreview")}.bind(this),this.player.addListener("visibilityChanged",function(data){overlayAdPreview.checkMessagePreview(data)}),this.player.addListener("ready",function(){this.player.on("play",function(){var visibilityRate=this.player.getVisibilityRate();overlayAdPreview.checkMessagePreview({v:visibilityRate})}.bind(this)),this.player.on("pause",function(){overlayAdPreview.checkMessagePreview({v:0})})}.bind(this)),this.player.addListener("showCountdownPreview",function(){overlayAdPreview.countdownInProgress=!0,overlayAdPreview.showOverlayPreview(!0),setTimeout(function(){overlayAdPreview.addClass(overlayAdPreview.overlay_preview_label,"overlay-preview--animate")},600),overlayAdPreview.countdownEndTimeout=setTimeout(function(){overlayAdPreview.countdownEndTimeout=null,overlayAdPreview.countdownInProgress=!1,this.player.notify("onPreviewCountdownReady")}.bind(this),1e3*(overlayAdPreview.DEFAULT_DURATION_COUNTDOWN+1))}.bind(this)),this.player.addListener("adImpression",function(){overlayAdPreview.closeOverlayPreview()}),this.showSkipAd&&!this.player.double_preroll||"vqls8s"===this.player.infos.id&&5===this.player.infos.float_video&&1!==this.player.infos.unitaire||((overlayAdEnd=new OverlayComponent(this.player)).DEFAULT_DURATION_COUNTDOWN=4e3,overlayAdEnd.COUNTDOWN_DURATION=5,datas={header:translator.translate("beforeSkipAdMessagePlur"),image:"",title:"",position:"right",btnClose:!1,countdown:!1,eventCountdown:"AdRemainingTime",type:"overlayEndAd"},overlayAdEnd.onEndCountdown=function(){},this.player.on("dtk-reload",function(e,options){document.querySelector(".overlayEndAd")&&this.player.adapter.videojs.el_.removeChild(document.querySelector(".overlayEndAd")),overlayAdEnd.createOverlayPreview(target,datas)}.bind(this)),document.querySelector(".overlayEndAd")&&this.player.adapter.videojs.el_.removeChild(document.querySelector(".overlayEndAd")),overlayAdEnd.createOverlayPreview(target,datas),this.player.addListener("AdRemainingTime",function(adRemaintingTime){var txt;adRemaintingTime<=overlayAdEnd.COUNTDOWN_DURATION+1&&1<=adRemaintingTime?(adRemaintingTime=parseInt(adRemaintingTime),txt="",void 0!==this.player.double_preroll&&this.player.double_preroll&&1===this.player.nb_preroll&&10<this.player.timePreroll?txt=(1<adRemaintingTime?translator.translate("beforeFirstAdShortMessagePlur"):translator.translate("beforeFirstAdShortMessageSing")).replace("xx",adRemaintingTime):void 0!==this.player.double_preroll&&this.player.double_preroll&&2===this.player.nb_preroll?txt=translator.translate("beforeSecondAdShortMessagePlur").replace("xx",adRemaintingTime):void 0===this.player.vinfos.video.media_sources.live&&(txt=(1<adRemaintingTime?translator.translate("beforeSkipAdShortMessagePlur"):translator.translate("beforeSkipAdShortMessageSing")).replace("xx",adRemaintingTime)),overlayAdEnd.overlay_preview_label.innerHTML=txt,overlayAdEnd.overlay_preview_label.dataset.text=txt,overlayAdEnd.showOverlayPreview(!0)):adRemaintingTime<1&&setTimeout(function(){overlayAdEnd.closeOverlayPreview()},1e3*adRemaintingTime)}.bind(this),!1),this.player.addListener("AtEndPub",function(){overlayAdEnd.closeOverlayPreview()}),this.player.addListener("AtEndPubFirstPreroll",function(){overlayAdEnd.closeOverlayPreview()}))}}]),OverlayPreviewPlugin}()),OverlayComponent=function(){function OverlayComponent(player){_classCallCheck(this,OverlayComponent),this.alreadyHide=!1,this.alreadyDisplay=!1,this.wrap_overlay_preview,this.overlay_preview_close,this.player=player}return _createClass(OverlayComponent,[{key:"createOverlayPreview",value:function(target,datas){this.wrap_overlay_preview=document.createElement("div"),this.wrap_overlay_preview.setAttribute("class","overlay-preview__wrap "+datas.type),""!=datas.image&&(this.overlay_preview_img=document.createElement("img"),this.overlay_preview_img.setAttribute("class","overlay-preview__image"),this.overlay_preview_img.setAttribute("src",datas.image)),this.overlay_preview_txt=document.createElement("div"),this.overlay_preview_txt.setAttribute("class","overlay-preview__txt"),this.overlay_preview_close=document.createElement("div"),this.overlay_preview_close.setAttribute("class","overlay-preview__close"),this.overlay_preview_label=document.createElement("span"),this.overlay_preview_label.setAttribute("class","overlay-preview__label"),this.overlay_preview_label.innerHTML=datas.header,this.overlay_preview_label.dataset.text=datas.header,this.overlay_preview_title=document.createElement("p"),this.overlay_preview_title.setAttribute("class","overlay-preview__title"),this.overlay_preview_title.innerHTML=datas.title,this.overlay_preview_txt.appendChild(this.overlay_preview_label),this.overlay_preview_txt.appendChild(this.overlay_preview_title),void 0!==this.overlay_preview_img&&this.wrap_overlay_preview.appendChild(this.overlay_preview_img),this.wrap_overlay_preview.appendChild(this.overlay_preview_txt),datas.btnClose&&this.wrap_overlay_preview.appendChild(this.overlay_preview_close),datas.countdown&&(this.overlay_preview_close.style.display="none",this.overlay_preview_countdown=document.createElement("div"),this.overlay_preview_countdown.style.clear="both",this.overlay_preview_countdown.setAttribute("class","overlay-preview__countdown"),this.wrap_overlay_preview.appendChild(this.overlay_preview_countdown),(instanceOverlay=this).player.addListener(data.eventCountdown,function(adCountDown){adCountDown<=0?instanceOverlay.onEndCountdown():instanceOverlay.overlay_preview_countdown.innerHTML=2<=adCountDown?"<div>"+translator.translate("beforeSkipAdMessagePlur").replace("xx",adCountDown)+"</div>":"<div>"+translator.translate("beforeSkipAdMessageSing").replace("xx",adCountDown)+"</div>"})),"right"===datas.position?(this.wrap_overlay_preview.style.right=0,this.wrap_overlay_preview.classList.add("overlay-preview-right")):(this.wrap_overlay_preview.style.left=0,this.wrap_overlay_preview.classList.add("overlay-preview-left")),document.getElementById(target).appendChild(this.wrap_overlay_preview);var instanceOverlay,plugin=this;this.overlay_preview_close.onclick=function(){plugin.closeOverlayPreview()}}},{key:"showOverlayPreview",value:function(isCountDown){var plugin;this.wrap_overlay_preview.classList.add("overlay-preview--active"),this.alreadyDisplay=!0,isCountDown||(plugin=this,setTimeout(function(){plugin.closeOverlayPreview()},1e4))}},{key:"closeOverlayPreview",value:function(){this.wrap_overlay_preview.classList.contains("overlay-preview--active")&&(this.wrap_overlay_preview.classList.remove("overlay-preview--active"),this.alreadyHide=!0)}},{key:"skipadCallback",value:function(){this.player.notify("OverlayPreview-skipadCallback")}},{key:"addClass",value:function(target,className){target.classList.add(className)}},{key:"removeClass",value:function(target,className){target.classList.remove(className)}}]),OverlayComponent}();module.exports=__webpack_require__},7646:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var PlayerEventPlugin=function(){function PlayerEventPlugin(){if(!(this instanceof PlayerEventPlugin))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=PlayerEventPlugin,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){var _this=this;this.player.addListener("ad-click",function(data){return _this.sendToParent("onAdClick",{client:"vast",creativetype:"",tag:data.tag})}),this.player.addListener("pl-mute",function(data){return _this.sendToParent("onMute",data)}),this.player.addListener("ready",function(){return _this.sendToParent("onReady",{setupTime:"",viewable:_this.player.isVisible()?1:0,typePlayer:_this.player.infos.typePlayer?"simple":"smart",video:_this.player.infos.id,topic:_this.player.infos.topicId})}),this.player.addListener("error",function(){return _this.sendToParent("onSetupError",_this.player.adapter.getAdaptee().error())})}},{key:"sendToParent",value:function(event,data){this.player.sendMessageToParent("playerevent_"+event+"_"+JSON.stringify(data))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PlayerEventPlugin}();module.exports=PlayerEventPlugin},3610:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var DtkPlayerListenerAbstract=function(){function DtkPlayerListenerAbstract(player){if(!(this instanceof DtkPlayerListenerAbstract))throw new TypeError("Cannot call a class as a function");this.player=player}var Constructor,protoProps,staticProps;return Constructor=DtkPlayerListenerAbstract,(protoProps=[{key:"getPlayer",value:function(){return this.player}},{key:"readPostMessage",value:function(message){throw new TypeError("You have to implement the method readPostMessage() !")}},{key:"debug",value:function(){this.player.debug.apply(this.player,arguments)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DtkPlayerListenerAbstract}();module.exports=DtkPlayerListenerAbstract},1112:module=>{module.exports={beforeSkipAdMessageSing:"Your video will start in xx second",beforeSkipAdMessagePlur:"Your video will start in xx seconds",beforeSkipAdShortMessageSing:"Your video in xx sec",beforeSkipAdShortMessagePlur:"Your video in xx sec",beforeFirstAdShortMessageSing:"Ad 1/2 : Next ad in xx sec",beforeFirstAdShortMessagePlur:"Ad 1/2 : Next ad in xx sec",beforeSecondAdShortMessageSing:"Ad 2/2 : Your video in xx sec",beforeSecondAdShortMessagePlur:"Ad 2/2 : Your video in xx sec",beforePreviewAdMessage:"Your video continues after the ad...",afterSkipAdMessage:"Skip Ad",headerOverlayAdPreview:"Coming up next",headerOverlayPreview:"Coming up next",linkDigitekaSite:"https://digiteka.com/en/homepage/",linkOptoutDigiteka:"https://www.ultimedia.com/default/presentation/politiqueconfidentialite",optoutDigiteka:"Privacy",afterMessageSendOkMessage:"The video has been reported",labelEmbedCode:"Embed code",textButtonCopyCode:"Copy code",headerRecommandation:"Discover more videos",MEDIA_ERR_ABORTED:"The video download was cancelled.",MEDIA_ERR_NETWORK:"The video connection was lost, please confirm you are connected to the internet.",MEDIA_ERR_DECODE:"The video is bad or in a format that cannot be played on your browser.",MEDIA_ERR_SRC_NOT_SUPPORTED:"This video is either unavailable or not supported in this browser.",MEDIA_ERR_ENCRYPTED:"The video you are trying to watch is encrypted and we do not know how to decrypt it.",MEDIA_ERR_UNKNOWN:"An unanticipated problem was encountered.",ERR_SORRY:"Sorry for the interruption :(",PLAYER_ERR_NO_SRC:"No video has been loaded",PLAYER_ERR_TIMEOUT:"Could not download the video",PLAYER_ERR_DOMAIN_RESTRICTED:"This video is restricted from playing on your current domain",PLAYER_ERR_IP_RESTRICTED:"This video is restricted at your current IP address",PLAYER_ERR_GEO_RESTRICTED:"This video is restricted from playing in your current geographic region",LIVE_STOPPED:"Live is stopped.",ERR_RETRY:"Please refresh your browser.",flashMessage:"If you are using an older browser please try upgrading or installing Flash.",labelTechnicalMessage:"Technical details",labelCodeErrorMessage:"Error Code",textLabelCopiedEmbed:"Copied",textLabelSharing:"Share the video",controlTextBtnMore:"More options",labelRecommendation:"Recommendations",labelShare:"Share",controlTextBtnRewind:"Rewind 10 seconds",controlTextBtnForward:"Forward 10 seconds",textConstentCmp:"This DIGITEKA video player uses cookies to broadcast video content and personalized advertising according to your profile, analyze audience statistics, performance of advertisements or videos. By continuing your visit to this site or your use of this player, you accept the use of cookies by Digiteka and %1, on this site and on all sites that you visit using the DIGITEKA player. To learn more, or withdraw your consent, visit our %2.",textConstentCmpMobile:"DIGITEKA uses cookies to broadcast video content and personalized advertising, as well as to carry out statistics. While continuing your navigation, you accept the use of cookies by DIGITEKA and %1, on this site and on any other visited site broadcasting the player DIGITEKA. You may withdraw your consent or learn more about our %2.",labelLinkVendors:"its partners",labelLinkPolicy:"privacy policy",labelButtonConsentCmp:"I accept these purposes",labelLinkSettingsCmp:"Settings",labelOptOutCookieButton:"To delete Digiteka-related cookies from your browser",labelOptOutDatasButton:"To manage your personal data and exercise your rights, go to our %1",optOutButton:"click here",labelOptOut:"Manage your personal data",messageCookieEmptyOK:"Your personal data have been deleted",messageCookieEmptyKO:"A problem has occurred. Try Again.",labelLinkCloseButton:"Close",textAfterConstentCmp:"You can now close this banner.",labelReportButton:"Report this video",duringAdsMessage:"In a few moments, your video ...",resumePlayAfterAdMessage:"Resume playback"}},9797:module=>{module.exports={beforeSkipAdMessageSing:"Su vídeo comienza en xx segundo",beforeSkipAdMessagePlur:"Su vídeo comienza en xx segundos",beforeSkipAdShortMessageSing:"Su vídeo en xx seg",beforeSkipAdShortMessagePlur:"Su vídeo en xx segundos",beforePreviewAdMessage:"El video continúa después de la publicidad...",afterSkipAdMessage:"Ver el vídeo ahora",headerOverlayAdPreview:"Después de la publicidad",headerOverlayPreview:"A continuación",linkDigitekaSite:"https://digiteka.com/es/homepage/",linkOptoutDigiteka:"https://www.ultimedia.com/default/presentation/politiqueconfidentialite",optoutDigiteka:"Privacy",afterMessageSendOkMessage:"El video ha sido reportado",labelEmbedCode:"Código de inserción",textButtonCopyCode:"Copiar código",headerRecommandation:"Descubre más vídeo",MEDIA_ERR_ABORTED:"The video download was cancelled",MEDIA_ERR_NETWORK:"Se ha perdido la conexión al vídeo. Compruebe si su equipo está conectado a internet",MEDIA_ERR_DECODE:"El vídeo está dañado o tiene un formato no reproducible en su navegador",MEDIA_ERR_SRC_NOT_SUPPORTED:"Este vídeo no está disponible o es incompatible con este navegador",MEDIA_ERR_ENCRYPTED:"El video que intentas mirar está encriptado y no sabemos cómo descifrarlo",MEDIA_ERR_UNKNOWN:"Ha surgido un problema imprevisto. Vuelva a intentarlo más tarde",ERR_SORRY:"Sorry for the interruption :(",PLAYER_ERR_NO_SRC:"No hay ningún vídeo cargado",PLAYER_ERR_TIMEOUT:"No se ha podido descargar el vídeo",PLAYER_ERR_DOMAIN_RESTRICTED:"Este vídeo tiene restricciones y no puede reproducirse en su dominio actual",PLAYER_ERR_IP_RESTRICTED:"Este vídeo tiene restricciones y no puede reproducirse en su dirección IP actual",PLAYER_ERR_GEO_RESTRICTED:"Este vídeo tiene restricciones y no puede reproducirse en su región geográfica actual",LIVE_STOPPED:"Live is stopped.",ERR_RETRY:"Please refresh your browser.",flashMessage:"Si está utilizando un navegador antiguo, intente actualizar o instalar Flash.",labelTechnicalMessage:"Detalles técnicos",labelCodeErrorMessage:"Código de error",textLabelCopiedEmbed:"Copiado",textLabelSharing:"Comparte el vídeo",controlTextBtnMore:"Más opciones",labelRecommendation:"Recomendaciones",labelShare:"Compartir",controlTextBtnRewind:"Rebobinar 10 segundos",controlTextBtnForward:"Adelante 10 secondos",textConstentCmp:"Este player de video DIGITEKA utiliza cookies para transmitir contenido de video y publicidad personalizada de acuerdo con su perfil, analizar estadísticas de audiencia, rendimiento de anuncios o videos. Al continuar su visita a este sitio o su uso de este player, usted acepta el uso de cookies por parte de Digiteka y %1, en este sitio y en todos los sitios que visita diseminando el player DIGITEKA. Para obtener más información o retirar su consentimiento, visite nuestra %2.",textConstentCmpMobile:"DIGITEKA utiliza cookies para difundir contenido de video y publicidad personalizada, así como para llevar a cabo estadísticas. Mientras continúa su navegación, acepta el uso de cookies por parte de DIGITEKA y %1, en este sitio y en cualquier otro sitio visitado que transmita el jugador DIGITEKA Puede retirar su consentimiento u obtener más información sobre nuestra %2",labelLinkPolicy:"política de privacidad",labelLinkVendors:"sus socios",labelButtonConsentCmp:"Acepto estos propósitos",labelLinkSettingsCmp:"Ajustes",labelOptOutCookieButton:"Para eliminar las cookies relacionadas con Digiteka de su navegador",labelOptOutDatasButton:"Para administrar sus datos personales y ejercer sus derechos, consulte nuestra %1",optOutButton:"Haga clic aquí",labelOptOut:"Administre sus datos personales",messageCookieEmptyOK:"Sus datos personales han sido eliminados",messageCookieEmptyKO:"Un problema ha ocurrido. Por favor, intente de nuevo.",labelLinkCloseButton:"Cerrar",textAfterConstentCmp:"Ahora puedes cerrar este banner.",labelReportButton:"Reporta este video",duringAdsMessage:"En unos momentos, tu video ...",resumePlayAfterAdMessage:"Resume playback"}},3516:module=>{module.exports={beforeSkipAdMessageSing:"Votre vidéo dans xx seconde",beforeSkipAdMessagePlur:"Votre vidéo dans xx secondes",beforeSkipAdShortMessageSing:"Votre vidéo dans xx sec",beforeSkipAdShortMessagePlur:"Votre vidéo dans xx sec",beforeFirstAdShortMessageSing:"Pub 1/2 : Prochaine pub dans xx sec",beforeFirstAdShortMessagePlur:"Pub 1/2 : Prochaine pub dans xx sec",beforeSecondAdShortMessageSing:"Pub 2/2 : Votre vidéo dans xx sec",beforeSecondAdShortMessagePlur:"Pub 2/2 : Votre vidéo dans xx sec",beforePreviewAdMessage:"La suite de votre vidéo après la pub...",afterSkipAdMessage:"Voir votre vidéo maintenant",headerOverlayAdPreview:"Après la pub",headerOverlayPreview:"À suivre",linkDigitekaSite:"https://digiteka.com/",linkOptoutDigiteka:"https://www.ultimedia.com/default/presentation/politiqueconfidentialite",optoutDigiteka:"Données personnelles",afterMessageSendOkMessage:"La vidéo a été signalée",labelEmbedCode:"Intégrer la vidéo",textButtonCopyCode:"Copier le code",headerRecommandation:"Découvrez plus de vidéos",MEDIA_ERR_ABORTED:"Le téléchargement de la vidéo a été annulé.",MEDIA_ERR_NETWORK:"La connexion à la vidéo a été perdue, vérifiez que vous êtes bien connecté à Internet.",MEDIA_ERR_DECODE:"La vidéo est de mauvaise qualité ou dans un format incompatible avec votre navigateur.",MEDIA_ERR_SRC_NOT_SUPPORTED:"Cette vidéo est indisponible ou non prise en charge par ce navigateur.",MEDIA_ERR_ENCRYPTED:"La vidéo que vous essayez de regarder est cryptée et nous ne pouvons pas la décrypter.",MEDIA_ERR_UNKNOWN:"Un problème inattendu s’est produit, veuillez réessayer ultérieurement.",ERR_SORRY:"Désolé pour l'interruption :(",PLAYER_ERR_NO_SRC:"Aucune vidéo n'a été chargée",PLAYER_ERR_TIMEOUT:"Impossible de télécharger la vidéo",PLAYER_ERR_DOMAIN_RESTRICTED:"La lecture de cette vidéo est restreinte sur votre domaine actuel",PLAYER_ERR_IP_RESTRICTED:"Cette vidéo est restreinte sur votre adresse IP actuelle",PLAYER_ERR_GEO_RESTRICTED:"La lecture de cette vidéo est restreinte dans votre région géographique",LIVE_STOPPED:"Le live est arrêté.",ERR_RETRY:"Veuillez recharger votre navigateur.",flashMessage:"Si vous utilisez un navigateur plus ancien, essayez de le mettre à jour ou d’installer Flash",labelTechnicalMessage:"Détails techniques",labelCodeErrorMessage:"Code d'erreur",textLabelCopiedEmbed:"Embed copié",textLabelSharing:"Partager la vidéo",controlTextBtnMore:"Plus d'options",labelRecommendation:"Recommandations",labelShare:"Partage",controlTextBtnRewind:"Reculer de 10 secondes",controlTextBtnForward:"Avancer de 10 secondes",textConstentCmp:"Ce player vidéos DIGITEKA utilise des cookies pour diffuser du contenu vidéo et des publicités personnalisés selon votre profil, analyser les statistiques d’audience et de performance publicitaires ou des vidéos. En continuant votre navigation sur ce site ou votre utilisation de ce player, vous acceptez l'utilisation de cookies par DIGITEKA et %1, sur ce site et sur tout autre site diffusant le player DIGITEKA. Vous pouvez retirer votre consentement ou en savoir plus sur notre %2.",textConstentCmpMobile:"DIGITEKA utilise des cookies pour diffuser du contenu vidéo et des publicités personnalisés, ainsi que réaliser des statistiques. En continuant votre navigation, vous acceptez l'utilisation de cookies par DIGITEKA et %1, sur ce site et sur tout autre site visité diffusant le player DIGITEKA. Vous pouvez retirer votre consentement ou en savoir plus sur notre %2.",labelLinkVendors:"ses partenaires",labelLinkPolicy:"politique de confidentialité",labelButtonConsentCmp:"J'accepte ces finalités",labelLinkSettingsCmp:"Je paramètre",labelOptOutCookieButton:"Pour supprimer les cookies de DIGITEKA de votre navigateur ",labelOptOutDatasButton:"Pour gérer vos données personnelles et exercer vos droits, rendez-vous sur notre %1",optOutButton:"cliquez ici",labelOptOut:"Gérer vos données personnelles",messageCookieEmptyOK:"Les cookies liés à Digiteka ont bien été supprimées.",messageCookieEmptyKO:"Un problème est survenu. Veuillez réessayer.",labelLinkCloseButton:"Fermer",textAfterConstentCmp:"Vous pouvez désormais fermer ce bandeau.",labelReportButton:"Signaler cette vidéo",duringAdsMessage:"Dans quelques instants, votre vidéo...",resumePlayAfterAdMessage:"Reprendre la lecture"}},5196:module=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Plugin=videojs.getPlugin("plugin"),ContextMenu=function(){var subClass=ContextMenu,superClass=Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass);var staticProps,_super=_createSuper(ContextMenu);function ContextMenu(player,options){var _this;if(!(this instanceof ContextMenu))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).items=options.content,_this.contextMenuClassName="context-menu",_this.contextMenuItemClassName="context-menu__item",_this.contextMenuLinkClassName="context-menu__link",_this.contextMenuActive="context-menu--active",_this.taskItemClassName="video-js",_this.taskItemInContext,_this.clickCoords,_this.clickCoordsX,_this.clickCoordsY,_this.menu,_this.menuItems,_this.menuLink,_this.menuState=0,_this.menuWidth,_this.menuHeight,_this.windowWidth,_this.windowHeight,player.one("ready",function(){this.attachContenxtMenuToPlayer()}.bind(_assertThisInitialized(_this))),_this}return subClass=ContextMenu,(superClass=[{key:"init",value:function(){this.contextListener(),this.clickListener(),this.keyupListener(),this.resizeListener()}},{key:"attachContenxtMenuToPlayer",value:function(){this.init()}},{key:"createMenu",value:function(){this.menu=document.createElement("ul"),this.menu.setAttribute("id",this.contextMenuClassName),this.menu.setAttribute("class",this.contextMenuClassName);var player=this;this.items.forEach(function(item){player.menuItems=document.createElement("li"),player.menuItems.setAttribute("class",player.contextMenuItemClassName),item.href?(player.menuLink=document.createElement("a"),player.menuLink.setAttribute("href",item.href),player.menuLink.setAttribute("target","_blank"),player.menuLink.setAttribute("class",player.contextMenuLinkClassName),player.menuLink.innerHTML=item.label,player.menuItems.appendChild(player.menuLink)):player.menuItems.innerHTML=item.label,player.menu.appendChild(player.menuItems)}),this.player.el_.appendChild(this.menu)}},{key:"distroyMenu",value:function(){this.menu.parentNode.removeChild(this.menu)}},{key:"clickInsideElement",value:function(e,className){var el=e.srcElement||e.target;if(el.classList.contains(className))return el;for(;el=el.parentNode;)if(el.classList&&el.classList.contains(className))return el;return!1}},{key:"getPosition",value:function(e){var posx=0,posy=0;return(e=e||window.event).pageX||e.pageY?(posx=e.pageX,posy=e.pageY):(e.clientX||e.clientY)&&(posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:posx,y:posy}}},{key:"contextListener",value:function(){var player=this;document.addEventListener("contextmenu",function(e){player.taskItemInContext=player.clickInsideElement(e,player.taskItemClassName),player.taskItemInContext?(e.preventDefault(),player.toggleMenuOn(),player.positionMenu(e)):(player.taskItemInContext=null,player.toggleMenuOff())})}},{key:"clickListener",value:function(){var player=this;document.addEventListener("click",function(e){var clickeElIsLink=player.clickInsideElement(e,player.contextMenuLinkClassName);clickeElIsLink?player.menuItemListener(clickeElIsLink):1===(e.which||e.button)&&player.toggleMenuOff()})}},{key:"keyupListener",value:function(){var player=this;window.onkeyup=function(e){27===e.keyCode&&player.toggleMenuOff()}}},{key:"resizeListener",value:function(){var payer=this;window.onresize=function(e){payer.toggleMenuOff()}}},{key:"toggleMenuOn",value:function(){1!==this.menuState&&(this.createMenu(),this.menuState=1,this.menu.classList.add(this.contextMenuActive))}},{key:"toggleMenuOff",value:function(){0!==this.menuState&&(this.distroyMenu(),this.menuState=0,this.menu.classList.remove(this.contextMenuActive))}},{key:"positionMenu",value:function(e){this.clickCoords=this.getPosition(e),this.clickCoordsX=this.clickCoords.x,this.clickCoordsY=this.clickCoords.y,this.menuWidth=this.menu.offsetWidth+4,this.menuHeight=this.menu.offsetHeight+4,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.windowWidth-this.clickCoordsX<this.menuWidth?this.menu.style.left=this.windowWidth-this.menuWidth+"px":this.menu.style.left=this.clickCoordsX+"px",this.windowHeight-this.clickCoordsY<this.menuHeight?this.menu.style.top=this.windowHeight-this.menuHeight+"px":this.menu.style.top=this.clickCoordsY+"px"}},{key:"menuItemListener",value:function(link){this.toggleMenuOff()}}])&&_defineProperties(subClass.prototype,superClass),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),ContextMenu}();module.exports=ContextMenu},7005:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Plugin=videojs.getPlugin("plugin"),translator=__webpack_require__(1502),__webpack_require__=function(){var subClass=ExternalInterractionButton,superClass=Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass);var staticProps,_super=_createSuper(ExternalInterractionButton);function ExternalInterractionButton(player,options){var _this;if(!(this instanceof ExternalInterractionButton))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).buttons=[],_this.embedData=options.embedData(),_this.isIOS=!!navigator.userAgent.match(/ipad|ipod|iphone/i),_this.isDtkSkin="dtkplayer"==options.skin,_this.isLive=void 0!==options.isLive.live,player.on("dtk-ready",function(){0<this.buttons.length&&(this.buttons=[],this.embedData=options.embedData()),this.modalSharing&&player.removeChild(this.modalSharing),options.initInteractions.bind(this)(player,player.interactions),this.share(player)}.bind(_assertThisInitialized(_this))),_this}return subClass=ExternalInterractionButton,(superClass=[{key:"share",value:function(player){this.buttons.length<=0||(this.createModal(player),this.addButtonToPlayer(player),this.initListenerBtn(player))}},{key:"addButtonToPlayer",value:function(player){var dtk_top_action_el,instanceModal=this.modalSharing,ButtonComponent=videojs.getComponent("Button"),SharingButton=videojs.extend(ButtonComponent,{constructor:function(videojs,player,options){ButtonComponent.apply(this,arguments),this.label=translator.translate("labelShare"),ButtonComponent.call(this,videojs),this.controlText(this.label),this.on("click",this.onClick),this.on("touchstart",this.onClick)},buildCSSClass:function(){return"vjs-share-button vjs-share-control vjs-control vjs-button"},onClick:function(){instanceModal.open()}}),QualitySelectorComponent=(videojs.registerComponent("SharingButton",SharingButton),videojs.getComponent("QualitySelector"));this.isDtkSkin?((dtk_top_action_el=document.getElementById("dtk_actions_top"))&&player.el_.removeChild(dtk_top_action_el),this.instanceSharingButton=new SharingButton(player,{}),this.instanceQualitySelector=new QualitySelectorComponent(player,{}),(dtk_top_action_el=document.createElement("div")).setAttribute("id","dtk_actions_top"),this.isLive&&((QualitySelectorComponent=document.createElement("div")).setAttribute("id","dtk_top_action_live"),QualitySelectorComponent.classList.add("dtk_label_live"),QualitySelectorComponent.innerHTML="LIVE",dtk_top_action_el.appendChild(QualitySelectorComponent)),dtk_top_action_el.appendChild(this.instanceSharingButton.el_),dtk_top_action_el.appendChild(this.instanceQualitySelector.el_),player.el_.appendChild(dtk_top_action_el)):(this.instanceSharingButton&&player.controlBar.el_.removeChild(this.instanceSharingButton.el_),this.instanceSharingButton=new SharingButton(player,{}),player.controlBar.el_.insertBefore(this.instanceSharingButton.el_,player.controlBar.getChild("fullscreenToggle").el_))}},{key:"addButton",value:function(label,icon,action){this.buttons.push({label:label,icon:icon,action:action})}},{key:"createModal",value:function(player){var content=this.createContentModal(),ModalComponent=videojs.getComponent("ModalDialog"),instanceModal=(this.modalSharing=new ModalComponent(player,{content:content,temporary:!1}),this.modalSharing.setAttribute("id","um-modal-sharing"),player.addChild(this.modalSharing),this.modalSharing);this.modalSharing.el().addEventListener("click",function(event){instanceModal.close(),event.preventDefault(),event.stopPropagation()})}},{key:"createContentModal",value:function(){var mdl_wrap_sharing=document.createElement("div"),mdl_descr_sharing=(mdl_wrap_sharing.setAttribute("id","wrap_sharing"),document.createElement("p")),mdl_descr_sharing=(mdl_descr_sharing.setAttribute("id","descr_sharing"),mdl_descr_sharing.innerHTML="description",document.createElement("div")),mdl_label_sharing=(mdl_descr_sharing.setAttribute("id","list-btn-share"),mdl_descr_sharing.innerHTML=this.createButtons().join(""),document.createElement("label")),yPosition=(mdl_label_sharing.setAttribute("id","label_embed"),mdl_label_sharing.innerHTML=translator.translate("textLabelSharing"),this.mdl_label_copied_embed=document.createElement("span"),this.mdl_label_copied_embed.setAttribute("id","label_copied_embed"),this.mdl_label_copied_embed.innerHTML=translator.translate("textLabelCopiedEmbed"),this.mdl_text_embed=document.createElement("textarea"),this.mdl_text_embed.setAttribute("id","text_embed"),window.pageYOffset||document.documentElement.scrollTop);return this.mdl_text_embed.style.top="".concat(yPosition,"px"),this.mdl_text_embed.textContent='<iframe src="'+this.embedData.new_path+"/deliver/"+this.embedData.topic+"/iframe/mdtk/"+this.embedData.mdtk+"/"+this.embedData.src+"/"+this.embedData.video+"/zone/"+this.embedData.zone+'/showtitle/1/" frameborder="0" scrolling="no" marginwidth="0" marginheight="0" hspace="0" vspace="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true"',null!=this.embedData.width&&null!=this.embedData.height&&(this.mdl_text_embed.textContent+='width="'+this.embedData.width+'" height="'+this.embedData.height+'"'),this.mdl_text_embed.textContent+=' allow="autoplay; fullscreen"',this.mdl_text_embed.textContent+="></iframe>",this.isIOS||(this.mdl_text_embed.setAttribute("readonly","true"),this.mdl_text_embed.setAttribute("contenteditable","true")),mdl_wrap_sharing.appendChild(mdl_label_sharing),mdl_wrap_sharing.appendChild(mdl_descr_sharing),mdl_wrap_sharing.appendChild(this.mdl_label_copied_embed),mdl_wrap_sharing.appendChild(this.mdl_text_embed),mdl_wrap_sharing}},{key:"createButtons",value:function(){var itemButton=[];return this.buttons.forEach(function(button){itemButton.push('<button class="vjs-share__social vjs-share__social_'.concat(button.label," vjs-icon-").concat(button.label,'" data-label="').concat(button.label,'" data-action="').concat(button.action,'" title="').concat(button.label,'"><span>').concat(button.label,'</span> <span class="vjs-control-text">').concat(button.label,"</span></button>"))}),itemButton}},{key:"initListenerBtn",value:function(player){var instanceIframeToCopy=this.mdl_text_embed,instanceTextIframeCopied=this.mdl_label_copied_embed,instanceClass=this;Array.prototype.slice.call(this.modalSharing.content().querySelectorAll(".vjs-share__social")).forEach(function(btn){btn.addEventListener("click",function(e){var editable,readOnly,range,sel,action=e.currentTarget.getAttribute("data-action"),label=e.currentTarget.getAttribute("data-label");if(player.trigger("interraction-click",{label:label}),"embed"!==label)return window.open(action),e.preventDefault(),e.stopPropagation(),!1;try{instanceClass.isIOS?(editable=instanceIframeToCopy.contentEditable,readOnly=instanceIframeToCopy.readOnly,instanceIframeToCopy.contentEditable=!0,instanceIframeToCopy.readOnly=!0,(range=document.createRange()).selectNodeContents(instanceIframeToCopy),(sel=window.getSelection()).removeAllRanges(),sel.addRange(range),instanceIframeToCopy.select(),instanceIframeToCopy.setSelectionRange(0,999999),instanceIframeToCopy.contentEditable=editable,instanceIframeToCopy.readOnly=readOnly,document.queryCommandSupported("copy")?document.execCommand("copy")?console.log(el,"Copied to clipboard."):console.log(el,"Press CTRL+C to copy"):navigator.userAgent.match(/ipad|ipod|iphone|android|silk/i)||console.log(el,"Press CTRL+C to copy")):instanceIframeToCopy.select()}catch(err){}instanceTextIframeCopied.classList.add("copied"),document.execCommand("copy");var temp=setInterval(function(){instanceTextIframeCopied.classList.remove("copied"),clearInterval(temp)},1e3);return e.preventDefault(),e.stopPropagation(),!1})})}}])&&_defineProperties(subClass.prototype,superClass),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),ExternalInterractionButton}();module.exports=__webpack_require__},9835:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Plugin=videojs.getPlugin("plugin"),translator=__webpack_require__(1502),conf=__webpack_require__(2802),__webpack_require__=function(){var subClass=OptOutComponent,superClass=Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass);var staticProps,_super=_createSuper(OptOutComponent);function OptOutComponent(player,options){var _this;if(!(this instanceof OptOutComponent))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).player=player,_this.cname="um_cmp_consent",_this.isDtkSkin="dtkplayer"==options.skin,player.one("ready",function(){this.isDtkSkin||(this.modalOptOut&&player.removeChild(this.modalOptOut),this.init())}.bind(_assertThisInitialized(_this))),_this}return subClass=OptOutComponent,(superClass=[{key:"init",value:function(){this.createModal(),this.createButton(),this.initListenerBtn()}},{key:"createModal",value:function(){var content=this.createContentModal(),ModalComponent=videojs.getComponent("ModalDialog"),instanceModal=(this.modalOptOut=new ModalComponent(this.player,{content:content,temporary:!1}),this.modalOptOut.setAttribute("id","um-modal-optout"),this.player.addChild(this.modalOptOut),this.modalOptOut);this.modalOptOut.el().addEventListener("click",function(event){instanceModal.close(),event.preventDefault(),event.stopPropagation()})}},{key:"createContentModal",value:function(){var mdl_wrap_optout=document.createElement("div"),mdl_cookie_span=(mdl_wrap_optout.setAttribute("id","wrap_optout"),this.mdl_indications=document.createElement("div"),this.mdl_indications.setAttribute("id","indications"),this.mdl_delete_cookies=document.createElement("div"),this.mdl_delete_cookies.setAttribute("class","delete_cookies"),document.createElement("span")),mdl_cookie_button=(mdl_cookie_span.setAttribute("class","optout_span"),mdl_cookie_span.innerHTML=translator.translate("labelOptOutCookieButton"),document.createElement("button")),mdl_cookie_span=(mdl_cookie_button.setAttribute("class","optout_button"),mdl_cookie_button.setAttribute("id","optout_cookie_button"),mdl_cookie_button.innerHTML=translator.translate("optOutButton"),this.mdl_delete_cookies.appendChild(mdl_cookie_span),this.mdl_delete_cookies.appendChild(mdl_cookie_button),document.createElement("div")),mdl_cookie_button=document.createElement("span");return mdl_cookie_button.setAttribute("class","optout_span"),mdl_cookie_button.innerHTML=translator.translate("labelOptOutDatasButton").replace("%1",'<a href="https://www.ultimedia.com/default/presentation/politiqueconfidentialite" target="_blank" id="policy_button">'+translator.translate("labelLinkPolicy")+"</a>"),mdl_cookie_span.appendChild(mdl_cookie_button),this.mdl_indications.appendChild(this.mdl_delete_cookies),this.mdl_indications.appendChild(mdl_cookie_span),this.mdl_message=document.createElement("div"),this.mdl_message.setAttribute("id","alert_cookies_state"),mdl_wrap_optout.appendChild(this.mdl_indications),mdl_wrap_optout.appendChild(this.mdl_message),mdl_wrap_optout}},{key:"createButton",value:function(){var instanceClass=this,instanceModal=instanceClass.modalOptOut,ButtonComponent=videojs.getComponent("Button"),OptOutButton=videojs.extend(ButtonComponent,{constructor:function(videojs){ButtonComponent.apply(this,arguments),this.label=translator.translate("labelOptOut"),ButtonComponent.call(this,videojs),this.controlText(this.label),this.on("click",this.onClick),this.on("touchstart",this.onClick)},buildCSSClass:function(){return"vjs-optout-button vjs-optout-control vjs-control vjs-button"},onClick:function(){instanceClass.isCookie(instanceClass.cname)?instanceClass.mdl_delete_cookies.style.display="block":instanceClass.mdl_delete_cookies.style.display="none",instanceModal.open()}});videojs.registerComponent("OptOutButton",OptOutButton),this.instanceOptOutButton&&instanceClass.player.controlBar.el_.removeChild(this.instanceOptOutButton.el_),this.instanceOptOutButton=new OptOutButton(instanceClass.player),instanceClass.player.controlBar.el_.insertBefore(this.instanceOptOutButton.el_,instanceClass.player.controlBar.getChild("fullscreenToggle").el_.nextSibling)}},{key:"initListenerBtn",value:function(){var instanceClass=this;this.modalOptOut.content().querySelector("#optout_cookie_button").addEventListener("click",function(e){instanceClass.deleteCookies(),e.preventDefault(),e.stopPropagation()}),this.modalOptOut.content().querySelector("#policy_button").addEventListener("click",function(e){window.open("//www.ultimedia.com/default/presentation/politiqueconfidentialite#optout","_blank")})}},{key:"deleteCookies",value:function(){var indications=this.mdl_indications,alert=this.mdl_message;this.sendDeleteCookies(),this.animation(indications,alert)}},{key:"animation",value:function(indications,alert){indications.style.transition="opacity 0.5s",indications.style.opacity="0";var text=translator.translate("messageCookieEmptyOK");indications.addEventListener("transitionend",this.transitionend.bind(this,indications,alert,text),!1),alert.addEventListener("animationend",this.animationend.bind(this,alert,indications),!1)}},{key:"transitionend",value:function(indications,alert,text){indications.style.height="0",alert.innerHTML=text,alert.classList.add("animated","valid")}},{key:"animationend",value:function(alert,indications){this.mdl_delete_cookies.style.display="none",alert.classList.remove("animated"),indications.style.transition="none",indications.style.opacity="1",indications.style.height="auto",indications.removeEventListener("transitionend",this.transitionend.bind(this),!1),alert.removeEventListener("animationend",this.animationend.bind(this),!1)}},{key:"sendDeleteCookies",value:function(){var path=void 0!==conf.path?conf.path:"//www.ultimedia.com",request=new XMLHttpRequest;request.open("POST",path+"/default/presentation/deletecookies",!0),request.send(null)}},{key:"isCookie",value:function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(name))return!0}return!1}}])&&_defineProperties(subClass.prototype,superClass),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),OptOutComponent}();module.exports=__webpack_require__},7302:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Plugin=videojs.getPlugin("plugin"),translator=__webpack_require__(1502),__webpack_require__=function(){var subClass=ResponsiveUtils,superClass=Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass);var staticProps,_super=_createSuper(ResponsiveUtils);function ResponsiveUtils(player,options){var _this;if(!(this instanceof ResponsiveUtils))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).isDtkSkin="dtkplayer"==options.skin,player.on("ready",function(e){this.setClass(player),this.isDtkSkin||this.initMoreButton(player),this.isChromeLess(player)}.bind(_assertThisInitialized(_this))),player.on("playerresize",function(e){this.setClass(player),player.controlBar.el().classList.contains("is-open")&&this.switchMoreButton(player),this.isChromeLess(player)}.bind(_assertThisInitialized(_this))),_this}return subClass=ResponsiveUtils,(superClass=[{key:"getElementOuterWidth",value:function(el){var width=el.offsetWidth,el=getComputedStyle(el);return width+=parseInt(el.marginLeft,10)+parseInt(el.marginRight,10)}},{key:"getElementOuterHeight",value:function(el){var height=el.offsetHeight,el=getComputedStyle(el);return height+=parseInt(el.marginTop,10)+parseInt(el.marginBottom,10)}},{key:"getElementWidth",value:function(el){return parseInt(getComputedStyle(el).width,10)}},{key:"isElementVisible",value:function(el){return 0<el.offsetWidth||0<el.offsetHeight}},{key:"getPlayerWidth",value:function(player){return this.getElementWidth(player)}},{key:"getPlayerOuterWidth",value:function(el){return this.getElementOuterWidth(el)}},{key:"getPlayerOuterHeight",value:function(el){return this.getElementOuterHeight(el)}},{key:"setClass",value:function(el){var currentElementWidth=this.getPlayerOuterWidth(el.el_),currentElementHeight=this.getPlayerOuterHeight(el.el_);switch(void 0===el.currentWidthClass&&(el.currentWidthClass=""),void 0===el.currentHeightClass&&(el.currentHeightClass=""),!0){case currentElementWidth<=250:var newWidthClass="vjs-layout-tiny";break;case currentElementWidth<=299:newWidthClass="vjs-layout-m-md";break;case currentElementWidth<=420:newWidthClass="vjs-layout-m-lg";break;case currentElementWidth<=575:newWidthClass="vjs-layout-xs";break;case currentElementWidth<=767:newWidthClass="vjs-layout-sm";break;case currentElementWidth<=991:newWidthClass="vjs-layout-md";break;case currentElementWidth<=1199:newWidthClass="vjs-layout-lg";break;default:newWidthClass="vjs-layout-xl"}switch(!0){case currentElementHeight<=169:var newHeightClass="vjs-layout-h-tiny";break;case currentElementHeight<=249:newHeightClass="vjs-layout-h-m-md";break;case currentElementHeight<=330:newHeightClass="vjs-layout-h-m-lg";break;case currentElementHeight<=420:newHeightClass="vjs-layout-h-xs";break;case currentElementHeight<=500:newHeightClass="vjs-layout-h-sm";break;case currentElementHeight<=768:newHeightClass="vjs-layout-h-md";break;case currentElementHeight<=1e3:newHeightClass="vjs-layout-h-lg";break;default:newHeightClass="vjs-layout-h-xl"}el.currentWidthClass!=newWidthClass&&(""!=el.currentWidthClass&&el.removeClass(el.currentWidthClass),el.addClass(newWidthClass),el.currentWidthClass=newWidthClass),el.currentHeightClass!=newHeightClass&&(""!=el.currentHeightClass&&el.removeClass(el.currentHeightClass),el.addClass(newHeightClass),el.currentHeightClass=newHeightClass)}},{key:"initMoreButton",value:function(player){var instanceClass,ButtonComponent,count=0;player.el().querySelector(".vjs-subs-caps-button")&&(player.el().querySelector(".vjs-subs-caps-button").classList.contains("vjs-hidden")||(count+=1)),player.el().querySelector(".vjs-share-button")&&(count+=1),player.el().querySelector(".vjs-resolution-button")&&(count+=1),count<=1?player.addClass("vjs-no-options"):(instanceClass=this,ButtonComponent=videojs.getComponent("Button"),count=videojs.extend(ButtonComponent,{constructor:function(videojs,options){ButtonComponent.apply(this,arguments),this.label=translator.translate("controlTextBtnMore"),ButtonComponent.call(this,videojs),this.controlText(this.label),this.on("click",this.onClick),this.on("touchstart",this.onClick)},buildCSSClass:function(){return"vjs-more-button vjs-more-control vjs-control vjs-button"},onClick:function(){instanceClass.switchMoreButton(player)}}),videojs.registerComponent("MoreButton",count),this.instanceMoreButton&&player.controlBar.el_.removeChild(this.instanceMoreButton.el_),this.instanceMoreButton=new count(player,{}),player.hasClass("um")?player.controlBar.el_.insertBefore(this.instanceMoreButton.el_,player.controlBar.getChild("durationDisplay").el_.nextSibling):player.controlBar.el_.insertBefore(this.instanceMoreButton.el_,player.controlBar.getChild("volumePanel").el_.nextSibling))}},{key:"switchMoreButton",value:function(player){player.controlBar.el().classList.toggle("is-open"),player.controlBar.el().querySelector(".vjs-more-button").classList.contains("vjs-more-control")?(player.controlBar.el().querySelector(".vjs-more-button").classList.remove("vjs-more-control"),player.controlBar.el().querySelector(".vjs-more-button").classList.add("vjs-less-control")):player.controlBar.el().querySelector(".vjs-more-button").classList.contains("vjs-less-control")&&(player.controlBar.el().querySelector(".vjs-more-button").classList.remove("vjs-less-control"),player.controlBar.el().querySelector(".vjs-more-button").classList.add("vjs-more-control"))}},{key:"isChromeLess",value:function(player){this.getPlayerOuterWidth(player.el_)<=150?player.controlBar.hide():player.controlBar.show()}}])&&_defineProperties(subClass.prototype,superClass),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),ResponsiveUtils}();module.exports=__webpack_require__},391:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Plugin=videojs.getPlugin("plugin"),translator=__webpack_require__(1502),__webpack_require__=function(){var subClass=VerticalUtils,superClass=Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass);var staticProps,_super=_createSuper(VerticalUtils);function VerticalUtils(player,options){var _this;if(!(this instanceof VerticalUtils))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).player=player,_this.options=options,player.one("ready",function(){this.options.video_format==this.options.VIDEO_FORMAT_VERTICAL&&"um"==this.options.skin&&this.init()}.bind(_assertThisInitialized(_this))),_this.tapped=!1,_this.timeout,_this.lastTap=0,_this.DEFAULT_DURATION_REWIND_FORWARD=10,_this}return subClass=VerticalUtils,(superClass=[{key:"init",value:function(){this.creatNav()}},{key:"creatNav",value:function(){var instanceClass=this,ButtonComponent=videojs.getComponent("Button"),RewindButton=videojs.extend(ButtonComponent,{constructor:function(videojs,options){ButtonComponent.apply(this,arguments),this.label=translator.translate("controlTextBtnRewind"),this.action="rewind",ButtonComponent.call(this,videojs),this.controlText(this.label),this.on("click",this.onClick),this.on("touchend",this.onDoubleTap)},buildCSSClass:function(){return"vjs-rewind-button vjs-rewind-control vjs-control vjs-button"},onClick:function(e){instanceClass.setEvent(this.action,e)},onDoubleTap:function(e){instanceClass.setEventMobile(this.action,e)}}),RewindButton=(videojs.registerComponent("RewindButton",RewindButton),instanceClass.player.addChild(new RewindButton(instanceClass.player)),videojs.extend(ButtonComponent,{constructor:function(videojs,options){ButtonComponent.apply(this,arguments),this.label=translator.translate("controlTextBtnForward"),this.action="forward",ButtonComponent.call(this,videojs),this.controlText(this.label),this.on("click",this.onClick),this.on("touchend",this.onDoubleTap)},buildCSSClass:function(){return"vjs-forward-button vjs-forward-control vjs-control vjs-button"},onClick:function(e){instanceClass.setEvent(this.action,e)},onDoubleTap:function(e){instanceClass.setEventMobile(this.action,e)}}));videojs.registerComponent("ForwardButton",RewindButton),instanceClass.player.addChild(new RewindButton(instanceClass.player))}},{key:"setEvent",value:function(action){this.player.trigger(action,this.DEFAULT_DURATION_REWIND_FORWARD)}},{key:"setEventMobile",value:function(action,e){var currentTime=(new Date).getTime(),tapLength=currentTime-this.lastTap;clearTimeout(this.timeout),tapLength<700&&0<tapLength?(this.setEvent(action),e.preventDefault()):this.timeout=setTimeout(function(){clearTimeout(this.timeout)},700),this.lastTap=currentTime}}])&&_defineProperties(subClass.prototype,superClass),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),VerticalUtils}();module.exports=__webpack_require__},7940:module=>{module.exports={decode:function(data){var o1,o2,h3,h4,bits,b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,ac=0,tmp_arr=[];if(!data)return data;for(data+="";o1=(bits=b64.indexOf(data.charAt(i++))<<18|b64.indexOf(data.charAt(i++))<<12|(h3=b64.indexOf(data.charAt(i++)))<<6|(h4=b64.indexOf(data.charAt(i++))))>>16&255,o2=bits>>8&255,bits=255&bits,tmp_arr[ac++]=64==h3?String.fromCharCode(o1):64==h4?String.fromCharCode(o1,o2):String.fromCharCode(o1,o2,bits),i<data.length;);return tmp_arr.join("").replace(/\0+$/,"")}}},8095:module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var PostMessageSender=function(){function PostMessageSender(target){if(!(this instanceof PostMessageSender))throw new TypeError("Cannot call a class as a function");this.target=target}var Constructor,protoProps,staticProps;return Constructor=PostMessageSender,(protoProps=[{key:"send",value:function(message,targetOrigin,transfer){null!=transfer?this.target.postMessage(message,targetOrigin,transfer):this.target.postMessage(message,targetOrigin)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PostMessageSender}();module.exports=PostMessageSender},5207:module=>{module.exports=function(q){var c,k={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(c){try{this.sendUrlRequest(["//pixel.adsafeprotected.com/mon?anId=10173&campId=",encodeURIComponent(l.getPartnerId()),"&pubId=",encodeURIComponent("vans-js_"+c)].join(""))}catch(b){h.report("smp",b)}},sendUrlRequest:function(c,b){var g,a;if(c){g=this.getWindow();try{a=new g.XMLHttpRequest,b&&(a.onreadystatechange=b),a.open("GET",c),a.send()}catch(e){}}},getWindow:function(){return m.getWin()},getDocument:function(){return m.getDoc()},generateUID:function(){var c,b="";try{for(c=0;c<8;c++)b=[b,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(g){}return b},noop:function(){}},h=(c={},{report:function(b,g){if(!c[b])try{c[b]=!0,k.sendUrlRequest(["//pixel.adsafeprotected.com/jsdiagnostic?code:vans-js_",encodeURIComponent(l.getPartnerId()),"_",b,"&err:",encodeURIComponent(g.message)].join(""))}catch(a){}}}),n=function(){function g(e){return e==a()&&(b=!0,p.flushUnsentEvents()),b?"jv3":null}var c,b=!1,a=function(){return c=c||k.generateUID()};return{getVideoId:a,setNodeInterface:function(e){var b,c,f=a();try{b="IASid"+f,c="blockAd"+f,e.className+=" integral-vid-"+f,e[c]=k.noop,e[b]=g,e.getVersion=function(){return"3.3.0"}}catch(r){h.report("sni",r)}},isEstablished:function(){return b},resetHandshake:function(){b=!1}}}(),s=function(){function b(){var e=function(_e){return void 0!==_e},a=function(){var a="u";try{e(window.opera)&&e(window.opera.buildNumber)?a="o":e(window.mozInnerScreenY)?a="g":e(window.chrome)&&e(window.chrome.csi)?a="c":e(window.msWriteProfilerMark)&&e(window.crypto)?a="e":e(window.attachEvent)||e(window.msCrypto)?a="i":e(window.WebKitPoint)&&(a="w")}catch(b){}return a}(),b=function(){var c=function(){var a={g:"",q:""};try{a.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(c){var f,d,b=(b=c.message).substring(b.lastIndexOf("<")+1,b.lastIndexOf(">"));(d=e(b))&&(d=!1,e(window.navigator)&&e(window.navigator.userAgent)&&null!==(f=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/))&&2==f.length&&(f=f[1].split("."),3==parseInt(f[0],10)&&parseInt(f[1],10)<=6&&(3!=f.length||parseInt(f[2],10)<=13)&&(d=!0))),d&&(a.g=b)}return a},d={};try{d.a=encodeURIComponent(top.location.href)}catch(g){}try{d.b=encodeURIComponent(parent.location.href)}catch(h){}if(window!=top){try{d.c=encodeURIComponent(parent.document.referrer)}catch(t){}try{d.e=encodeURIComponent(window.document.referrer)}catch(k){}}try{d.d=encodeURIComponent(window.location.href)}catch(p){}try{var n=c();d.g=encodeURIComponent(n.g),d.q=encodeURIComponent(n.q)}catch(l){}var m,d=function(a){var c,d,b={};for(d in a)a.hasOwnProperty(d)&&(c=a[d],e(b[c])?b[c]+=d:b[c]=d);for(d in a={},b)b.hasOwnProperty(d)&&(a[c=b[d]]=d);return a}(d=function(_a){for(var b in _a){var c;_a.hasOwnProperty(b)&&(""!==(c=_a[b])&&"null"!==c&&"undefined"!==c&&null!==c&&e(c)||delete _a[b])}return _a}(d)),c=[];for(m in d)d.hasOwnProperty(m)&&c.push({key:m,val:d[m]});return c.sort(function(a,b){return a.val.length>b.val.length?1:a.val.length<b.val.length?-1:0}),c}();return{br:a,urls:b}}function g(a,b,c){var f=["//pixel.adsafeprotected.com/db2/video/",b,"/",c,"/skeleton.js?videoId=",n.getVideoId()].join("");b=function(a){f=[f,"&adsafe_url=",a.val,"&adsafe_type=",a.key].join("")};try{a.urls.forEach(b),f=[f,"&adsafe_jsinfo=br:",a.br].join("")}catch(g){h.report("bvu",g)}return f}function a(){if(4==this.readyState)if(p.sendPerfSample(40),200==this.status)try{c("failed"===JSON.parse(this.responseText).action?"block":"safe")}catch(a){h.report("ba",a)}else h.report("blk_url_req_err",{message:this.status})}var c;return{init:function(e,d,h){var f=b();p.sendPerfSample(30),e=g(f,e,d),c=h,k.sendUrlRequest(e,a)}}}(),p=function(){function g(a,c){try{b({messageType:a,id:n.getVideoId(),time:k.now(),partner:l.getPartnerId(),eventData:c})}catch(d){h.report("se",d)}}var c=[],b=function(a){if(n.isEstablished())try{k.getWindow().postMessage(JSON.stringify(a),"*")}catch(b){h.report("dm",b)}else try{c.push(a)}catch(d){h.report("cm",d)}};return{sendEvent:g,flushUnsentEvents:function(){try{c.forEach(b)}catch(a){h.report("fue",a)}},sendPerfSample:function(a){g("PerfCheckpoint",{type:"vans",code:a,timestamp:k.now()})}}}(),l=function(){function g(a,c,d){var g,f=k.getDocument();try{(g=f.createElement("script")).src=b(a,c),d.parentNode.appendChild(g)}catch(h){k.sendMonitoringPixel("inj_err")}}var c,b=function(a,_b){var c,g=q||"pixel.adsafeprotected.com";try{c=["//",g,a,"?videoId=",n.getVideoId(),function(a){var b="";return Object.keys(a).forEach(function(c){"advEntityId"!=c&&"pubEntityId"!=c&&"partner"!=c&&(b+="&"+c+"="+a[c])}),b}(_b)].join("")}catch(k){h.report("bsurl",k)}return c};return{initCM:function(a,b){if(!a.partner)throw Error("missing partnerId");m.setWin(b),p.sendPerfSample(20),c=a.partner;try{if(!a.anId)throw Error("missing anId");k.sendMonitoringPixel("cminit"),n.setNodeInterface(b),g("/jsvid",a,b)}catch(d){h.report("icm",d)}},initFW:function(a,b,d){var l;if(!a.partner)throw Error("missing partnerId");m.setWin(b),p.sendPerfSample(20),c=a.partner;try{if(!a.advEntityId||!a.pubEntityId)throw Error("missing client id: advEntityId: "+a.advEntityId+" ,pubEntityId: "+a.pubEntityId);k.sendMonitoringPixel("fwinit"),d&&s.init(a.advEntityId,a.pubEntityId,d),l="/fwjsvid/st/"+a.advEntityId+"/"+a.pubEntityId+"/skeleton.js",n.setNodeInterface(b),g(l,a,b)}catch(f){h.report("ifw",f)}},getPartnerId:function(){return c}}}(),m=function(){var c=window;return{getWin:function(){return c},setWin:function(b){(b=b&&b.ownerDocument)&&b.defaultView?c=b.defaultView:b&&b.parentWindow?c=b.parentWindow:h.report("sc",{message:""})},getDoc:function(){return c.document}}}();return p.sendPerfSample(10),{initFW:l.initFW,initCM:l.initCM,sendEvent:p.sendEvent}}},6533:()=>{window.initMoatTracking=function(b,h,d){if(!1===h.hasOwnProperty("partnerCode"))return!1;var k=document.createElement("script"),f=(d=d||b&&(void 0!==b.O?b.O.parentNode:document.body)||document.body,[]),c={adsManager:b,ids:h,imaSDK:!0,events:[],dispatchEvent:function(a){var b=this.sendEvent,c=this.events;b?(c&&(c.push(a),a=c),b(a)):c.push(a)}},p={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&b){var l,e="_moatApi"+Math.floor(1e8*Math.random());for(l in google.ima.AdEvent.Type){function n(a){if(c.sendEvent){for(a=f.length-1;0<=a;a--)b.removeEventListener(f[a].type,f[a].func);c.sendEvent(c.events)}else c.events.push({type:p[a.type]||a.type,adVolume:b.getVolume()})}b.addEventListener(google.ima.AdEvent.Type[l],n),f.push({type:google.ima.AdEvent.Type[l],func:n})}}var g,m,e=void 0!==e?e:"";try{m=(g=d.ownerDocument).defaultView||g.parentWindow}catch(a){g=document,m=window}return m[e]=c,k.type="text/javascript",d&&d.appendChild(k),k.src="https://z.moatads.com/"+h.partnerCode+"/moatvideo.js#"+e,c}},7994:module=>{function VpaidVideoPlayer(postmessageSender,baseurl){this.player=null,this.postMessageSender=postmessageSender,this.slot_=null,this.eventsCallbacks_={},this.attributes_={companions:"",desiredBitrate:256,expanded:!1,height:0,icons:"",linear:!0,skippableState:!1,viewMode:"normal",width:0,volume:1},this.ias={isInitialized:0,fraud:0,adt:0,alc:0,dlm:0,dlg:0,hat:0,off:0,vio:0,ids:[]},this.parameters_=[],this.ads=[],this.test=!1,this.add_hb_campaigns=0,this.idVideoElement="dgtk-video",this.videoContent=null,this.adDisplayContainer=null,this.adsLoader=null,this.adsRenderingSettings=null,this.adsManagers={},this.postMessage=null,this.adsManagerIdLoaded=null,this.duration=null,this.isPlaying=!1,this.pausedByVisibility=!1,this.timeout=null,this.tagTimeout={},this.timeoutId=null,this.timeoutImpressionId=null,this.timeoutImpression=3e3,this.AdStarted=!1,this.isWinnerTag=!1,this.timeoutOver=!1,this.playerLoaded=!1,this.blackScreen=!1,this.updateUrl="//70214.ultimedia.com",this.totalAdTags=0,this.indexCallPreroll=0,this.idTagList=[],this.allads=[],this.numberTagPriority={},this.totalAdError=0,this.totalAdEmpty=0,this.maxTagCalled=0,this.requestTime={},this.loadedTime={},this.startTime={},this.pathStat="/deliver/statistiques/",this.statUrl=baseurl+this.pathStat,this.destroyed=!1,this.protocol="",this.brandSafetyOk=!1,this.statsSended=!1,this.statsSite={ns:"",nbt:0,bs:0,insec:0,https:0,rqm:"",avgt:0,inv:"",idc:"",nc:"",cpmvad:0,cmias:0,ref:"",prm:0,hb:0,hbn:0,hbcpm:0},this.statsCampaign={},this.statsInfo={tag:{},pro:"",nbt:0,req:[],rok:[],rtl:[],rer:[],aer:[],ald:[],atl:[],awn:[],awe:[],stt:[],rec:[],wec:[],aec:[],inv:"",ref:"",mot:0},this.errorStat=[],this.events={AdStarted:!1,AdImpression:!1,AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1,AdVideoComplete:!1,AdVideo10s:!1,AdVideo15s:!1,AdVideo20s:!1,AdVideo25s:!1,AdVideo30s:!1,AdVideo60s:!1,AdVideo90s:!1},this.stats={imp:!1,inventory:!1,unsold:!1},this.noAd=!1,this.builtIn=!1,this.indexTag=0,this.nextWaveRequest=3,this.removeIASSystem=!1,this.parameters_.ads=[],this.initAdParams={},this.waitingForVisiToStart=!1,this.indexWaterfallTag=0,this.adsLoadedInitiated=!1,this.adCleared=!1,this.soundON=!1,this.lastQuartile=0,this.statsToSend=[],this.internIAS=!1,this.internCMIAS=!1,this.cmInstanceTag=!1,this.isIMAPlayer=!1,this.playerAskWaterfall=!1,this.waterfallAlreadyStarted=!1,this.rdId=Date.now()+Math.floor(1e8*Math.random()+1),this.start=Date.now(),this.AdwaysReady=!1,this.IasReady=!1,this.imaAdDatas=!1,this.adBitrate=0}VpaidVideoPlayer.prototype.setVideoContainerId=function(eltId){this.idVideoElement=eltId},VpaidVideoPlayer.prototype.initAd=function(width,height,viewMode,desiredBitrate,creativeData,environmentVars){creativeData=JSON.parse(this.base64_decode(creativeData.AdParameters.replace(/%/g,"=").replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26)})));this.attributes_.viewMode=viewMode,this.attributes_.desiredBitrate=desiredBitrate,this.initClearAd(width,height,creativeData,environmentVars.slot)},VpaidVideoPlayer.prototype.initClearAd=function(width,height,parameters,slot){this.attributes_.width=width,this.attributes_.height=height,this.attributes_.viewMode=this.attributes_.viewMode||"normal",this.playerLoaded=parameters.params.extern,(!parameters.params.extern||void 0!==parameters.params.fromDtk&&parameters.params.fromDtk)&&(window.addEventListener("message",this.receiveMessage.bind(this),!1),this.postMessageSender.send("initvsync_"+this.rdId,"*")),this.initAdParams={parameters:parameters,slot:slot},this.initVsync()},VpaidVideoPlayer.prototype.getConst=function(constante){switch(constante.toUpperCase()){case"ALL_IN_ONE":return 0;case"WATERFALL":return 1;case"V2_SYSTEM":return 2;case"UNKNOWN_OS":return 0;case"WINDOWS PHONE":return 1;case"ANDROID":return 2;case"IOS":return 3;case"UNKNOW_BROWSER":return 0;case"OPERA":return 1;case"FIREFOX":return 2;case"SAFARI":return 3;case"IE":return 4;case"EDGE":return 5;case"CHROME":return 6}},VpaidVideoPlayer.prototype.initVsync=function(){this.statsSite.iml=Date.now()-this.start,this.parameters_=this.initAdParams.parameters,void 0!==this.parameters_.params.mdtk?(this.detectPM(),this.player.addListener("NormeValidated",this.onNormeValidated.bind(this)),this.player.addListener("VisibilityUndefined",this.onNormeValidated.bind(this)),this.player.addListener("visibilityChanged",this.updateVisibiityRate.bind(this)),this.player.addListener("focusChanged",this.updateFocus.bind(this)),this.player.addListener("AtEndPub",this.destroyVsync.bind(this)),this.player.notify("VsyncCreated"),void 0===this.parameters_.params.fromDtk&&(this.parameters_.params.fromDtk=!1),this.test=this.parameters_.params.insp,this.slot_=this.initAdParams.slot,this.protocol="http:"==window.location.protocol?"http:":this.protocol,this.protocol="https:"==window.location.protocol?"https:":this.protocol,this.parameters_.params.is_visible=void 0===this.parameters_.params.is_visible?2:this.parameters_.params.is_visible,this.parameters_.params.is_mobile=void 0===this.parameters_.params.is_mobile?0:this.parameters_.params.is_mobile,this.automute=this.parameters_.params.automute,this.adsParam=this.parameters_.params.adsParam,this.adsParamDecoded=this.parameters_.params.adsParamDecoded,this.gdprconsentstring=this.parameters_.params.gdprconsentstring,this.gdpr={gdpr_applies:this.parameters_.params.gdpr_applies,gdpr_consent:this.gdprconsentstring&&""!==this.gdprconsentstring?this.gdprconsentstring:this.parameters_.params.gdpr_consent},this.preview=this.parameters_.params.preview,this.isIMAPlayer=void 0===this.parameters_.params.isIMA?0:this.parameters_.params.isIMA,this.waterfall=this.parameters_.params.waterfall,this.timeout=isNaN(parseInt(this.parameters_.timeout))?5e3:parseInt(this.parameters_.timeout),this.internCMIAS=this.parameters_.params.intern_cm_ias&&!this.test,this.idInternCMIAS=this.parameters_.params.intern_cm_ias_id||0,this.internIAS=this.parameters_.params.intern_ias&&!this.test,this.camp_ias=this.parameters_.params.camp_ias||[],this.moatIntegration="string"==typeof this.parameters_.params.moatIntegration&&""!==this.parameters_.params.moatIntegration&&!this.test&&this.parameters_.params.moatIntegration,this.isMobile=this.parameters_.params.is_mobile,this.requestMode=this.parameters_.params.waterfall||this.isMobile?this.getConst("WATERFALL"):this.parameters_.params.v2System?this.getConst("V2_SYSTEM"):this.getConst("ALL_IN_ONE"),this.requestMode=this.getConst("WATERFALL"),this.isInsecure="overlay"!==this.getRollType()&&!this.isMobile&&this.parameters_.params.insecure_mode?1:0,this.builtIn=!!this.parameters_.params.fromDtk,this.infos={},this.infos.Parameters={Player:this.parameters_.params.extern?"Externe":"1"==this.parameters_.params.type_player?"Simple":"Smart",BuiltIn:this.builtIn?"Oui":"Non",VPAID:this.isInsecure?"INSECURE":"ENABLED",Tags:"".concat(this.parameters_.ads.length," TAGS PROGRAMMES"),Mode:this.requestMode==this.getConst("WATERFALL")?"Waterfall":this.requestMode==this.getConst("V2_SYSTEM")?"Par paquets":"All in one",Protocol:this.protocol,Timeout:this.timeout,CM_IAS:this.internCMIAS?"Oui":"Non",FW_IAS:this.internIAS?"Oui":"Non",Test:this.test?"Oui":"Non"},this.logInfo("Infos",this.infos,"table"),this.parameters_.params.extern&&!this.parameters_.params.fromDtk||(this.isIMAPlayer?this.callEvent_("AdLoaded"):this.callEvent_("AdStarted")),this.tagNumberBeforeBrandSafety=this.parameters_.ads.length,this.removeNonRelevantTags(),!this.parameters_.params.extern&&this.getBrowser()!=this.getConst("Chrome")&&this.getBrowser()!=this.getConst("Opera")||(this.checkBrandSafety(),this.checkCampaignsBrandSafety()),this.managePrebidAd(this.player.prebidAdsList),this.ads.map(function(ad){return ad.alreadySend=!1,ad}),this.maxTagCalled=this.ads.length,this.maxTagCalled||this.player.prebid.useDfp?(this.statsSite.ns=this.parameters_.params.ns,this.statsSite.nbt=this.tagNumberBeforeBrandSafety,this.statsSite.bs=this.brandSafetyOk?1:0,this.statsSite.insec=this.isInsecure?1:0,this.statsSite.https="https"==this.protocol?1:0,this.statsSite.rqm=this.requestMode==this.getConst("WATERFALL")?"Waterfall":this.requestMode==this.getConst("V2_SYSTEM")?"V2":"All_in_one",this.statsSite.cmias=this.internCMIAS?1:0,this.orderTag(),this.adCleared=!0,(this.isFocused()||this.parameters_.params.extern)&&this.initAdsLoader()):this.tagNumberBeforeBrandSafety?(this.logInfo("END","Aucun tag à appeler.","log"),this.errorAd("NoTagBS")):this.errorAd("NoTag")):console.debug("INITAD NON CONFORME")},VpaidVideoPlayer.prototype.afterTimeout=function(){this.timeoutId=setTimeout(function(){this.logInfo("TIMEOUT "+this.timeout+" ms ","","log"),this.preview||(this.timeoutOver=!0,this.requestMode!=this.getConst("WATERFALL")?this.tryToStart():49<this.player.getVisibilityRate()?this.errorAd("TimeoutVsync"):(this.timeout=2,this.afterTimeout()))}.bind(this),this.timeout)},VpaidVideoPlayer.prototype.initAdsLoader=function(){var width,height;this.LoadAdways(function(){this.AdwaysReady||this.player.notify("adways-ready"),this.AdwaysReady=!0}.bind(this)),this.adsLoadedInitiated=!0,this.afterTimeout(),this.builtIn&&this.getConst("iOS")!=this.getOs()?(this.videoContent=document.getElementById(this.idVideoElement),this.DivCanvas=document.createElement("div"),this.DivCanvas.setAttribute("id","canvas"),this.DivCanvas.setAttribute("style","background-color:black;position: absolute;top:0;left:0;width:100%;height:100%;display:none;"),this.contentCanvas=document.createElement("canvas"),this.contentCanvas.setAttribute("style","padding: 0;margin: auto;position: absolute;top: 0;bottom: 0;left: 0;right: 0;"),this.contentCanvas.setAttribute("id","canvas-img"),this.DivCanvas.appendChild(this.contentCanvas),this.slot_.appendChild(this.DivCanvas),this.isMobile&&"overlay"!=this.getRollType()&&"live"!==this.player.infos.videoType&&void 0===this.player.infos.media_sources.hls&&(this.videoContent.setAttribute("muted",""),this.videoContent.setAttribute("playsinline",""),this.videoContent.load())):(width=this.attributes_.width,height=this.attributes_.height,this.builtIn||(height=width=0),this.videoContent=document.createElement("video"),this.videoContent.setAttribute("muted",""),this.videoContent.setAttribute("playsinline",""),this.videoContent.setAttribute("width",width),this.videoContent.setAttribute("height",height),this.videoContent.setAttribute("style","z-index:-10"),this.videoContent.setAttribute("src","data:video/mp4;base64,0"),this.contentDiv=document.createElement("div"),this.contentDiv.setAttribute("id","contentDiv"),this.contentDiv.setAttribute("width",width),this.contentDiv.setAttribute("height",height),this.contentDiv.setAttribute("style","z-index:-10"),"overlay"!=this.getRollType()&&(this.contentDiv.style.backgroundColor="black"),this.contentDiv.appendChild(this.videoContent),this.slot_.appendChild(this.contentDiv),this.DivCanvas=document.createElement("div"),this.DivCanvas.setAttribute("id","canvas"),this.DivCanvas.setAttribute("style","background-color:black;position: absolute;top:0;left:0;width:100%;height:100%;display:none;"),this.contentCanvas=document.createElement("canvas"),this.contentCanvas.setAttribute("style","padding: 0;margin: auto;position: absolute;top: 0;bottom: 0;left: 0;right: 0;"),this.contentCanvas.setAttribute("id","canvas-img"),this.DivCanvas.appendChild(this.contentCanvas),this.slot_.appendChild(this.DivCanvas),this.isMobile&&"overlay"!=this.getRollType()&&this.videoContent.load()),google.ima.settings.setVpaidMode(this.isInsecure?google.ima.ImaSdkSettings.VpaidMode.INSECURE:google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.slot_,this.videoContent),this.adDisplayContainer.initialize(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.requestMode==this.getConst("WATERFALL")?(this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdRequestRespondsWaterfall.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdRequestErrorWaterfall.bind(this),!1)):(this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdRequestResponds.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdRequestError.bind(this),!1)),this.playerAskWaterfall=!0,this.startWaterfall()},VpaidVideoPlayer.prototype.startWaterfall=function(){var _this=this;Math.max.apply(Math,this.player.campaigns[this.rolltype].map(function(c){return c.priority})),Math.max.apply(Math,this.ads.map(function(c){return c.priority}));this.ads=this.ads.filter(function(ad){return 1!==parseInt(ad.autopilot)||0<_this.player.remainingCampaignEgs2.filter(function(egCampaign){var adPosition=1===parseInt(_this.player.nb_preroll)?"p2":"pr";return egCampaign.ad_position===adPosition}).length}),this.player.isAdFraudInventory&&(this.ads=this.ads.filter(function(ad){return 1!==parseInt(ad.is_adloox_adfraud)})),this.waterfallAlreadyStarted||(this.playerAskWaterfall&&this.player.HBComplete?(this.waterfallAlreadyStarted=!0,this.player.logInfo("CAMPAIGN LIST",this.ads,"object"),this.requestWaterfall()):this.logInfo("WATERFALL","Waiting HeaderBidding responses ...","log"))},window.delta=0,module.exports=VpaidVideoPlayer},3565:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);var __webpack_exports__=__webpack_require__(7994),init_default=__webpack_require__.n(__webpack_exports__),__webpack_exports__=(init_default().prototype.handshakeVersion=function(version){return"2.0"},init_default().prototype.startAd=function(){void 0!==this.adsManagerIdLoaded&&void 0!==this.adsManagers[this.adsManagerIdLoaded]&&(this.logInfo("STARTAD DU PLAYER",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log"),this.readyToStart())},init_default().prototype.errorAd=function(status){this.noAd=!0,void 0!==status&&status&&(this.statsSite.inv=status,this.statsInfo.inv=status),this.parameters_.params.extern||(status={type:"allads",allads:this.allads},this.postMessageSender.send(status,"*")),this.player&&this.preview&&this.player.notify("previewAdError"),this.playerLoaded&&(this.parameters_.params.extern&&this.isFocused()&&this.sendInventoryRequestStat(),this.sendStats(),this.logInfo("END","Errors","log"),this.sendUnsoldRequestStat(),setTimeout(function(){this.callEvent_("AdError")}.bind(this),150))},init_default().prototype.stopAd=function(){!this.events.AdImpression&&this.AdStarted?(this.statsSite.inv="TimeoutNoStart",this.statsInfo.inv="TimeoutNoStart"):this.events.AdImpression||this.AdStarted||(this.statsSite.inv="TimeoutPlayer",this.statsInfo.inv="TimeoutPlayer"),this.sendStats(),setTimeout(function(){this.callEvent_("AdStopped")}.bind(this),150)},init_default().prototype.setAdVolume=function(value){var adsManager=1<arguments.length&&void 0!==arguments[1]&&arguments[1];value=1<(value=value<0?0:value)?1:value,!this.soundON&&0<value&&(this.soundON=!0,this.sendUpdatedStats("sound")),adsManager?adsManager.setVolume(value):this.adsManagers&&this.adsManagers[this.adsManagerIdLoaded]&&void 0===this.adsManagers[this.adsManagerIdLoaded].adways&&(this.adsManagers[this.adsManagerIdLoaded].setVolume(value),this.player&&this.player.notify("AdVolumeChanged",value))},init_default().prototype.getAdVolume=function(){return this.AdStarted?this.adsManagers[this.adsManagerIdLoaded].getVolume():1},init_default().prototype.resizeAd=function(width,height,viewMode){this.AdStarted&&this.adsManagers&&this.adsManagerIdLoaded&&this.adsManagers[this.adsManagerIdLoaded]&&(viewMode="fullscreen"==viewMode?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,this.adsManagers[this.adsManagerIdLoaded].resize(width,height,viewMode),this.attributes_.height=height,this.attributes_.width=width,this.videoContent&&(this.videoContent.setAttribute("width",this.attributes_.width),this.videoContent.setAttribute("height",this.attributes_.height)),this.callEvent_("AdSizeChange"))},init_default().prototype.getAdRemainingTime=function(){return!(!this.adsManagers||!this.adsManagerIdLoaded)&&this.adsManagers[this.adsManagerIdLoaded].getRemainingTime()},init_default().prototype.pauseAd=function(){this.isPlaying?(this.AdStarted&&this.adsManagers[this.adsManagerIdLoaded].pause(),this.isPlaying=!1):this.resumeAd()},init_default().prototype.resumeAd=function(){this.AdStarted&&this.adsManagers[this.adsManagerIdLoaded].resume(),this.isPlaying=!0},init_default().prototype.expandAd=function(){this.AdStarted&&this.adsManagers[this.adsManagerIdLoaded].expand()},init_default().prototype.getAdExpanded=function(){return this.attributes_.expanded},init_default().prototype.getAdSkippableState=function(){if(this.AdStarted)return this.adsManagers[this.adsManagerIdLoaded].getAdSkippableState()},init_default().prototype.collapseAd=function(){this.AdStarted&&this.adsManagers[this.adsManagerIdLoaded].collapse()},init_default().prototype.skipAd=function(force){force=void 0!==force&&force,this.AdStarted&&(this.getAdSkippableState()||force)&&(this.sendAdSkipRequestStat(),this.adsManagers[this.adsManagerIdLoaded].skip())},init_default().prototype.isEventSubscribed_=function(eventName){return!0},init_default().prototype.subscribe=function(aCallback,eventName,aContext){this.getEventDispatcher().addEventListener(eventName,aCallback.bind(aContext),!1)},init_default().prototype.unsubscribe=function(callback,eventName){this.getEventDispatcher().removeEventListener(eventName,callback,!1)},init_default().prototype.callEvent_=function(eventType){var event;try{event=new Event(eventType)}catch(ex){(event=document.createEvent("Event")).initEvent(eventType,!0,!0)}this.getEventDispatcher().dispatchEvent(event)},init_default().prototype.getEventDispatcher=function(){return this.eventDispatcher_||(this.eventDispatcher_=document.createElement("div")),this.eventDispatcher_},init_default().prototype.getAdWidth=function(){return this.attributes_.width},init_default().prototype.getAdHeight=function(){return this.attributes_.height},init_default().prototype.getAdDuration=function(){return this.AdStarted?this.adsManagers[this.adsManagerIdLoaded].infosTag.duration:20},init_default().prototype.getAdCompanions=function(){return this.attributes_.companions},init_default().prototype.getAdIcons=function(){return this.attributes_.icons},init_default().prototype.getAdLinear=function(){return this.attributes_.linear},init_default().prototype.log=function(message){this.logInfo("Message",message,"log")},init_default().prototype.muteButtonOnClick_=function(){this.AdStarted&&(0==this.getAdVolume()?this.adsManagers[this.adsManagerIdLoaded].setAdVolume(1):this.adsManagers[this.adsManagerIdLoaded].setAdVolume(0))},__webpack_require__(5207),__webpack_require__(7940)),Base64_default=__webpack_require__.n(__webpack_exports__);function _createForOfIteratorHelper(o,allowArrayLike){var i,it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length)return it&&(o=it),i=0,{s:allowArrayLike=function(){},n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:allowArrayLike};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return events_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return events_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?events_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function events_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function requests_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return requests_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return requests_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?requests_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function requests_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}init_default().prototype.base64_decode=function(data){return Base64_default().decode(data)},init_default().prototype.receiveMessage=function(e){var match_resize;"string"==typeof e.data&&(match_resize=e.data.match(/resizeAd_(\d+)_(\d+)_(\d+)/),"playvsync"!=e.data&&e.data!="playvsync_"+this.rdId||this.playerLoaded?match_resize&&match_resize[3]==this.rdId&&(this.attributes_.width=match_resize[1],this.attributes_.height=match_resize[2],this.resizeAd(match_resize[1],match_resize[2],"normal")):this.playerReady())},init_default().prototype.getBrowser=function(){return window.opr&&opr.addons||window.opera||0<=navigator.userAgent.indexOf(" OPR/")?1:"undefined"!=typeof InstallTrigger?2:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString()?3:document.documentMode?4:window.StyleMedia?5:window.chrome&&window.chrome.webstore?6:0},init_default().prototype.destroy=function(adsManagerId){void 0!==this.adsManagers[adsManagerId]&&(this.logInfo("TAG DESTRUCTED",adsManagerId,"log"),this.adsManagers[adsManagerId].destroy(),delete this.adsManagers[adsManagerId])},init_default().prototype.deltaTime=function(){var delta=Date.now()-this.start;return delta=9999<delta?delta/1e3+" s":delta+" ms"},init_default().prototype.logInfo=function(titre,message,type){var text,randomCss,prefixCss,titleCss,args;1==this.parameters_.params.dbg&&(text="%c • %cDGTK DEBUG%c%s:%c %s",randomCss="background: #"+this.player.randomCss+";border-radius: 3px 3px;padding: 1px 1px;",prefixCss="background: #24325E;border-radius: 3px 3px;color: #fff;padding: 1px 3px;",titleCss="font-weight: bold;color: #000;padding: 1px 5px 1px 3px;","log"==type&&(message+=" -- "+this.deltaTime()),args=[text,randomCss,prefixCss,titleCss,titre,"",message],"table"==type&&type in console&&"group"in console?(args=[text,randomCss,prefixCss,titleCss,titre,"",""],console.group.apply(console,args),console.table(message),console.groupEnd()):"error"==type||"object"==type?(args=[text,randomCss,prefixCss,titleCss,titre,"",""],console.group.apply(console,args),console.log(message),console.groupEnd()):type in console&&console.log.apply(console,args))},init_default().prototype.createBlackDiv=function(id){this.builtIn&&!this.isMobile||(this.blackScreen=document.createElement("div"),this.blackScreen.setAttribute("id","black-"+id),this.blackScreen.setAttribute("style","width:100%; height:100%;background-color:black; overflow:hidden;"),this.slot_.appendChild(this.blackScreen))},init_default().prototype.createAdLooxTag=function(ad,imaAdDatas){var alScript=document.createElement("script"),encodedClickThrough=(alScript.setAttribute("type","text/javascript"),""),imaAdDatas=(imaAdDatas&&(encodedClickThrough=void 0!==imaAdDatas.clickThroughUrl?encodeURIComponent(imaAdDatas.clickThroughUrl):""),this.player.getInfo("realReferer")),device=1===this.player.getInfo("isMobile")?"Mobile":"Desktop",imaAdDatas="https://j.adlooxtracking.com/ads/js/tfav_adl_"+this.player.adlooxParams.clientId+".js#platform="+this.player.adlooxParams.platformId+"&scriptname=adl_"+this.player.adlooxParams.clientId+"&tagid="+this.player.adlooxParams.tagId+"&typejs=tvaf&fwtype=2&creatype=6&targetelt=&custom2area=80&custom2sec=10&id11=video&id12=$ADLOOX_WEBSITE&id15="+this.player.adlooxParams.id15+"&id1=[RANDOM]&id2=[URI]&id3="+imaAdDatas+"&id4=480x360&id5="+this.player.adlooxParams.tagId+"&id6="+device+"&id7="+encodedClickThrough;alScript.src=this.replaceMacro(imaAdDatas),document.getElementsByTagName("body")[0].appendChild(alScript)},init_default().prototype.executeIAS=function(adsManager){var cmConfig;this.internCMIAS&&(this.logInfo("CREATION INSTANCE CM IAS",this.adsManagerIdLoaded,"log"),cmConfig={anId:this.idInternCMIAS,chanId:this.parameters_.params.mdtk+"/"+this.parameters_.params.type_player,campId:"preroll",pubOrder:"Video",placementId:"AdX Open Auction",pubCreative:"Default Creative",custom:this.attributes_.width+"x"+this.attributes_.height,custom2:"newIMA"},googleImaVansAdapter.init(google,adsManager,this.videoContent,cmConfig)),adsManager.infosTag.internFWIAS&&(this.logInfo("CREATION INSTANCE FW IAS",this.adsManagerIdLoaded,"log"),cmConfig={advEntityId:infosTag.advEntityId,pubEntityId:infosTag.pubEntityId,partner:"Digiteka"},googleImaVansAdapter.init(google,adsManager,this.videoContent,cmConfig))},init_default().prototype.createMoatInstance=function(){var trigger,slicer2;!1!==this.moatIntegration&&(this.logInfo("CREATION INSTANCE MOAT",this.moatIntegration,"log"),slicer2=0===parseInt(this.parameters_.params.type_player)?"dtk_smartplayer_passback":"dtk_singleplayer_passback",trigger="",-1!==this.adsManagers[this.adsManagerIdLoaded].infosTag.script.indexOf("be-rtl.videoplaza.tv")&&(slicer2=new URL(this.adsManagers[this.adsManagerIdLoaded].infosTag.script).searchParams.get("s")),1===parseInt(this.player.getInfo("scrolltoplay"))?trigger+="scroll2play":trigger+="yes"===this.player.getInfo("autoplay")?"autoplay":"click2play",trigger+=1===parseInt(this.player.getInfo("visible"))||1===parseInt(this.player.getInfo("visible"))?"-visibleplayer":"",slicer2={partnerCode:this.moatIntegration,viewMode:google.ima.ViewMode.NORMAL,slicer1:this.extractRootDomain(this.getAncestorUrl()),slicer2:slicer2,zMoatAdBreak:trigger},initMoatTracking(this.adsManagers[this.adsManagerIdLoaded],slicer2,this.slot_))},init_default().prototype.getParamsUrl=function(url){var params={},parser=document.createElement("a");parser.href=url;for(var vars=parser.search.substring(1).split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");params[pair[0]]=decodeURIComponent(pair[1])}return params},init_default().prototype.getOs=function(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(userAgent)?this.getConst("Windows Phone"):/android/i.test(userAgent)?this.getConst("Android"):/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream?this.getConst("iOS"):this.getConst("unknown_browser")},init_default().prototype.getCookieValue=function(cookieName){cookieName=document.cookie.match("(^|;)\\s*"+cookieName+"\\s*=\\s*([^;]+)");return cookieName?cookieName.pop():""},init_default().prototype.tooMuchViews=function(adInfos){var groupsViewsNumber,groupLimit=adInfos.group_limit,idToCheck=adInfos.id,idGroupToCheck=adInfos.group_id_encryted;return groupLimit&&1===parseInt(groupLimit)?(groupLimit=[],(groupsViewsNumber=this.getCookieValue("groups_views_number"))&&(groupsViewsNumber=decodeURIComponent(groupsViewsNumber),groupLimit=JSON.parse(groupsViewsNumber)),!!(groupLimit.hasOwnProperty(idGroupToCheck)&&0<adInfos.group_capping)&&groupLimit[idGroupToCheck].views>=parseInt(adInfos.group_capping)):(groupsViewsNumber=[],(groupLimit=this.getCookieValue("campaigns_views_number"))&&(groupLimit=decodeURIComponent(groupLimit),groupsViewsNumber=JSON.parse(groupLimit)),!!(groupsViewsNumber.hasOwnProperty(idToCheck)&&0<adInfos.capping)&&groupsViewsNumber[idToCheck].views>=parseInt(adInfos.capping))},init_default().prototype.getAncestorUrl=function(){try{return this.player.getInfo("realReferer",!1)?this.player.getInfo("realReferer",!1):this.player.getInfo("referer",!1)?this.player.getInfo("referer",!1):void 0!==window.location.ancestorOrigins&&0<window.location.ancestorOrigins.length?window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]:document.location.href||""}catch(e){return""}},init_default().prototype.extractHostname=function(url){url=-1<url.indexOf("://")?url.split("/")[2]:url.split("/")[0];return url=(url=url.split(":")[0]).split("?")[0]},init_default().prototype.extractRootDomain=function(url){if(!url)return"";var url=this.extractHostname(url),splitArr=url.split("."),arrLen=splitArr.length;return 2<arrLen&&(url=splitArr[arrLen-2]+"."+splitArr[arrLen-1],2==splitArr[arrLen-1].length&&2==splitArr[arrLen-2].length&&(url=splitArr[arrLen-3]+"."+url)),url},init_default().prototype.isOkWithBrandSafety=function(adInfos){return!parseInt(adInfos.brand_safety)||this.brandSafetyOk},init_default().prototype.checkBrandSafety=function(){var currentUrl=this.extractRootDomain(this.getAncestorUrl());currentUrl.length&&this.parameters_.params.s_url&&this.parameters_.params.s_url.length&&-1<this.parameters_.params.s_url.indexOf(currentUrl)&&(this.brandSafetyOk=!0)},init_default().prototype.checkCampaignsBrandSafety=function(){for(var ads_=[],i=0;i<this.ads.length;i++){var adInfos=this.ads[i];this.isOkWithBrandSafety(adInfos)&&ads_.push(adInfos)}this.ads=ads_},init_default().prototype.removeNonRelevantTags=function(){var _this=this;this.ads=this.parameters_.ads.filter(function(campaign){return void 0!==campaign.script&&-1===campaign.script.indexOf("pubads.g.doubleclick.net")||_this.player.googleConsent}).filter(function(campaign){return void 0===campaign.is_hb||0===parseInt(campaign.is_hb)||!1===campaign.is_hb||null==campaign.is_hb}).filter(function(campaign){return void 0===campaign.deal_id||0===parseInt(campaign.deal_id)||!1===campaign.deal_id||null===campaign.deal_id}).filter(function(campaign){return!campaign.oss||!Array.isArray(campaign.oss)||(0===campaign.oss.length||campaign.oss.includes(_this.player.getOs()))}).map(function(adInfos){return adInfos.sound_option=void 0===adInfos.sound_option?0:adInfos.sound_option,adInfos}).filter(function(adInfos){return 0===parseInt(adInfos.sound_option)||1===parseInt(adInfos.sound_option)&&!_this.parameters_.params.automute&&!_this.isMobile||2===parseInt(adInfos.sound_option)&&(_this.parameters_.params.automute||_this.isMobile)}).map(function(adInfos){return adInfos.vendor_required=void 0===adInfos.vendor_required?0:parseInt(adInfos.vendor_required),adInfos}).filter(function(adInfos){return!!(void 0===adInfos.rgpd_campaign||1===parseInt(adInfos.rgpd_campaign)||0===parseInt(adInfos.rgpd_campaign)&&1===parseInt(adInfos.rgpd_adnetwork)||parseInt(_this.parameters_.params.gdpr_digiteka))||-1!==_this.player.getVendorsAllowed().indexOf(adInfos.vendor_required)})},init_default().prototype.addGdprVars=function(url){return url.match(/\/\/search.spotxchange.com/)?url+="&regs[gdpr]=[GDPR_APPLY]&user[consent]=[GDPR_STRING]":url.match(/\/\/ads.stickyadstv.com/)?url+="&_fw_gdpr=[GDPR_APPLY]&_fw_gdpr_consent=[GDPR_STRING]":url.match(/\/\/videoadex.com/)?url+="&_gdpr=[GDPR_APPLY]&_gdpr_consent=[GDPR_STRING]":(url.match(/\/\/pubads.g.doubleclick.net\//)||url.match(/\/\/securepubads.g.doubleclick.net\//))&&(url+="&gdpr=[GDPR_APPLY]&gdpr_consent=[GDPR_STRING]"),url},init_default().prototype.replaceMacro=function(url){var visible_width=this.player.getInfo("width_float_video_css"),height=this.attributes_.height,width=this.attributes_.width;return 0<visible_width&&(height=visible_width*height/width,width=visible_width),url.trim().split(" ").join("").replace("ads.stickyadstv.com/vast/vpaid-adapter/","ads.stickyadstv.com/www/delivery/swfIndex.php?reqType=AdsSetup&protocolVersion=2.0&zoneId=").replace("__random-number__",""+Math.floor(7859498431548956*Math.random())).replace("[RANDOM]",""+Math.floor(6217324167515716*Math.random())).replace("[URL]",this.getAncestorUrl()).replace("[URI]",this.extractRootDomain(this.getAncestorUrl())).replace("originalVast=http:","originalVast="+this.protocol).replace("originalVast=https:","originalVast="+this.protocol).replace("[GDPR_APPLY]",this.gdpr.gdpr_applies).replace("[GDPR_STRING]",this.gdpr.gdpr_consent).replace("[ADS_PARAM]",encodeURIComponent(this.adsParam)).replace("[ADS_PARAM_DECODED]",this.adsParamDecoded).replace("[TAG_PARAM]",encodeURIComponent(this.adsParam)).replace("[TAG_PARAM_DECODED]",this.adsParamDecoded).replace("[SFX_DEALS]",this.player.sfxDeals.join("%3D")).replace("[DFP_DEALS]",this.player.dfpDeals).replace("[WIDTH]",width).replace("[HEIGHT]",height.toFixed(0)).replace("http:",this.protocol).replace("https:",this.protocol)},init_default().prototype.detectPM=function(){var db,on=function(){this.setPrivateMode(1)}.bind(this),off=function(){this.setPrivateMode(0)}.bind(this);window.webkitRequestFileSystem?webkitRequestFileSystem(0,0,off,on):"MozAppearance"in document.documentElement.style?((db=indexedDB.open("test")).onerror=on,db.onsuccess=off):(/constructor/i.test(window.HTMLElement)||window.safari?function(){try{localStorage.length||(localStorage.x=1,localStorage.removeItem("x")),off()}catch(e){(navigator.cookieEnabled?on:off)()}}:window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?off:on)()},init_default().prototype.setPrivateMode=function(value){this.isPrivateMode=value},init_default().prototype.destroyVsync=function(value){this.destroyed=!0},init_default().prototype.updateMute=function(value){this.parameters_.params.automute=value},init_default().prototype.managePrebidAd=function(prebidAd){if("preroll"==this.getRollType())if(Array.isArray(prebidAd))for(var ad in prebidAd)this.managePrebidAd(prebidAd[ad]);else{for(var i=0;i<this.ads.length;i++)if(!(parseInt(this.ads[i].priority)>parseInt(prebidAd.priority)||this.ads[i].priority==prebidAd.priority&&.5<Math.random()))return void this.ads.splice(i,0,prebidAd);this.ads.push(prebidAd)}},init_default().prototype.getXMLHttpRequest=function(){var xhr=null;if(!window.XMLHttpRequest&&!window.ActiveXObject)return null;if(window.ActiveXObject)try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP")}else xhr=new XMLHttpRequest;return xhr},init_default().prototype.sendAdRequestStat=function(ad){var params,xhr,code_enc;this.test||this.destroyed||(this.logInfo("STATS TAGCALL (Request)",ad.id,"log"),this.player.notify("adRequest",{type:this.getRollType(),ad:ad,hb:!1}),params=this.parameters_.params,xhr=this.getXMLHttpRequest(),code_enc=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+ad.id+"_33m03_"+this.getTopic()+"_"+this.getOwner(),xhr.open("POST",this.statUrl+"tagcall/",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+code_enc+"&ad_blocks="+params.ad_block+"&type_player="+this.getTypePlayer()+"&tag_matched="+ad.tag_matched+"&qc_matched=0&visible="+this.getIsVisible()+"&country="+params.country_code))},init_default().prototype.sendImpRequestStat=function(){if(!this.destroyed&&(this.logInfo("STATS ADBEGIN (Impression)",this.adsManagerIdLoaded,"log"),!this.test&&(this.parameters_.params.extern||this.parameters_.params.fromDtk)&&!this.stats.imp)){var action="";switch(this.getRollType()){case"brandcontent":case"preroll":action="adbegin";break;case"postroll":action="postrollbegin";break;case"overlay":action="overlaybegin";break;default:return}var params=this.parameters_.params,xhr=this.getXMLHttpRequest(),adCalls=params.mdtk+"_"+params.zone+'_["'+this.idTagList.join('","')+'"]',code_enc=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+this.adsManagerIdLoaded+"_33m03_"+this.getTopic()+"_"+this.getOwner()+"_"+(2==this.getIsVisible()?"1":"0");"postroll"==this.getRollType()&&(code_enc=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_33m03_"+this.getOwner()+"_"+this.getTopic()+"_"+this.adsManagerIdLoaded),"overlay"==this.getRollType()&&(code_enc=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+this.adsManagerIdLoaded+"_33m03_"+this.getTopic()+"_"+this.getOwner()),xhr.open("POST",this.statUrl+action,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+code_enc+"&ad_calls="+adCalls+"&ad_blocks=0&type_player="+this.getTypePlayer()+"&tag_matched="+this.adsManagers[this.adsManagerIdLoaded].infosTag.tag_matched+"&qc_matched=0"+this.getStatParams()+"&bdst="+(this.brandSafetyOk?"1":"0")+"&ca="+params.gdpr_digiteka),this.stats.imp=!0}},init_default().prototype.sendStats=function(){if(!this.destroyed&&(this.player.double_preroll&&1==this.player.nb_preroll&&this.sendUpdatedStats("print_double_preroll"),!this.statsSended&&!this.test&&"overlay"!=this.getRollType())){if(this.statsSended=!0,"Errors"==this.statsSite.inv){if(0==this.totalAdError)for(var c in this.statsSite.inv="AllEmpty",this.statsCampaign)this.statsCampaign[c].status="AllEmpty"}else if("TimeoutPlayer"==this.statsSite.inv||"TimeoutVsync"==this.statsSite.inv)for(var c in this.statsCampaign)"Timeout"==this.statsCampaign[c].status&&(this.statsCampaign[c].status=this.statsSite.inv);this.statsSite.prm=null===this.player.isPrivateMode?2:this.player.isPrivateMode,this.statsSite.ref=encodeURIComponent(this.getAncestorUrl()),this.statsSite=Object.assign(this.statsSite,this.player.adPlayerHbStats),this.logInfo("Paramètres ",this.statsSite,"table"),this.logInfo("Tableau des tags",this.statsCampaign,"table"),this.statsInfo.tag={},this.totalAdTags&&!this.statsInfo.req.length&&(this.statsInfo.inv="NoInventory");var _c,xhr,statsCampaigns={result:[]};for(_c in this.statsCampaign)statsCampaigns.result.push(this.statsCampaign[_c]);if(this.logInfo("SEND STATS","","log"),this.parameters_.params.monito&&(params=this.parameters_.params,xhr=this.getXMLHttpRequest(),params=params.mdtk+"_"+params.zone+"_"+params.type_player,obj_extstring="",void 0!==this.statsInfo.logs_campaign&&_typeof(this.statsInfo.logs_campaign.TraffickingParametersString)&&(obj_extstring=encodeURIComponent(this.statsInfo.logs_campaign.TraffickingParametersString)),void 0!==this.statsInfo.logs_campaign&&_typeof(this.statsInfo.logs_campaign.MediaUrl)&&(this.statsInfo.logs_campaign.MediaUrl=encodeURIComponent(this.statsInfo.logs_campaign.MediaUrl)),void 0!==this.statsInfo.logs_campaign?(this.statsInfo.logs_campaign.TraffickingParametersString="",this.statsInfo.logs_campaign.TraffickingParameters={}):this.statsInfo.logs_campaign={},params=(params=this.statUrl+"vsyncst/?"+this.getZInfos(!0)+"&u=no&code_enc="+params+"&st="+JSON.stringify(this.statsSite)+"&cp="+JSON.stringify(statsCampaigns)+"&lc="+JSON.stringify(this.statsInfo.logs_campaign)+"&extstring="+obj_extstring).substring(0,5e3),xhr.open("POST",params,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.onload=function(){if(200===xhr.status){if(this.servSt=""!=xhr.responseText&&"null"!=xhr.responseText&&xhr.responseText,this.servSt&&this.statsToSend.length){var _step,_iterator=_createForOfIteratorHelper(this.statsToSend);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;this.sendUpdatedStats(a,!0)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}this.statsToSend=[]}}.bind(this),xhr.send(),this.sendOldStats()),this.player){var action="prrpt";switch(this.getRollType()){case"brandcontent":case"preroll":action="prrpt";break;case"postroll":action="porpt";break;default:return}var obj_extstring=this.statsSite,cp_temp=(delete obj_extstring.ns,delete obj_extstring.nc,this.statsCampaign),cp=[];for(c in cp_temp)delete cp_temp[c].nc,cp.push(cp_temp[c]);var params=this.getZInfos(!0,!0);this.player.sendEvent(action,Object.assign({st:JSON.stringify(obj_extstring),cp:JSON.stringify(cp)},params))}}},init_default().prototype.sendUpdatedStats=function(a,dontAdd){if(!this.destroyed){if(this.player){var action="prrpt";switch(this.getRollType()){case"brandcontent":case"preroll":action="prrpt";break;case"postroll":action="porpt";break;default:return}var othersInfos=this.getZInfos(a,!0);this.player.sendEvent(action,othersInfos)}dontAdd||this.statsSended?this.servSt&&this.parameters_.params.monito&&(othersInfos=this.getXMLHttpRequest(),dontAdd=(dontAdd=this.parameters_.params).mdtk+"_"+dontAdd.zone+"_"+dontAdd.type_player,othersInfos.open("POST",this.updateUrl.replace(/70214/,this.servSt).replace(/ovh/,"eu")+this.pathStat+"vsyncst/?"+this.getZInfos(a)+"&u=yes&code_enc="+dontAdd,!0),othersInfos.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),othersInfos.send()):this.statsToSend.push(a)}},init_default().prototype.getZInfos=function(toUpdate,toObject){var url_arg="do="+this.rdId,object={};switch(toUpdate){case"normes":this.player.adNormesVisibility.forEach(function(n){url_arg+="&".concat(n.name.toLowerCase(),"=").concat(this.player.normeValidated[n.id]),object[n.name.toLowerCase()]=this.player.normeValidated[n.id]}.bind(this));break;case"sound":url_arg+="&sd="+(this.soundON?"2":"0"),object.sd=this.soundON?"2":"0";break;case"quartile":url_arg+="&p="+this.lastQuartile,object.p=this.lastQuartile;break;case"inv_double_preroll":url_arg+="&invdp="+(1==this.player.nb_preroll),object.invdp=1==this.player.nb_preroll;break;case"print_double_preroll":url_arg+="&dp="+this.events.AdImpression,object.dp=this.events.AdImpression;break;case!0:this.player.adNormesVisibility.forEach(function(n){url_arg+="&".concat(n.name.toLowerCase(),"=").concat(this.player.normeValidated[n.id]),object[n.name.toLowerCase()]=this.player.normeValidated[n.id]}.bind(this)),url_arg+="&p=0",object.p="0";var adDuration=this.adsManagerIdLoaded&&this.adsManagers&&this.adsManagers[this.adsManagerIdLoaded].infosTag.duration?this.adsManagers[this.adsManagerIdLoaded].infosTag.duration:0;url_arg+="&ad="+adDuration,object.ad=adDuration,this.soundON=this.soundON||!this.automute,url_arg+="&sd="+(this.soundON?"1":"0"),object.sd=this.soundON?"1":"0"}return toObject?object:url_arg},init_default().prototype.sendOldStats=function(){var xhr,params;this.destroyed||(this.statsInfo.mot=Date.now()-this.start,this.statsInfo.nbt=this.totalAdTags,this.statsInfo.pro=this.protocol,this.statsInfo.prm=null===this.player.isPrivateMode?2:this.player.isPrivateMode,this.statsInfo.ref=encodeURIComponent(this.getAncestorUrl()),params=this.parameters_.params,xhr=this.getXMLHttpRequest(),params=params.mdtk+"_"+params.zone+"_"+params.type_player,xhr.open("POST",this.statUrl+"advsync/?code_enc="+params+"&vsyncdata="+JSON.stringify(this.statsInfo)+"&err=",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send(),this.errorStat=[])},init_default().prototype.sendClickRequestStat=function(){if(!this.destroyed&&(this.logInfo("STATS CLICK",this.adsManagerIdLoaded,"log"),!this.test&&(this.parameters_.params.extern||this.parameters_.params.fromDtk))){var action="";switch(this.getRollType()){case"brandcontent":case"preroll":action="adclickbegin";break;case"postroll":action="postrollclickbegin";break;case"overlay":action="overlayclickbegin";break;default:return}var params=this.parameters_.params,xhr=this.getXMLHttpRequest(),code_enc=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+this.adsManagerIdLoaded+"_33m03_"+this.getTopic()+"_"+this.getOwner();"overlay"==this.getRollType()&&(code_enc=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+this.adsManagerIdLoaded+"_33m03_"+this.getTopic()),xhr.open("POST",this.statUrl+action,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+code_enc+"&type_player="+this.getTypePlayer()+"&tag_matched="+this.adsManagers[this.adsManagerIdLoaded].infosTag.tag_matched+"&qc_matched=0"+this.getStatParams())}},init_default().prototype.sendAdTimeRequestStat=function(timeparam){var xhr,params;this.destroyed||(this.logInfo("STATS ADTIME",timeparam+" : "+this.adsManagerIdLoaded,"log"),this.test||!this.parameters_.params.extern&&!this.parameters_.params.fromDtk||"overlay"!=this.getRollType()&&(params=this.parameters_.params,xhr=this.getXMLHttpRequest(),params=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+this.adsManagerIdLoaded+"_33m03_"+this.getTopic()+"_"+this.getOwner()+"_"+timeparam,"100percent"==timeparam&&this.player&&(params=(params+="_"+this.player.IABValide+"_")+this.player.isVisibleString()),xhr.open("POST",this.statUrl+"adtimebegin",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+params+"&type_player="+this.getTypePlayer()+"&tag_matched="+this.adsManagers[this.adsManagerIdLoaded].infosTag.tag_matched+"&qc_matched=0"+this.getStatParams())))},init_default().prototype.sendAdSkipRequestStat=function(){var xhr,params;this.destroyed||(this.logInfo("STATS AD SKIP",this.adsManagerIdLoaded,"log"),this.test||!this.parameters_.params.extern&&!this.parameters_.params.fromDtk||(params=this.parameters_.params,xhr=this.getXMLHttpRequest(),params=params.mdtk+"_"+params.zone+"_"+this.getVideo()+"_"+this.adsManagerIdLoaded+"_33m03_"+this.getTopic()+"_"+this.getOwner(),xhr.open("POST",this.statUrl+"adskip",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+params+"&type_player="+this.getTypePlayer()+"&tag_matched="+this.adsManagers[this.adsManagerIdLoaded].infosTag.tag_matched+"&qc_matched=0")))},init_default().prototype.sendInventoryRequestStat=function(){var params,xhr,code_enc,first_ad;this.destroyed||this.test||!this.parameters_.params.extern||this.stats.inventory||(this.logInfo("STATS INVENTORY","","log"),params=this.parameters_.params,xhr=this.getXMLHttpRequest(),code_enc=params.mdtk+"_"+params.zone+"_"+this.getRollType()+"_"+params.is_mobile+"_0_"+params.country_code,first_ad=this.ads[0]&&this.ads[0].id?this.ads[0].id:"33m03",xhr.open("POST",this.statUrl+"inventory",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+code_enc+"&type_player="+this.getTypePlayer()+"&first_ad="+first_ad+"&visible="+params.is_visible),"preroll"==this.getRollType()?this.player.double_preroll&&1==this.player.nb_preroll?this.player.sendEvent("p2inv"):this.player.sendEvent("prinv"):"postroll"==this.getRollType()?this.player.sendEvent("poinv"):"overlay"==this.getRollType()&&this.player.sendEvent("ovinv"),this.stats.inventory=!0)},init_default().prototype.sendUnsoldRequestStat=function(){var xhr,adCalls,params;this.destroyed||(this.logInfo("STATS UNSOLD",this.adsManagerIdLoaded,"log"),"preroll"==this.getRollType()&&this.player.double_preroll&&1==this.player.nb_preroll&&!this.stats.unsold&&(this.player.sendEvent("p2uns"),this.stats.unsold=!0),this.test||!(this.parameters_.params.extern||this.player&&5==this.player.infos.float_video)||this.stats.unsold||!this.stats.inventory&&this.parameters_.params.extern||(params=this.parameters_.params,xhr=this.getXMLHttpRequest(),adCalls=params.mdtk+"_"+params.zone+'_["'+this.idTagList.join('","')+'"]',params=params.mdtk+"_"+params.zone+"_33m03_33m03_33m03_1_0_"+params.is_mobile,xhr.open("POST",this.statUrl+"externunsold",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("code_enc="+params+"&ad_calls="+adCalls+"&ad_blocks=0&type_player="+this.getTypePlayer()+"&bdst="+(this.brandSafetyOk?"1":"0")),"preroll"==this.getRollType()?this.player.sendEvent("pruns"):"postroll"==this.getRollType()?this.player.sendEvent("pouns"):"overlay"==this.getRollType()&&this.player.sendEvent("ovuns"),this.stats.unsold=!0))},init_default().prototype.getTypePlayer=function(){return this.parameters_.params.extern?1:this.parameters_.params.type_player},init_default().prototype.getIsVisible=function(){return this.player?this.player.isVisibleString():void 0===this.parameters_.params.is_visible?2:this.parameters_.params.is_visible},init_default().prototype.getRollType=function(){return void 0===this.parameters_.params.rolltype?"preroll":this.parameters_.params.rolltype},init_default().prototype.getVideo=function(){return void 0!==this.parameters_.params.video?this.parameters_.params.video:"33m03"},init_default().prototype.getOwner=function(){return void 0!==this.parameters_.params.owner?this.parameters_.params.owner:"33m03"},init_default().prototype.getTopic=function(){return void 0!==this.parameters_.params.topic?this.parameters_.params.topic:"0"},init_default().prototype.getStatParams=function(){var statParams=this.parameters_.statParams||{},statKeys=Object.keys(statParams),encodedParams="";return statKeys.forEach(function(v,k){encodedParams+="&"+v+"="+statParams[v]}),encodedParams},init_default().prototype.onAdRequestResponds=function(adsManagerLoadedEvent){var adInfos=adsManagerLoadedEvent.getUserRequestContext();adInfos.duration=20,this.statsCampaign[adInfos.id].req=!0,this.statsCampaign[adInfos.id].reqt=Date.now()-this.requestTime[adInfos.id],this.AdStarted||this.isWinnerTag?(this.statsInfo.rtl.push(adInfos.id),this.statsInfo.tag[adInfos.id]&&(this.statsInfo.tag[adInfos.id].state="Request_Ok_too_late"),this.statsCampaign[adInfos.id].status="Timeout",this.logInfo("TOO LATE REQUEST (Ad already started)",adInfos.id,"log")):this.adsManagerIdLoaded&&this.adsManagers[this.adsManagerIdLoaded].infosTag.priority>adInfos.priority?(this.statsInfo.rtl.push(adInfos.id),this.statsInfo.tag[adInfos.id]&&(this.statsInfo.tag[adInfos.id].state="Request_Ok_too_late"),this.statsCampaign[adInfos.id].status="RequestOk",this.logInfo("REQUEST REJECTED (Better Ad ok)",adInfos.id,"log")):(this.statsCampaign[adInfos.id].status="RequestOk",this.statsInfo.rok.push(adInfos.id),this.statsInfo.tag[adInfos.id]&&(this.statsInfo.tag[adInfos.id].state="Request_Ok"),this.loadedTime[adInfos.id]=Date.now(),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsManagers[adInfos.id]=adsManagerLoadedEvent.getAdsManager(this.videoContent,this.adsRenderingSettings),this.loadEventManager(adInfos.id),this.adsManagers[adInfos.id].init(this.attributes_.width,this.attributes_.height,google.ima.ViewMode.NORMAL),this.adsManagers[adInfos.id].infosTag=adInfos,this.logInfo("REQUEST OK - Waiting for Loaded",adInfos.id,"log"))},init_default().prototype.onAdRequestRespondsWaterfall=function(adsManagerLoadedEvent){var adInfos=adsManagerLoadedEvent.getUserRequestContext();adInfos.duration=20,this.statsCampaign[adInfos.id].req=!0,this.statsCampaign[adInfos.id].reqt=Date.now()-this.requestTime[adInfos.id],this.statsCampaign[adInfos.id].status="RequestOk",this.statsInfo.rtl.push(adInfos.id),this.statsInfo.tag[adInfos.id]&&(this.statsInfo.tag[adInfos.id].state="Request_Ok"),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.loadVideoTimeout=16e3,this.adsManagers[adInfos.id]=adsManagerLoadedEvent.getAdsManager(this.videoContent,this.adsRenderingSettings),this.loadEventManager(adInfos.id),this.loadEventManagerStarted(adInfos.id),this.adsManagers[adInfos.id].init(this.attributes_.width,this.attributes_.height,google.ima.ViewMode.NORMAL),this.adsManagers[adInfos.id].infosTag=adInfos,(this.internCMIAS||adInfos.internFWIAS)&&this.executeIAS(this.adsManagers[adInfos.id]),this.logInfo("REQUEST OK - Waiting for Loaded",adInfos.id,"log")},init_default().prototype.onAdRequestError=function(adErrorEvent){var adInfos=adErrorEvent.getUserRequestContext(),adErrorEvent=adErrorEvent.getError();this.statsCampaign[adInfos.id].reqe=adErrorEvent.getErrorCode(),this.statsCampaign[adInfos.id].reqte=Date.now()-this.requestTime[adInfos.id],this.statsCampaign[adInfos.id].status="Errors",this.statsInfo.rer.push(adInfos.id),this.statsInfo.tag[adInfos.id]&&(this.statsInfo.tag[adInfos.id].state="Request_Error",this.statsInfo.tag[adInfos.id].error=adErrorEvent.getErrorCode()),this.statsInfo.rec.push({id:adInfos.id,c:adErrorEvent.getErrorCode()}),1009==adErrorEvent.getErrorCode()||304==adErrorEvent.getErrorCode()?(this.statsCampaign[adInfos.id].status="Empty",this.totalAdEmpty++):this.totalAdError++,this.logInfo("TAG says NO AD",adInfos.id,"log"),this.logInfo("ERROR",adErrorEvent,"error"),this.AdStarted||this.isWinnerTag||(this.totalAdError+this.totalAdEmpty>=this.totalAdTags&&!this.AdStarted&&(this.requestMode==this.getConst("V2_SYSTEM")?this.requestWave():(this.logInfo("ONLY ERRORS","","log"),this.errorAd("Errors"))),this.numberTagPriority[adInfos.priority]--,this.isBestCampaign())},init_default().prototype.onAdRequestErrorWaterfall=function(adErrorEvent){var adInfos=adErrorEvent.getUserRequestContext(),adErrorEvent=adErrorEvent.getError();this.statsCampaign[adInfos.id].reqe=adErrorEvent.getErrorCode(),this.statsCampaign[adInfos.id].reqte=Date.now()-this.requestTime[adInfos.id],this.statsCampaign[adInfos.id].status="Errors",this.statsInfo.rer.push(adInfos.id),this.statsInfo.tag[adInfos.id]&&(this.statsInfo.tag[adInfos.id].state="Request_Error",this.statsInfo.tag[adInfos.id].error=adErrorEvent.getErrorCode()),this.statsInfo.rec.push({id:adInfos.id,c:adErrorEvent.getErrorCode()}),1009==adErrorEvent.getErrorCode()||304==adErrorEvent.getErrorCode()?(this.statsCampaign[adInfos.id].status="Empty",this.totalAdEmpty++):this.totalAdError++,this.errorStat.push({id:adInfos.id,error:adErrorEvent.toString()}),this.logInfo("TAG says NO AD",adInfos.id,"log"),this.logInfo("ERROR",adErrorEvent,"error"),this.requestWaterfall()},init_default().prototype.loadEventManager=function(id){this.requestMode!==this.getConst("WATERFALL")?this.adsManagers[id].addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this,id)):this.adsManagers[id].addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdErrorWaterfall.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent.bind(this,id))},init_default().prototype.loadEventManagerStarted=function(id){this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.IMPRESSION,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.STOPPED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.DURATION_CHANGE,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdEvent.bind(this,id)),this.adsManagers[id].addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdEvent.bind(this,id))},init_default().prototype.onContentPauseRequested=function(){},init_default().prototype.onContentResumeRequested=function(){},init_default().prototype.adsManagersLoaded=function(adsManagerId,ad){var adInfos=this.adsManagers[adsManagerId].infosTag;if(void 0!==this.tagTimeout[adsManagerId]&&clearTimeout(this.tagTimeout[adsManagerId]),this.statsCampaign[adInfos.id].adl=!0,this.statsCampaign[adInfos.id].adlt=Date.now()-this.loadedTime[adInfos.id],this.AdStarted||this.isWinnerTag)this.adsManagerIdLoaded!=adsManagerId&&(this.statsCampaign[adInfos.id].status="Timeout",this.logInfo("TOO LATE AD (Ad already started)",this.adsManagers[adsManagerId].infosTag.id,"log"),this.destroy(adsManagerId)),this.statsInfo.atl.push(adsManagerId),this.statsInfo.tag[adsManagerId]&&(this.statsInfo.tag[adsManagerId].state="Ad_Loaded_too_late");else if(null===this.adsManagerIdLoaded||this.adsManagers[this.adsManagerIdLoaded].infosTag.priority<this.adsManagers[adsManagerId].infosTag.priority)for(var id in this.statsCampaign[adInfos.id].status="AdLoaded",null!=this.adsManagerIdLoaded&&this.destroy(this.adsManagerIdLoaded),this.statsInfo.ald.push({id:adsManagerId,t:Date.now()-this.requestTime[adsManagerId]}),this.statsInfo.tag[adsManagerId]&&(this.statsInfo.tag[adsManagerId].state="Ad_Loaded"),this.adsManagerIdLoaded=adsManagerId,this.adsManagers[adsManagerId].infosTag.duration=ad.getDuration(),this.logInfo("TAG AD OK",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log"),this.statsInfo.logs_campaign={},this.statsInfo.logs_campaign.AdId=ad.getAdId(),this.statsInfo.logs_campaign.AdSystem=ad.getAdSystem(),this.statsInfo.logs_campaign.ApiFramework=ad.getApiFramework(),this.statsInfo.logs_campaign.AdvertiserName=ad.getAdvertiserName(),this.statsInfo.logs_campaign.ContentType=ad.getContentType(),this.statsInfo.logs_campaign.CreativeAdId=ad.getCreativeAdId(),this.statsInfo.logs_campaign.CreativeId=ad.getCreativeId(),this.statsInfo.logs_campaign.DealId=ad.getDealId(),this.statsInfo.logs_campaign.Description=ad.getDescription(),this.statsInfo.logs_campaign.Duration=ad.getDuration(),this.statsInfo.logs_campaign.MediaUrl=ad.getMediaUrl(),this.statsInfo.logs_campaign.MinSuggestedDuration=ad.getMinSuggestedDuration(),this.statsInfo.logs_campaign.SkipTimeOffset=ad.getSkipTimeOffset(),this.statsInfo.logs_campaign.SurveyUrl="",this.statsInfo.logs_campaign.Title=ad.getTitle(),this.statsInfo.logs_campaign.TraffickingParameters=ad.getTraffickingParameters(),this.statsInfo.logs_campaign.TraffickingParametersString=ad.getTraffickingParametersString(),this.statsInfo.logs_campaign.UniversalAdIdValue=ad.getUniversalAdIdValue(),this.statsInfo.logs_campaign.UniversalAdIdRegistry=ad.getUniversalAdIdRegistry(),this.statsInfo.logs_campaign.UniversalAdIds=ad.getUniversalAdIds(),this.statsInfo.logs_campaign.VastMediaBitrate=ad.getVastMediaBitrate(),this.statsInfo.logs_campaign.VastMediaHeight=ad.getVastMediaHeight(),this.statsInfo.logs_campaign.VastMediaWidth=ad.getVastMediaWidth(),this.statsInfo.logs_campaign.WrapperAdIds=ad.getWrapperAdIds(),this.statsInfo.logs_campaign.Width=ad.getWidth(),this.statsInfo.logs_campaign.WrapperAdSystems=ad.getWrapperAdSystems(),this.statsInfo.logs_campaign.WrapperCreativeIds=ad.getWrapperCreativeIds(),this.statsInfo.logs_campaign.isLinear=ad.isLinear(),this.isBestCampaign(),this.adsManagers)id!=this.adsManagerIdLoaded&&this.adsManagers[id].infosTag.priority<this.adsManagers[this.adsManagerIdLoaded].infosTag.priority&&(this.destroy(id),void 0!==this.tagTimeout[id]&&clearTimeout(this.tagTimeout[id]));else this.statsInfo.ald.push({id:adsManagerId,t:Date.now()-this.requestTime[adsManagerId]}),adsManagerId&&(this.statsInfo.tag[adsManagerId].state="Ad_Loaded_too_late"),this.statsCampaign[adInfos.id].status="AdLoaded",this.logInfo("TAG REJECTED (Better Ad ok)",this.adsManagers[adsManagerId].infosTag.id,"log"),this.destroy(adsManagerId)},init_default().prototype.adsManagersLoadedWaterfall=function(adsManagerId,ad){var fDealId,dfpUrl,_this=this,adInfos=this.adsManagers[adsManagerId].infosTag;this.statsCampaign[adInfos.id].adl=!0,this.statsCampaign[adInfos.id].adlt=Date.now()-this.loadedTime[adInfos.id],this.statsCampaign[adInfos.id].status="AdLoaded",this.adsManagerIdLoaded=adsManagerId,this.adsManagers[adsManagerId].infosTag.duration=ad.getDuration(),void 0!==this.player.prebid.useDfp&&this.player.prebid.useDfp&&"1"===this.adsManagers[this.adsManagerIdLoaded].infosTag.is_hb?(this.logInfo("HEADER BIDDING - AdSystem List",[JSON.parse(JSON.stringify(ad.getWrapperAdSystems())),ad.getAdSystem()],"object"),-(this.player.adPlayerHbStats.hbwin=1)!==ad.getWrapperAdSystems().indexOf("prebid.org wrapper")||"prebid.org wrapper"===ad.getAdSystem()||-1!==ad.getWrapperAdSystems().indexOf("SpotXchange")||"SpotXchange"===ad.getAdSystem()?((adInfos=this.player.campaigns.preroll.filter(function(campaign){return campaign.id===_this.player.prebid.bidWinnerUlti})[0])&&(this.player.adPlayerHbStats.cpmvad=parseFloat(adInfos.cpm)),this.player.adPlayerHbStats.bidwinner="Prebid",adsManagerId=this.player.prebid.bidWinnerUlti,""===(fDealId=this.player.adPlayerHbStats.fdealid)||!this.player.hbDeals.hasOwnProperty(adInfos.bidder)||(adInfos=this.player.hbDeals[adInfos.bidder].filter(function(deal){return deal.dealId===fDealId})).length&&(adsManagerId=adInfos[0].dgid,this.adsManagers[this.adsManagerIdLoaded].infosTag.show_skip_ad=adInfos[0].showSkipAd,this.adsManagers[this.adsManagerIdLoaded].infosTag.skip_ad_type=adInfos[0].skipAdType,this.adsManagers[this.adsManagerIdLoaded].infosTag.skip_ad_delay=adInfos[0].skipAdDelay),this.adsManagers[this.adsManagerIdLoaded].infosTag.id=adsManagerId,this.adsManagers[adsManagerId]=this.adsManagers[this.adsManagerIdLoaded],this.statsCampaign[adsManagerId]=this.statsCampaign[this.adsManagerIdLoaded],this.adsManagerIdLoaded=adsManagerId,this.logInfo("HEADER BIDDING - Check AdSystem","Ad winner is HB Prebidjs : "+this.player.prebid.bidWinnerUlti,"log"),this.player.sendEvent("hbdrp",{res:JSON.stringify([{cp:this.player.prebid.bidWinnerUlti}])})):-1!==ad.getWrapperAdSystems().indexOf("Amazon")||"Amazon"===ad.getAdSystem()?(adInfos=this.player.campaigns.preroll.filter(function(campaign){return campaign.id===_this.player.amazon.bidWinnerUlti})[0],this.player.adPlayerHbStats.bidwinner="Amazon",this.player.adPlayerHbStats.cpmvad=parseFloat(adInfos.cpm),this.adsManagers[this.adsManagerIdLoaded].infosTag.id=this.player.amazon.bidWinnerUlti,this.adsManagers[this.player.amazon.bidWinnerUlti]=this.adsManagers[this.adsManagerIdLoaded],this.statsCampaign[this.player.amazon.bidWinnerUlti]=this.statsCampaign[this.adsManagerIdLoaded],this.adsManagerIdLoaded=this.player.amazon.bidWinnerUlti,this.player.a9Responses=[],this.logInfo("HEADER BIDDING - Check AdSystem","Ad winner is HB Amazon : "+this.player.amazon.bidWinnerUlti,"log"),this.player.sendEvent("hbdrp",{res:JSON.stringify([{cp:this.player.amazon.bidWinnerUlti}])})):(this.checkGamDeal(ad),this.player.adPlayerHbStats.bidwinner="Google",this.logInfo("HEADER BIDDING - Check AdSystem","Ad winner is DFP","log"),adsManagerId=void 0!==this.adsManagers[this.adsManagerIdLoaded].infosTag.bid.params.currency?this.adsManagers[this.adsManagerIdLoaded].infosTag.bid.params.currency:"EUR",adInfos=void 0!==this.player.prebid.bidWinner&&void 0!==this.player.prebid.bidWinner.pbCg?this.player.prebid.bidWinner.pbCg:void 0!==this.adsManagers[this.adsManagerIdLoaded].infosTag.bid.params.bidMin?this.adsManagers[this.adsManagerIdLoaded].infosTag.bid.params.bidMin:0,dfpUrl=void 0!==this.player.prebid.urlDfp?this.player.prebid.urlDfp:"",this.player.sendEvent("hbdrp",{res:JSON.stringify([{cp:this.adsManagerIdLoaded,cpm:adInfos,cur:adsManagerId,dfpurl:dfpUrl}])})),this.hbCampaignId=this.adsManagers[this.adsManagerIdLoaded].infosTag.id):"sfxv5"!==this.adsManagers[this.adsManagerIdLoaded].infosTag.id&&!this.player.hbDeals.hasOwnProperty("dfp")||this.checkGamDeal(ad),void 0!==this.player.adlooxParams.clientId&&this.createAdLooxTag(ad,this.imaAdDatas),this.logInfo("TAG AD OK",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log"),this.statsInfo.logs_campaign={},this.statsInfo.logs_campaign.AdId=ad.getAdId(),this.statsInfo.logs_campaign.AdSystem=ad.getAdSystem(),this.statsInfo.logs_campaign.ApiFramework=ad.getApiFramework(),this.statsInfo.logs_campaign.AdvertiserName=ad.getAdvertiserName(),this.statsInfo.logs_campaign.ContentType=ad.getContentType(),this.statsInfo.logs_campaign.CreativeAdId=ad.getCreativeAdId(),this.statsInfo.logs_campaign.CreativeId=ad.getCreativeId(),this.statsInfo.logs_campaign.DealId=ad.getDealId(),this.statsInfo.logs_campaign.Description=ad.getDescription(),this.statsInfo.logs_campaign.Duration=ad.getDuration(),this.statsInfo.logs_campaign.MediaUrl=ad.getMediaUrl(),this.statsInfo.logs_campaign.MinSuggestedDuration=ad.getMinSuggestedDuration(),this.statsInfo.logs_campaign.SkipTimeOffset=ad.getSkipTimeOffset(),this.statsInfo.logs_campaign.SurveyUrl="",this.statsInfo.logs_campaign.Title=ad.getTitle(),this.statsInfo.logs_campaign.TraffickingParameters=ad.getTraffickingParameters(),this.statsInfo.logs_campaign.TraffickingParametersString=ad.getTraffickingParametersString(),this.statsInfo.logs_campaign.UniversalAdIdValue=ad.getUniversalAdIdValue(),this.statsInfo.logs_campaign.UniversalAdIdRegistry=ad.getUniversalAdIdRegistry(),this.statsInfo.logs_campaign.UniversalAdIds=ad.getUniversalAdIds(),this.statsInfo.logs_campaign.VastMediaBitrate=ad.getVastMediaBitrate(),this.statsInfo.logs_campaign.VastMediaHeight=ad.getVastMediaHeight(),this.statsInfo.logs_campaign.VastMediaWidth=ad.getVastMediaWidth(),this.statsInfo.logs_campaign.WrapperAdIds=ad.getWrapperAdIds(),this.statsInfo.logs_campaign.Width=ad.getWidth(),this.statsInfo.logs_campaign.WrapperAdSystems=ad.getWrapperAdSystems(),this.statsInfo.logs_campaign.WrapperCreativeIds=ad.getWrapperCreativeIds(),this.statsInfo.logs_campaign.isLinear=ad.isLinear(),this.checkTimePreroll(ad.getDuration())?this.adReadyWaterfall():this.doublePreroll()},init_default().prototype.checkGamDeal=function(ad){this.logInfo("IMA AD CREATIVE ID",ad.getCreativeId(),"log"),this.logInfo("IMA AD LINE ITEM ID",ad.getWrapperAdIds(),"log");var gamDealId=ad.getDealId(),gamWrapperAdIds=ad.getWrapperAdIds(),gamCreativeId=ad.getCreativeId();this.player.hbDeals.hasOwnProperty("dfp")&&(ad=[],""!==gamDealId?ad=this.player.hbDeals.dfp.filter(function(deal){return deal.dealId===gamDealId}):0<gamWrapperAdIds.length?ad=this.player.hbDeals.dfp.filter(function(deal){return gamWrapperAdIds.includes(deal.dealId)}):""!==gamCreativeId&&(ad=this.player.hbDeals.dfp.filter(function(deal){return-1!==deal.creativeIds.indexOf(parseInt(gamCreativeId))})),0<ad.length&&(this.logInfo("CHANGE ID",ad[0].dgid,"log"),this.adsManagers[this.adsManagerIdLoaded].infosTag.id=ad[0].dgid,this.adsManagers[this.adsManagerIdLoaded].infosTag.show_skip_ad=ad[0].showSkipAd,this.adsManagers[this.adsManagerIdLoaded].infosTag.skip_ad_type=ad[0].skipAdType,this.adsManagers[this.adsManagerIdLoaded].infosTag.skip_ad_delay=ad[0].skipAdDelay,this.adsManagers[ad[0].dgid]=this.adsManagers[this.adsManagerIdLoaded],this.statsCampaign[ad[0].dgid]=this.statsCampaign[this.adsManagerIdLoaded],this.adsManagerIdLoaded=ad[0].dgid),-1<(ad=this.player.hbDeals.dfp.indexOf(ad[0]))&&this.player.hbDeals.dfp.splice(ad,1))},init_default().prototype.onAdEvent=function(adsManagerId,adEvent){try{this.adBitrate=adEvent.getAd().getVastMediaBitrate()}catch(e){}if(adEvent.type===google.ima.AdEvent.Type.LOADED&&(this.imaAdDatas||(this.imaAdDatas=adEvent.getAdData()),this.requestMode===this.getConst("WATERFALL")?this.adsManagersLoadedWaterfall(adsManagerId,adEvent.getAd()):this.adsManagersLoaded(adsManagerId,adEvent.getAd())),null===this.adsManagerIdLoaded||adsManagerId==this.adsManagerIdLoaded||this.requestMode==this.getConst("WATERFALL"))switch(adEvent.type){case google.ima.AdEvent.Type.STARTED:(this.parameters_.params.extern||this.parameters_.params.fromDtk)&&this.callEvent_("AdStarted"),this.events.AdStarted||(this.events.AdStarted=!0,this.callEvent_("AdVideoStart"));break;case google.ima.AdEvent.Type.IMPRESSION:this.events.AdImpression||this.onAdImpression();break;case google.ima.AdEvent.Type.SKIPPED:this.callEvent_("AdSkipped"),this.player.isSpottInit&&this.player.spottPlayer.hideProducts();break;case google.ima.AdEvent.Type.CLICK:this.onClick();break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.events.AdVideoFirstQuartile||this.quartilesEvents("25percent");break;case google.ima.AdEvent.Type.MIDPOINT:this.events.AdVideoMidpoint||this.quartilesEvents("50percent");break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.events.AdVideoThirdQuartile||this.quartilesEvents("75percent");break;case google.ima.AdEvent.Type.COMPLETE:this.events.AdVideoComplete||this.quartilesEvents("100percent");break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.double_preroll&&2!==this.player.nb_preroll?(this.player.double_preroll||1===this.player.nb_preroll)&&this.player.timePreroll>this.player.minTimeDoublePreroll?this.doublePreroll():(this.player.double_preroll||this.player.nb_preroll,this.stopAd()):this.stopAd();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:break;case google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED:this.callEvent_("AdSkippableStateChange");break;case google.ima.AdEvent.Type.DURATION_CHANGE:this.callEvent_("AdDurationChange");break;case google.ima.AdEvent.Type.VOLUME_CHANGED:break;case google.ima.AdEvent.Type.PAUSED:this.callEvent_("AdPaused");break;case google.ima.AdEvent.Type.RESUMED:this.callEvent_("AdPlaying")}},init_default().prototype.onAdImpression=function(){if(!this.events.AdImpression){this.sendImpRequestStat(),this.statsCampaign[this.adsManagerIdLoaded].aw=!0,this.statsCampaign[this.adsManagerIdLoaded].prt=Date.now()-this.startTime[this.adsManagerIdLoaded],this.statsCampaign[this.adsManagerIdLoaded].status="Print",this.statsSite.inv="Print",this.statsSite.avgt=Date.now()-this.start,this.statsInfo.stt.push({id:this.adsManagerIdLoaded,t:Date.now()-this.startTime[this.adsManagerIdLoaded]}),this.statsInfo.inv="Print",this.statsInfo.tag[this.adsManagerIdLoaded]&&(this.statsInfo.tag[this.adsManagerIdLoaded].state="Print"),this.events.AdImpression=!0,this.sendStats(),clearTimeout(this.timeoutImpressionId),this.callEvent_("AdImpression"),this.isPlaying=!0;var periodicCallback=setInterval(function(){this.callEvent_("AdDurationChange"),this.callEvent_("AdRemainingTimeChange"),void 0===this.adsManagers[this.adsManagerIdLoaded].adways&&this.player.notify("AdRemainingTime",this.adsManagers[this.adsManagerIdLoaded].getRemainingTime())}.bind(this),1e3);switch(this.subscribe(function(){clearInterval(periodicCallback)},"AdVideoComplete"),this.subscribe(function(){clearInterval(periodicCallback)},"AdSkipped"),this.subscribe(function(){clearInterval(periodicCallback)},"VideoComplete"),this.adsManagers[this.adsManagerIdLoaded].infosTag.roll_type){case"preroll_mobile":case"preroll":this.player.prerollAlreadyPlayed.push(this.adsManagerIdLoaded),this.player.nb_preroll++;break;case"overlay":this.player.overlayAlreadyPlayed.push(this.adsManagerIdLoaded)}}},init_default().prototype.adComplete=function(){var adInfo;this.events.AdVideoComplete||(this.events.AdVideoComplete=!0,this.sendAdTimeRequestStat("100percent"),adInfo={type:"vpaidEnd",rdId:this.rdId},this.postMessageSender.send(adInfo,"*"),this.player.isSpottInit&&this.player.spottPlayer.hideProducts(),this.callEvent_("AdVideoComplete"))},init_default().prototype.onAdError=function(idAdsManager,adErrorEvent){var adInfos,adErrorEvent=adErrorEvent.getError();this.statsCampaign[idAdsManager].status="Errors",1009==adErrorEvent.getErrorCode()||304==adErrorEvent.getErrorCode()?(this.statsCampaign[adInfos.id].status="Empty",this.totalAdEmpty++):this.totalAdError++,idAdsManager==this.adsManagerIdLoaded&&this.AdStarted?(this.statsInfo.awe.push(idAdsManager),this.statsInfo.tag[idAdsManager]&&(this.statsInfo.tag[idAdsManager].state="Winner_Tag_Error",this.statsInfo.tag[idAdsManager].error=adErrorEvent.getErrorCode()),this.statsInfo.wec.push({id:idAdsManager,c:adErrorEvent.getErrorCode()}),this.statsCampaign[idAdsManager].awe=adErrorEvent.getErrorCode(),this.statsCampaign[idAdsManager].awte=Date.now()-this.startTime[this.adsManagerIdLoaded],this.logInfo("PLAYING TAG ERROR","","log"),this.logInfo("ERROR",adErrorEvent,"error"),this.errorAd("Errors")):void 0!==this.adsManagers&&void 0!==this.adsManagers[idAdsManager]&&(this.statsCampaign[idAdsManager].adle=adErrorEvent.getErrorCode(),this.statsCampaign[idAdsManager].adlte=Date.now()-this.startTime[this.adsManagerIdLoaded],this.statsInfo.aer.push(idAdsManager),adInfos=this.adsManagers[idAdsManager].infosTag,this.statsInfo.tag[idAdsManager]&&(this.statsInfo.tag[idAdsManager].state="Ad_Error",this.statsInfo.tag[idAdsManager].error=adErrorEvent.getErrorCode()),this.statsInfo.aec.push({id:idAdsManager,c:adErrorEvent.getErrorCode()}),this.logInfo("TAG ERROR",idAdsManager,"log"),this.logInfo("ERROR",adErrorEvent,"error"),this.destroy(idAdsManager)),this.AdStarted||void 0===adInfos||(this.totalAdError+this.totalAdEmpty>=this.totalAdTags&&!this.AdStarted&&(this.requestMode==this.getConst("V2_SYSTEM")?this.requestWave():this.requestMode==this.getConst("WATERFALL")?this.requestWaterfall():(this.logInfo("ONLY ERRORS","","log"),this.errorAd("Errors"))),this.numberTagPriority[adInfos.priority]--,this.isBestCampaign())},init_default().prototype.onAdErrorWaterfall=function(idAdsManager,adErrorEvent){adErrorEvent=adErrorEvent.getError();void 0!==this.adsManagers&&void 0!==this.adsManagers[idAdsManager]&&(this.statsCampaign[idAdsManager].status="Errors",this.statsCampaign[idAdsManager].awe=adErrorEvent.getErrorCode(),this.statsCampaign[idAdsManager].awte=Date.now()-this.startTime[this.adsManagerIdLoaded],1009==adErrorEvent.getErrorCode()||304==adErrorEvent.getErrorCode()?(this.statsCampaign[idAdsManager].status="Empty",this.totalAdEmpty++):this.totalAdError++,this.AdStarted=0,this.isWinnerTag=0,this.adsManagerIdLoaded=null,this.logInfo("TAG ERROR",idAdsManager,"log"),this.logInfo("ERROR",adErrorEvent,"error"),this.destroy(idAdsManager)),this.requestWaterfall()},init_default().prototype.onClick=function(){(this.parameters_.params.extern||this.parameters_.params.fromDtk)&&this.sendClickRequestStat(),this.callEvent_("AdClickThru")},init_default().prototype.onAdSkip=function(){this.callEvent_("AdSkip")},init_default().prototype.onAdStopped=function(){this.callEvent_("AdStopped")},init_default().prototype.onNormeValidated=function(n){n.ad&&this.sendUpdatedStats("normes")},init_default().prototype.quartilesEvents=function(time){switch(time){case"25percent":this.sendAdTimeRequestStat("25percent"),this.callEvent_("AdVideoFirstQuartile"),this.events.AdVideoFirstQuartile=!0,this.lastQuartile=25,this.sendUpdatedStats("quartile");break;case"50percent":this.sendAdTimeRequestStat("50percent"),this.callEvent_("AdVideoMidpoint"),this.events.AdVideoMidpoint=!0,this.lastQuartile=50,this.sendUpdatedStats("quartile");break;case"75percent":this.sendAdTimeRequestStat("75percent"),this.callEvent_("AdVideoThirdQuartile"),this.events.AdVideoThirdQuartile=!0,this.lastQuartile=75,this.sendUpdatedStats("quartile");break;case"100percent":this.lastQuartile=100,this.sendUpdatedStats("quartile"),this.adComplete()}},init_default().prototype.checkVmap=function(){null!=this.statsInfo.logs_campaign.adPodinfo&&1<this.statsInfo.logs_campaign.adPodinfo.g.totalAds&&2==this.statsInfo.logs_campaign.adPodinfo.g.adPosition&&(this.player.podInfo=this.statsInfo.logs_campaign.adPodinfo.g,this.AdStarted=0,this.destroyed=!1,this.isPlaying=!1,this.events={AdStarted:!1,AdImpression:!1,AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1,AdVideoComplete:!1,AdVideo10s:!1,AdVideo15s:!1,AdVideo20s:!1,AdVideo25s:!1,AdVideo30s:!1,AdVideo60s:!1,AdVideo90s:!1})},init_default().prototype.doublePreroll=function(){var _this2=this;this.player.notify("resetVisibility"),this.player.infos.preroll_inventory_sent=!1,this.player.inventoryStat("preroll"),this.sendUpdatedStats("inv_double_preroll");if(this.player.adapter.addLoading(),this.player.notify("AtEndPubFirstPreroll"),this.player.double_preroll&&1===this.player.nb_preroll){if(this.player._state="before_preroll",this.AdStarted=0,this.destroyed=!1,this.isPlaying=!1,this.events={AdStarted:!1,AdImpression:!1,AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1,AdVideoComplete:!1,AdVideo10s:!1,AdVideo15s:!1,AdVideo20s:!1,AdVideo25s:!1,AdVideo30s:!1,AdVideo60s:!1,AdVideo90s:!1},this.stats.imp=!1,this.stats.unsold=!1,this.player.adPlayer.test=!1,1===this.statsSite.hb&&(this.statsSite.hb=0),0===this.add_hb_campaigns){var priority=100,p2Campaigns=(this.ads=[],[]),p2Deals=[],deals=[],deals=this.player.hbDeals.hasOwnProperty("dfp")?[].concat(p2Deals,_toConsumableArray(this.player.hbDeals.dfp)):[].concat(p2Deals),dealIds=[],dbAds=(deals.forEach(function(deal){_this2.player.isAdFraudInventory&&(!_this2.player.isAdFraudInventory||deal.isAdfraudBlocked)||dealIds.push(deal.dealId)}),[]);if(void 0!==this.player.campaigns.dbpreroll&&0<this.player.campaigns.dbpreroll.length)for(var p2CampaignKey in this.player.campaigns.dbpreroll){var url,tag,p2CampaignKey=this.player.campaigns.dbpreroll[p2CampaignKey];this.player.prerollAlreadyPlayed.includes(p2CampaignKey.id)||"1"===p2CampaignKey.db_rang1&&(url=p2CampaignKey.script,-1!==(indexstr=(url=-1!==p2CampaignKey.script.indexOf("[DB_PREROLL_MAX_AD_DURATION]")?url.replace("[DB_PREROLL_MAX_AD_DURATION]",(1e3*this.player.timePreroll).toString()):url).indexOf("cust_params="))?url=url.slice(0,indexstr+12)+"dtk_perf%3D"+dealIds.join("%2C")+"%26"+url.slice(indexstr+12):url+="&cust_params=dtk_perf%3D"+dealIds.join("%2C"),tag=url,this.add_hb_campaigns++,dbAds.push({roll_type:"preroll",id:p2CampaignKey.id,priorite:p2CampaignKey.priority,priority:p2CampaignKey.priority,script:url,tag:tag,autoplay:"2"}))}if(0<dbAds.length&&(dbAds.sort(function(a,b){return a.priority>b.priority?-1:1}),this.ads.push.apply(this.ads,dbAds)),0<this.player.autoPilotedP2Campaigns.preroll.length)for(var _p2CampaignKey in this.player.autoPilotedP2Campaigns.preroll){_p2CampaignKey=this.player.autoPilotedP2Campaigns.preroll[_p2CampaignKey];null!==_p2CampaignKey.deal_id&&"dfp"===_p2CampaignKey.deal_ssp?p2Deals.push({dealId:_p2CampaignKey.deal_id}):p2Campaigns.push({id:_p2CampaignKey.id,cpm:_p2CampaignKey.cpm,vastUrl:_p2CampaignKey.script})}p2Campaigns.sort(function(response1,response2){return response2.priority-response1.priority});for(var i=0;i<p2Campaigns.length;i++)!this.player.prerollAlreadyPlayed.includes(p2Campaigns[i].id)&&i<2&&(this.add_hb_campaigns++,this.ads.push({roll_type:"preroll",id:p2Campaigns[i].id,script:p2Campaigns[i].vastUrl,tag:p2Campaigns[i].vastUrl,priorite:--priority,priority:priority,autoplay:"2"}));var hbToGagP2Campaigns=[];if(0<this.player.autoPilotedGagToHbP2Campaigns.preroll.length)for(var hbToGagP2CampaignKey in this.player.autoPilotedGagToHbP2Campaigns.preroll){hbToGagP2CampaignKey=this.player.autoPilotedGagToHbP2Campaigns.preroll[hbToGagP2CampaignKey];hbToGagP2Campaigns.push({id:hbToGagP2CampaignKey.id,cpm:hbToGagP2CampaignKey.cpm,vastUrl:hbToGagP2CampaignKey.script})}this.player.hbResponses=this.player.hbResponses.concat(hbToGagP2Campaigns);this.player.hbResponses.sort(function(response1,response2){return response2.cpm-response1.cpm});for(var a9VastUrl,_i=0;_i<this.player.hbResponses.length;_i++)!this.player.prerollAlreadyPlayed.includes(this.player.hbResponses[_i].id)&&_i<2&&(this.add_hb_campaigns++,this.ads.push({roll_type:"preroll",id:this.player.hbResponses[_i].id,script:this.player.hbResponses[_i].vastUrl,tag:this.player.hbResponses[_i].vastUrl,priorite:--priority,priority:priority,autoplay:"2"}));0<this.player.a9Responses.length&&(void 0!==(deals=this.player.a9Responses[0]).amzniid&&(a9VastUrl="https://aax.amazon-adsystem.com/e/dtb/vast?b="+deals.amzniid+"&rnd=[RANDOM]&pp="+deals.amznbid,this.add_hb_campaigns++,this.ads.push({roll_type:"preroll",id:deals.id,script:a9VastUrl,tag:a9VastUrl,priorite:--priority,priority:priority,autoplay:"2"}))),priority--;var dbUnpriorisedAds=[];if(void 0!==this.player.campaigns.dbpreroll&&0<this.player.campaigns.dbpreroll.length)for(var _p2CampaignKey2 in this.player.campaigns.dbpreroll){var _url,indexstr,_tag,_p2CampaignKey2=this.player.campaigns.dbpreroll[_p2CampaignKey2];this.player.prerollAlreadyPlayed.includes(_p2CampaignKey2.id)||0<_p2CampaignKey2.db_rang1||(_url=_p2CampaignKey2.script,-1!==(indexstr=(_url=-1!==_p2CampaignKey2.script.indexOf("[DB_PREROLL_MAX_AD_DURATION]")?_url.replace("[DB_PREROLL_MAX_AD_DURATION]",(1e3*this.player.timePreroll).toString()):_url).indexOf("cust_params="))?_url=_url.slice(0,indexstr+12)+"dtk_perf%3D"+dealIds.join("%2C")+"%26"+_url.slice(indexstr+12):_url+="&cust_params=dtk_perf%3D"+dealIds.join("%2C"),_tag=_url,this.add_hb_campaigns++,dbUnpriorisedAds.push({roll_type:"preroll",id:_p2CampaignKey2.id,priorite:1,priority:1,script:_url,tag:_tag,autoplay:"2"}))}0<dbUnpriorisedAds.length?this.ads.push.apply(this.ads,dbUnpriorisedAds):(deals="https://pubads.g.doubleclick.net/gampad/ads?iu=/34631970/ca-video-pub-7026431251527825-tag/video-dp&description_url=[URL]&tfcd=0&npa=0&sz=640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=[RANDOM]&max_ad_duration="+1e3*this.player.timePreroll,deals+="&cust_params=dtk_perf%3D"+dealIds.join("%2C"),this.add_hb_campaigns++,this.ads.push({roll_type:"preroll",id:"sfxv5",script:deals,tag:deals,priorite:1,priority:1,autoplay:"2"}));var prerollAds=[];if(void 0!==this.player.campaigns.preroll&&0<this.player.campaigns.preroll.length)for(var _p2CampaignKey3 in this.player.campaigns.preroll){var _url3,_tag2,_p2CampaignKey3=this.player.campaigns.preroll[_p2CampaignKey3];this.player.prerollAlreadyPlayed.includes(_p2CampaignKey3.id)||1===parseInt(_p2CampaignKey3.is_hb)||(_url3=_p2CampaignKey3.script,_tag2=_url3=-1!==_p2CampaignKey3.script.indexOf("[DB_PREROLL_MAX_AD_DURATION]")?_url3.replace("[DB_PREROLL_MAX_AD_DURATION]",(1e3*this.player.timePreroll).toString()):_url3,this.add_hb_campaigns++,prerollAds.push({roll_type:"preroll",id:_p2CampaignKey3.id,priorite:_p2CampaignKey3.priority,priority:_p2CampaignKey3.priority,script:_url3,tag:_tag2,autoplay:"2"}))}0<prerollAds.length&&(prerollAds.sort(function(a,b){return a.priority>b.priority?-1:1}),this.ads.push.apply(this.ads,prerollAds)),4<this.ads.length&&(this.ads=this.ads.slice(0,4))}this.player.logInfo("Double Preroll - Tableau",this.ads,"object"),this.requestWaterfall()}},init_default().prototype.checkTimePreroll=function(timePreroll){return void 0===timePreroll||-1===timePreroll?(this.player.logInfo("Time Preroll - Time undefined","log"),!0):0<=this.player.timePreroll-timePreroll||0===this.player.nb_preroll?(this.player.logInfo("Time Preroll - Time left",this.player.timePreroll+" > ou = "+timePreroll+" (durée de la pub)","log"),this.player.timePreroll=this.player.timePreroll-timePreroll,!0):(this.player.logInfo("Time Preroll - Not Enought Time",this.player.timePreroll+" < "+timePreroll+" (durée de la pub)","log"),!1)},init_default().prototype.tryToStart=function(){void 0!==this.adsManagers[this.adsManagerIdLoaded]&&void 0!==this.adsManagers[this.adsManagerIdLoaded].infosTag&&1===parseInt(this.adsManagers[this.adsManagerIdLoaded].infosTag.invisible)&&(this.playerLoaded=!0),this.isWinnerTag&&this.playerLoaded&&!this.AdStarted&&(this.callEvent_("AdLoaded"),setTimeout(function(){this.AdStarted||this.readyToStart()}.bind(this),20)),this.timeoutOver&&this.playerLoaded&&!this.isWinnerTag&&this.adReady(!0)},init_default().prototype.playerReady=function(){this.playerReadyWithPreview=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this.playerLoaded=!0,this.noAd&&this.errorAd(),this.tryToStart()},init_default().prototype.playerNotReady=function(){this.playerLoaded=!1},init_default().prototype.readyToStart=function(){var adPlayer;this.isWinnerTag&&!this.AdStarted&&null!=this.adsManagerIdLoaded&&(this.AdStarted=!0,this.ctpAd=!1,this.resizeAd(this.attributes_.width,this.attributes_.height,"normal"),"no"==this.player.getInfo("autoplay")||parseInt(this.adsManagers[this.adsManagerIdLoaded].infosTag.autoplay)?!this.isVisibilityRespected()||!this.player.isVisible()&&null!==this.player.getInfo("pause_me")&&this.player.getInfo("pause_me")?(this.logInfo("Waiting visibility before Start",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log"),this.waitingForVisiToStart=!0):(this.parameters_.params.extern&&this.sendInventoryRequestStat(),this.adStart()):(this.ctpAd=!0,this.player.adapter.removeLoading(),this.player.setVolume(50),(adPlayer=this).player.one("custom-bigplay-click",function(e){adPlayer.adStart()})))},init_default().prototype.adStart=function(){this.ctpAd||!this.parameters_.params.automute&&!this.isMobile?this.setAdVolume(this.player.getVolume()/100):this.setAdVolume(0),this.startTime[this.adsManagerIdLoaded]=Date.now(),this.logInfo("TAG START",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log"),this.adsManagers[this.adsManagerIdLoaded].start(),this.player.useSpott&&"brandcontent"!==this.player.infos.currentRoll&&this.player.spottPlayer.launchDeal(this.player.adPlayerHbStats.fdealid)},init_default().prototype.adReady=function(lastChance){if(this.AdStarted||this.isWinnerTag||null==this.adsManagerIdLoaded)void 0!==lastChance&&lastChance&&this.errorAd("TimeoutVsync");else{for(var id in clearTimeout(this.timeoutId),this.adsManagers)void 0!==this.tagTimeout[id]&&clearTimeout(this.tagTimeout[id]),id!=this.adsManagerIdLoaded&&this.destroy(id);this.setWinnerTag(),this.loadEventManagerStarted(this.adsManagerIdLoaded),this.tryToStart()}},init_default().prototype.setWinnerTag=function(){var _this=this,winnerCampaign=(this.statsCampaign[this.adsManagerIdLoaded].aw=!0,this.statsSite.idc=this.statsCampaign[this.adsManagerIdLoaded].id,this.statsSite.nc=this.statsCampaign[this.adsManagerIdLoaded].nc,this.statsSite.cpmvad=parseFloat(this.statsCampaign[this.adsManagerIdLoaded].cpmvad),1===this.statsSite.hb&&1!==this.player.hbCampaignIds.indexOf(this.adsManagerIdLoaded)&&(winnerCampaign=this.player.campaigns.preroll.filter(function(campaign){return campaign.id===_this.adsManagerIdLoaded&&void 0!==campaign.bid})[0],this.statsSite.idc=winnerCampaign.id,this.statsSite.nc=winnerCampaign.nc,this.statsSite.cpmvad=parseFloat(winnerCampaign.cpm)),this.statsInfo.awn.push(this.adsManagerIdLoaded),this.statsInfo.tag[this.adsManagerIdLoaded]&&(this.statsInfo.tag[this.adsManagerIdLoaded].state="Winner_Tag"),this.isWinnerTag=!0,this.idTagList.indexOf(this.adsManagerIdLoaded));this.idTagList.splice(winnerCampaign,1),this.logInfo("WINNER TAG READY",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log"),this.parameters_.params.extern||(winnerCampaign={type:"allads",allads:this.allads},this.postMessageSender.send(winnerCampaign,"*"),winnerCampaign={type:"vpaid",ad:this.adsManagers[this.adsManagerIdLoaded].infosTag,rdId:this.rdId},winnerCampaign=JSON.parse(JSON.stringify(winnerCampaign)),this.postMessageSender.send(winnerCampaign,"*"),this.preview=parseInt(this.adsManagers[this.adsManagerIdLoaded].infosTag.preview)||this.preview,this.player&&this.preview&&this.player.notify("previewAdReady"))},init_default().prototype.adReadyWaterfall=function(){clearTimeout(this.timeoutId),this.setWinnerTag(),this.createMoatInstance(),this.preview&&!this.playerReadyWithPreview||this.tryToStart(),this.resizeAd(this.attributes_.width,this.attributes_.height,"normal"),this.startTime[this.adsManagerIdLoaded]=Date.now(),window.parent.postMessage("adReady","*"),this.logInfo("TAG WILL BEGIN",this.adsManagers[this.adsManagerIdLoaded].infosTag.id,"log")},init_default().prototype.isBestCampaign=function(){if(this.adsManagerIdLoaded&&!this.AdStarted&&!this.isWinnerTag){for(var priority in this.numberTagPriority)if(parseInt(priority)>parseInt(this.adsManagers[this.adsManagerIdLoaded].infosTag.priority)&&0<this.numberTagPriority[priority])return!1;this.adReady()}},init_default().prototype.requestFirstWave=function(){for(var endOfFirstWave=!1;!endOfFirstWave;)endOfFirstWave=this.requestSureTags(!0)},init_default().prototype.requestWave=function(){if(this.totalAdError+this.totalAdEmpty>=this.maxTagCalled&&!this.AdStarted)this.logInfo("ONLY ERRORSs","","log"),this.errorAd("Errors");else for(var w=0;w<this.nextWaveRequest;w++)this.requestSureTags(!1)},init_default().prototype.requestWaterfall=function(){var indexNextAd;0<this.ads.length&&(indexNextAd=-1,0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)?this.ads.some(function(ad,i){if(!ad.alreadySend)return indexNextAd=i,!0}):indexNextAd=this.ads.findIndex(function(ad){return!ad.alreadySend}),-1!==indexNextAd||this.AdStarted?(this.indexCallPreroll++,this.ads[indexNextAd].alreadySend=!0,this.requestOneTag(this.ads[indexNextAd])):(this.logInfo("ONLY ERRORS","","log"),this.errorAd("Errors")))},init_default().prototype.orderTag=function(){this.ads.sort(function(a,b){return parseInt(a.priority)<parseInt(b.priority)?1:parseInt(a.priority)>parseInt(b.priority)?-1:0})},init_default().prototype.requestSureTags=function(sendUntilSureTag){if(sendUntilSureTag=void 0!==sendUntilSureTag&&!!sendUntilSureTag,this.indexTag>=this.ads.length)return!0;var adInfos=this.ads[this.indexTag],adInfos=this.requestOneTag(adInfos);return this.indexTag++,!!(sendUntilSureTag&&adInfos&&adInfos.sure_tag)},init_default().prototype.requestAllTags=function(){for(var i=0;i<this.ads.length;i++){var adInfos=this.ads[i];this.requestOneTag(adInfos)}},init_default().prototype.removeIAS=function(adInfos){var matchedTagWithoutIas;return adInfos.internFWIAS=!1,(this.internIAS||-1!=this.camp_ias.indexOf(adInfos.id))&&adInfos.tag.match(/fw\.adsafeprotected\.com.*\/(\d+)\/(\d+)\/skeleton\.js.*originalVast=(.*)/)?(matchedTagWithoutIas=adInfos.tag.match(/fw\.adsafeprotected\.com.*\/(\d+)\/(\d+)\/skeleton\.js.*originalVast=(.*)/),adInfos.advEntityId=matchedTagWithoutIas[1],adInfos.pubEntityId=matchedTagWithoutIas[2],adInfos.tag=this.replaceMacro(this.addGdprVars(matchedTagWithoutIas[3])),adInfos.internFWIAS=!0,adInfos.sure_tag=!0,this.logInfo("IAS activé pour "+adInfos.id,"","log")):(this.internIAS||-1!=this.camp_ias.indexOf(adInfos.id))&&adInfos.tag_response&&adInfos.tag_response.VASTAdTagURI&&adInfos.tag_response.VASTAdTagURI.match(/fw\.adsafeprotected\.com.*\/(\d+)\/(\d+)\/skeleton\.js.*originalVast=(.*)/)&&(matchedTagWithoutIas=adInfos.tag_response.VASTAdTagURI.match(/fw\.adsafeprotected\.com.*\/(\d+)\/(\d+)\/skeleton\.js.*originalVast=(.*)/),adInfos.advEntityId=matchedTagWithoutIas[1],adInfos.pubEntityId=matchedTagWithoutIas[2],adInfos.tag=this.replaceMacro(this.addGdprVars(matchedTagWithoutIas[3])),adInfos.tag_response.VASTAdTagURI=adInfos.tag,adInfos.internFWIAS=!0,adInfos.sure_tag=!0,this.logInfo("IAS activé pour "+adInfos.id,"","log")),adInfos},init_default().prototype.requestOneTag=function(adInfos){var _this=this;if(this.tooMuchViews(adInfos))return this.maxTagCalled--,this.requestMode==this.getConst("waterfall")&&this.requestWaterfall(),!1;adInfos.tag=this.replaceMacro(this.addGdprVars(adInfos.tag));var dealIds,deals=[],deals=(this.player.hbDeals.hasOwnProperty("dfp")&&(deals=requests_toConsumableArray(this.player.hbDeals.dfp),dealIds=[],deals.forEach(function(deal){_this.player.isAdFraudInventory&&(!_this.player.isAdFraudInventory||deal.isAdfraudBlocked||1!=deal.autopilot)||dealIds.push(deal.dealId)}),-1!==(deals=adInfos.tag.indexOf("cust_params="))?adInfos.tag=adInfos.tag.slice(0,deals+12)+"dtk_perf%3D"+dealIds.join("%2C")+"%26"+adInfos.tag.slice(deals+12):adInfos.tag+="&cust_params=dtk_perf%3D"+dealIds.join("%2C")),adInfos.sure_tag=!!adInfos.sure_tag,(adInfos=this.removeIAS(adInfos)).stats=this.statsCampaign,this.numberTagPriority[adInfos.priority]=void 0===this.numberTagPriority[adInfos.priority]?1:this.numberTagPriority[adInfos.priority]+1,this.idTagList.push(adInfos.id),this.allads.push({id:adInfos.id}),new google.ima.AdsRequest),tagResponse=this.generateResponseTag(adInfos);return(tagResponse=tagResponse||void 0===adInfos.tagResponse?tagResponse:adInfos.tagResponse)?(deals.adsResponse=tagResponse,this.logInfo("TAG REQUEST PRECHARGE",adInfos.id+" -- "+adInfos.priority+" -- "+adInfos.tagResponse,"log")):adInfos.prebidResponse&&adInfos.prebidResponse.responseVast?(deals.adsResponse=adInfos.prebidResponse.responseVast,this.logInfo("TAG @-PREBID-@ PRECHARGE",adInfos.id+" -- "+adInfos.priority+" -- "+adInfos.tag,"log")):this.logInfo("TAG REQUEST",adInfos.id+" -- "+adInfos.priority+" -- "+adInfos.tag,"log"),deals.adTagUrl=adInfos.tag,deals.linearAdSlotWidth=this.attributes_.width,deals.linearAdSlotHeight=this.attributes_.height,"overlay"!==adInfos.roll_type&&"overlay_mobile"!==adInfos.roll_type||-1===adInfos.tag.indexOf("contents.adpaths.com")&&-1===adInfos.tag.indexOf("&magic_code=1")?this.adsLoader.requestAds(deals,adInfos):(adInfos.tag_matched="",this.adsManagerIdLoaded=adInfos.id,this.adsManagers[adInfos.id]={infosTag:adInfos,adways:!0},this.statsCampaign[adInfos.id]={status:"RequestOk"},this.AdwaysReady?this.player.adwaysVastLoader=this.requestAdways(adInfos.script,this.player.adapter.videojs):this.player.addListener("adways-ready",function(){this.player.adwaysVastLoader=this.requestAdways(adInfos.script,this.player.adapter.videojs)}.bind(this))),adInfos.nc=adInfos.nc||" ",this.statsCampaign[adInfos.id]={nc:adInfos.nc,id:adInfos.id,cpmvad:adInfos.cpm,prio:adInfos.priority,fwias:adInfos.internFWIAS,status:"Timeout",req:!1,reqt:0,reqe:0,reqte:0,adl:!1,adlt:0,adle:0,adlte:0,aw:!1,awe:0,awte:0,prt:0},this.statsInfo.req.push(adInfos.id),this.requestTime[adInfos.id]=Date.now(),this.statsInfo.tag[adInfos.id]={id:adInfos.id,tag:adInfos.tag,prio:parseInt(adInfos.priority),preload:!!tagResponse,state:"Request",ias:adInfos.internFWIAS||this.internCMIAS,error:"-"},this.requestTime[adInfos.id]=Date.now(),this.totalAdTags++,this.sendAdRequestStat(adInfos),void 0!==adInfos.bid&&void 0!==adInfos.bid.bidder&&"dfp"==adInfos.bid.bidder&&void 0!==adInfos.is_hb&&"1"==adInfos.is_hb&&this.player.sendEvent("hbdrq",{req:JSON.stringify([{bc:adInfos.bid.bidder,cp:adInfos.id,cur:void 0!==adInfos.bid.params.currency?adInfos.bid.params.currency:"EUR"}])}),adInfos},init_default().prototype.generateResponseTag=function(ad){if(!ad.tag_response)return!1;var event,params=ad.tag_response,impression=params.print?"<Impression><![CDATA[ "+this.replaceMacro(params.print)+" ]]></Impression>":"<Impression/>",tracking="<TrackingEvents>";for(event in params.events)for(var e=0;e<params.events[event].length;e++)tracking+='<Tracking event="'+event+'"><![CDATA[ '+this.replaceMacro(params.events[event][e])+" ]]></Tracking>";tracking+="</TrackingEvents>";var ClickThrough=params.ClickThrough?"<ClickThrough><![CDATA[ "+this.replaceMacro(params.ClickThrough)+" ]]></ClickThrough>":"",ClickTracking="";if(void 0!==params.ClickTracking&&!1!==params.ClickTracking&&params.ClickTracking.forEach(function(tag){ClickTracking+="<ClickTracking><![CDATA[ "+this.replaceMacro(tag)+" ]]></ClickTracking>"}.bind(this)),params.VASTAdTagURI)return vastAdTagRUI="<VASTAdTagURI><![CDATA[ "+this.replaceMacro(params.VASTAdTagURI)+" ]]></VASTAdTagURI>",['<VAST version="2.0"><Ad id="',ad.id,'"><Wrapper>',"<AdSystem><![CDATA[ VidéoAdexchange ]]></AdSystem>","<AdTitle><![CDATA[ VideoAdex Ad ]]></AdTitle>","<Description><![CDATA[ Inline Video Ad ]]></Description>",impression,vastAdTagRUI,"<Creatives>",'<Creative id="'+ad.id+'" AdID="'+ad.id+'" sequence="1">',"<Linear>",tracking,"<VideoClicks>",ClickThrough,ClickTracking,"</VideoClicks>","</Linear>","</Creative>","</Creatives>","</Wrapper></Ad></VAST>"].join("");if(void 0===params.media_file_url||!params.media_file_url||void 0===params.media_file_extension||!params.media_file_extension)return!1;var vastAdTagRUI='<MediaFile id="" delivery="progressive" maintainAspectRatio="true" scalable="true" bitrate="400" width="640" height="480" type="video/'+params.media_file_extension+'"><![CDATA[ '+params.media_file_url+" ]]></MediaFile>";return['<VAST version="2.0"><Ad id="',ad.id,'"><InLine>',"<AdSystem><![CDATA[ VidéoAdexchange ]]></AdSystem>","<AdTitle><![CDATA[ VideoAdex Ad ]]></AdTitle>","<Description><![CDATA[ Inline Video Ad ]]></Description>",impression,"<Creatives>",'<Creative id="'+ad.id+'" AdID="'+ad.id+'" sequence="1">',"<Linear>","<Duration>"+params.video_duration+"</Duration>",tracking,"<VideoClicks>",ClickThrough,ClickTracking,"</VideoClicks>","<MediaFiles>",vastAdTagRUI,"</MediaFiles>","</Linear>","</Creative>","</Creatives>","</InLine></Ad></VAST>"].join("")},init_default().prototype.onFocus=function(){this.isFocused()&&(this.parameters_.params.extern&&this.sendInventoryRequestStat(),this.adCleared&&!this.adsLoadedInitiated&&this.initAdsLoader())},init_default().prototype.onVisibilityChanged=function(){var _this=this;if(1!=this.player.pause_on_scroll_out||this.waitingForVisiToStart||(1!=this.player.endOfVisiblePlayer||1!=this.player.infos.float_video)&&0!=this.player.infos.float_video||(50<this.visibilityRate?this.player.pause(!1):this.visibilityRate<50&&(this.player.pause(!0),this.player.play(!1),this.player.setMute(1))),1==this.player.infos.sound_low&&!this.waitingForVisiToStart&&0<this.player.infos.float_video&&(50<this.visibilityRate?this.player.pause(!1):this.visibilityRate<50&&(this.player.pause(!0),this.player.play(!1),this.player.setMute(1))),!this.events.AdImpression&&this.adsManagerIdLoaded&&this.waitingForVisiToStart&&this.isVisibilityRespected())return this.waitingForVisiToStart=!1,void this.adStart();this.events.AdImpression&&this.adsManagerIdLoaded&&0!=this.adsManagers[this.adsManagerIdLoaded].infosTag.norme&&this.player.adNormesVisibility.forEach(function(n){n.id==_this.adsManagers[_this.adsManagerIdLoaded].infosTag.norme&&(!_this.player.normeValidated[n.id]&&_this.visibilityRate<n.threshold?_this.isPlaying&&(_this.pausedByVisibility=!0,_this.pauseAd()):_this.visibilityRate>=n.threshold&&_this.pausedByVisibility&&(_this.resumeAd(),_this.pausedByVisibility=!1))})},init_default().prototype.isVisibilityRespected=function(){var _this2=this;return!(!this.adsManagerIdLoaded||!this.adsManagers.hasOwnProperty(this.adsManagerIdLoaded))&&(void 0===this.adsManagers[this.adsManagerIdLoaded].infosTag.norme||0===parseInt(this.adsManagers[this.adsManagerIdLoaded].infosTag.norme)||null==this.adsManagers[this.adsManagerIdLoaded].infosTag.norme||(this.isVisiRespected=!1,this.player.adNormesVisibility.forEach(function(n){n.id==_this2.adsManagers[_this2.adsManagerIdLoaded].infosTag.norme&&_this2.visibilityRate>=n.threshold&&(_this2.isVisiRespected=!0)}),this.isVisiRespected))},init_default().prototype.isFocused=function(){return this.focus},init_default().prototype.updateFocus=function(state){(this.focus=state)&&this.onFocus()},init_default().prototype.getVisibilityRate=function(){return this.visibilityRate},init_default().prototype.updateVisibiityRate=function(visibilityRate){this.visibilityRate=visibilityRate.v,this.onVisibilityChanged()},init_default().prototype.LoadAdways=function(callback){try{new adways.iab.vast.Loader;callback()}catch(error){a=window,p=document,s="script",a.adways={_Q:[]},(A=p.createElement(s)).async=!0,A.src="//play.adpaths.com/libs/iAb/vast/loader.js",(a=p.getElementsByTagName(s)[0]).parentNode.insertBefore(A,a),A.readyState?A.onreadystatechange=function(){"loaded"!==A.readyState&&"complete"!==A.readyState||(A.onreadystatechange=null,callback())}:A.onload=function(){callback()}}var p,s,A,a},init_default().prototype.requestAdways=function(adwaysVastURL,playerInstance){var vastloader=new window.adways.iab.vast.Loader;return vastloader.setVideoSlot(playerInstance),vastloader.setPlayerClass("videojs"),vastloader.addEventListener(adways.iab.vast.VPAIDWrapperEvents.AD_IMPRESSION,function(){this.onAdImpression()}.bind(this)),vastloader.addEventListener(adways.iab.vast.VPAIDWrapperEvents.AD_CLICK_THRU,function(){this.onClick()}.bind(this)),vastloader.addEventListener(adways.iab.vast.VPAIDWrapperEvents.AD_SKIPPED,function(){this.onAdSkip()}.bind(this)),vastloader.addEventListener(adways.iab.vast.VPAIDWrapperEvents.AD_STOPPED,function(){this.onAdStopped()}.bind(this)),vastloader.addEventListener(adways.iab.vast.VPAIDWrapperEvents.AD_VIDEO_COMPLETE,function(){this.adComplete()}.bind(this)),vastloader.requestVAST(this.replaceMacro(this.addGdprVars(adwaysVastURL))),vastloader};__webpack_require__(6533);var __webpack_exports__=__webpack_require__(8095),PostMessageSender_default=__webpack_require__.n(__webpack_exports__);window.getVPAIDAd=function(postmessageSender,baseurl){return void 0===postmessageSender&&(postmessageSender=new(PostMessageSender_default())(parent)),void 0===baseurl&&(baseurl="//ads.videoadex.com"),new(init_default())(postmessageSender,baseurl)},window.loadIMA=function(callback){var script=document.createElement("script");script.type="text/javascript",script.readyState?script.onreadystatechange=function(){"loaded"!==script.readyState&&"complete"!==script.readyState||(script.onreadystatechange=null,callback())}:script.onload=function(){callback()},script.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",document.getElementsByTagName("head")[0].appendChild(script)}},9144:(module,__unused_webpack_exports,__webpack_require__)=>{var topLevel=void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof window?window:{},__webpack_require__=__webpack_require__(5893),doccy="undefined"!=typeof document?document:(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"])||(topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=__webpack_require__);module.exports=doccy},1932:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},6016:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},6046:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},4538:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},8518:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},1655:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},3883:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},7903:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},44:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},2537:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},4583:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},7021:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},3227:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},554:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},2795:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},437:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},1517:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},3279:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},8585:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},8861:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},1069:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},854:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},1224:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},2466:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},940:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},2544:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},338:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},7914:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},5565:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},7078:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},7904:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},8865:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},2477:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},2787:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},7079:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},3640:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},8364:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},6301:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__)},5893:()=>{}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;cachedModule=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(cachedModule.exports,cachedModule,cachedModule.exports,__webpack_require__),cachedModule.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})};(()=>{"use strict";var PlayerAdapterFactory=__webpack_require__(5756),PlayerAdapterFactory_default=__webpack_require__.n(PlayerAdapterFactory),PlayerAdapterFactory=__webpack_require__(6736),PostMessageManager_default=__webpack_require__.n(PlayerAdapterFactory),PlayerAdapterFactory=__webpack_require__(3610),PlayerAdapterFactory=__webpack_require__.n(PlayerAdapterFactory);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const postmessage_VpaidListener=function(_DtkPlayerListenerAbs){var subClass=VpaidListener;if("function"!=typeof _DtkPlayerListenerAbs&&null!==_DtkPlayerListenerAbs)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_DtkPlayerListenerAbs&&_DtkPlayerListenerAbs.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_DtkPlayerListenerAbs&&_setPrototypeOf(subClass,_DtkPlayerListenerAbs);var staticProps,_super=_createSuper(VpaidListener);function VpaidListener(){var instance=this,Constructor=VpaidListener;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=VpaidListener,(_DtkPlayerListenerAbs=[{key:"readPostMessage",value:function(message){void 0!==message.data&&"vpaid"==message.data.type?message.data.rdId==this.player.getInfo("initVsyncId")&&(this.fullAd=message.data.ad,this.fullAd.delay_hit_on_launch=parseInt(this.fullAd.delay_hit_on_launch),this.fullAd.exclusivity=parseInt(this.fullAd.exclusivity),this.fullAd.isVisibilityStatsAd=parseInt(this.fullAd.isVisibilityStatsAd),this.fullAd.only_adblock=parseInt(this.fullAd.only_adblock),this.fullAd.pause_on_scroll_out=parseInt(this.fullAd.pause_on_scroll_out),this.fullAd.priority=parseInt(this.fullAd.priority),this.fullAd.secret_media=parseInt(this.fullAd.secret_media),this.fullAd.sent=parseInt(this.fullAd.sent),this.fullAd.show_skip_ad=parseInt(this.fullAd.show_skip_ad),this.fullAd.skip_ad_delay=parseInt(this.fullAd.skip_ad_delay),this.fullAd.skip_ad_type=parseInt(this.fullAd.skip_ad_type),this.fullAd.switch_click_to_play=parseInt(this.fullAd.switch_click_to_play),this.fullAd.view_to_play=parseInt(this.fullAd.view_to_play),this.fullAd.visibilityAdTimeout=parseInt(this.fullAd.visibilityAdTimeout),this.player.infos.fullAd=this.fullAd):void 0!==message.data&&"vpaidEnd"==message.data.type?message.data.rdId==this.player.getInfo("initVsyncId")&&this.player.onAdComplete({}):void 0!==message.data&&"allads"==message.data.type&&(this.player.infos.allads=message.data.allads)}}])&&_defineProperties(subClass.prototype,_DtkPlayerListenerAbs),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),VpaidListener}(PlayerAdapterFactory());function VsyncListener_typeof(obj){return(VsyncListener_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function VsyncListener_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function VsyncListener_setPrototypeOf(o,p){return(VsyncListener_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function VsyncListener_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=VsyncListener_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=VsyncListener_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===VsyncListener_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function VsyncListener_getPrototypeOf(o){return(VsyncListener_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const postmessage_VsyncListener=function(_DtkPlayerListenerAbs){var subClass=VsyncListener;if("function"!=typeof _DtkPlayerListenerAbs&&null!==_DtkPlayerListenerAbs)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_DtkPlayerListenerAbs&&_DtkPlayerListenerAbs.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_DtkPlayerListenerAbs&&VsyncListener_setPrototypeOf(subClass,_DtkPlayerListenerAbs);var staticProps,_super=VsyncListener_createSuper(VsyncListener);function VsyncListener(){var instance=this,Constructor=VsyncListener;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=VsyncListener,(_DtkPlayerListenerAbs=[{key:"readPostMessage",value:function(message){if(void 0!==message&&"string"==typeof message.data){var initVsyncTmp=message.data.match(/initvsync_(\d+)/);if("visibilityStat_false"==message.data||"visibilityStat_false-np"==message.data)this.player.infos.scrollout=!1,this.player.infos.isVisibleIframe=1,this.player.manageVideoPreview(!0),this.player.visibilityStats(),message.data;else if("visibilityStat_true"==message.data||"visibilityStat_true-np"==message.data)this.player.infos.scrollout=!0,this.player.infos.isVisibleIframe=0,this.player.manageVideoPreview(!1),this.player.visibilityStats(),message.data;else if(initVsyncTmp)this.player.infos.initVsyncId=initVsyncTmp[1],this.player.infos.fullAdSrc=message.source,this.player.getInfo("multiadPreloadVideoPreview")||("yes"==this.player.getInfo("autoplay")&&this.player.isFocus()||!this.player.getInfo("multiadPreload")||this.player._playAdAsap)&&this.player.sendPlayMessageFullAdSrc();else if(0===message.data.indexOf("sendEvent_")){var event_split=message.data.split("_");if(void 0!==event_split[1])for(var eventParams={},i=2;i<event_split.length;i+=2)void 0!==event_split[i+1]&&(eventParams[event_split[i]]=event_split[i+1]);this.player.sendEvent(event_split[1],eventParams)}}}}])&&VsyncListener_defineProperties(subClass.prototype,_DtkPlayerListenerAbs),staticProps&&VsyncListener_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),VsyncListener}(PlayerAdapterFactory());function DtkListener_typeof(obj){return(DtkListener_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function DtkListener_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DtkListener_setPrototypeOf(o,p){return(DtkListener_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function DtkListener_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=DtkListener_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=DtkListener_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===DtkListener_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function DtkListener_getPrototypeOf(o){return(DtkListener_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const postmessage_DtkListener=function(_DtkPlayerListenerAbs){var subClass=DtkListener;if("function"!=typeof _DtkPlayerListenerAbs&&null!==_DtkPlayerListenerAbs)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_DtkPlayerListenerAbs&&_DtkPlayerListenerAbs.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_DtkPlayerListenerAbs&&DtkListener_setPrototypeOf(subClass,_DtkPlayerListenerAbs);var staticProps,_super=DtkListener_createSuper(DtkListener);function DtkListener(){var instance=this,Constructor=DtkListener;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=DtkListener,(_DtkPlayerListenerAbs=[{key:"readPostMessage",value:function(e){var dtkPlayer,adaptLoaded;void 0!==e&&"string"==typeof e.data&&(dtkPlayer=this.player,adaptLoaded=this.player.isAdapterLoaded(),"VisiblePlayerEnable"!==e.data?"play"==(e=e.data.split("="))[0]&&adaptLoaded?(dtkPlayer.play(),"preroll"!=dtkPlayer._state&&"postroll"!=dtkPlayer._state||dtkPlayer.pauseAd(!1)):"play_"==e[0]&&adaptLoaded?(dtkPlayer.play(!0),"preroll"!=dtkPlayer._state&&"postroll"!=dtkPlayer._state||dtkPlayer.pauseAd(!1)):"pause"==e[0]&&adaptLoaded?(dtkPlayer.pause(!0),"preroll"!=dtkPlayer._state&&"postroll"!=dtkPlayer._state||dtkPlayer.pauseAd(!0)):"pause_"==e[0]&&adaptLoaded?(dtkPlayer.pause(!0),"preroll"!=dtkPlayer._state&&"postroll"!=dtkPlayer._state||(dtkPlayer.setMute(1),dtkPlayer.pauseAd())):"getCurrentTime"==e[0]&&adaptLoaded?dtkPlayer.pulpixEvent("event=getCurrentTime&time="+dtkPlayer.getPosition()):"setCurrentTime"==e[0]&&adaptLoaded?dtkPlayer.seek(e[1]):"getDuration"==e[0]&&adaptLoaded?dtkPlayer.pulpixEvent("event=getDuration&duration="+dtkPlayer.getDuration()):"mute"==e[0]&&adaptLoaded?void 0!==e[1]?dtkPlayer.setMute(e[1]):dtkPlayer.setMute():"loadVideo"==e[0]||("manageHover"==e[0]?dtkPlayer.manageHover(!0):(e[0]="manageScroll",dtkPlayer.notify("scrollEvent"))):this.player.notify("visiblePlayerEnableNotify"))}}])&&DtkListener_defineProperties(subClass.prototype,_DtkPlayerListenerAbs),staticProps&&DtkListener_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),DtkListener}(PlayerAdapterFactory());var flagToInt=__webpack_require__(6346);function VisiblePlayer_typeof(obj){return(VisiblePlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function VisiblePlayer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const VisiblePlayer=function(){function VisiblePlayerPlugin(){if(!(this instanceof VisiblePlayerPlugin))throw new TypeError("Cannot call a class as a function");this.my_id=-1,this.my_id_visi=-1,this.old_state="pause",this.ot_check_ifr=7,this.flagNewVideoNotification=!1,this.alreadyInit=!1,this.activ=!1,this.isVppDetected=!1,this.vppSettings=!1,this.visibleVideoTitle=!1}var Constructor,protoProps,staticProps;return Constructor=VisiblePlayerPlugin,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){this.cls_status=!!this.player.vinfos.settings.clsStatus,this.cls_status&&window.parent.postMessage({action:"add_opti_cls",poster:this.player.infos.image},"*"),this.disableVisibleOnCloseZones=["02845074_3"],void 0!==this.player.infos.zone&&-1!==this.disableVisibleOnCloseZones.indexOf(this.player.infos.mdtk+"_"+this.player.infos.zone)&&window.parent.postMessage("disable_visible_on_close="+this.player.infos.mdtk+"_"+this.player.infos.zone,"*"),this.is_mobile=this.player.getInfo("isMobile"),this.option_visible=0<this.player.infos.float_video,this.option_visible_plus=0<this.player.infos.visible_plus?1:0,this.value_visible_plus=this.player.infos.visible_plus,this.theme_visible_plus=this.player.infos.theme_visible_plus,this.is_visible_plus_and_mobile=this.option_visible_plus&&this.is_mobile?1:0,this.position=this.player.getInfo("float_video_css"),this.top_bottom=1==this.position||4==this.position?this.player.getInfo("bottom_float_video_css"):this.player.getInfo("top_float_video_css"),this.right_left=1==this.position||2==this.position?this.player.getInfo("right_float_video_css"):this.player.getInfo("left_float_video_css"),this.width_video_desktop=this.player.getInfo("width_float_video_css"),this.width_video_mobile=this.player.getInfo("display_visible_mobile"),(this.option_visible||this.option_visible_plus)&&this.newVideo(this.position,this.top_bottom,this.right_left,this.width_video_desktop,this.width_video_mobile,this.option_visible_plus,this.is_mobile,this.theme_visible_plus,this.player.infos.mdtk),this.player.sendPrefetchingPostMessage=this.sendPrefetchingPostMessage.bind(this),this.showCloseAdButton=this.player.infos.showCloseAdButton,this.player.addListener("preroll",function(){void 0!==this.showCloseAdButton&&(4==this.showCloseAdButton||this.is_mobile&&2==this.showCloseAdButton||!this.is_mobile&&3==this.showCloseAdButton)?this.showCloseCrossAfterAd():void 0!==this.player.infos.showCrossAfter?this.hideCloseCross(1e3*this.player.infos.showCrossAfter):this.hideCloseCross(1e4)}.bind(this)),this.player.addListener("stateChanged",function(){this.changeState("check")}.bind(this)),this.newVideoVisibility(),this.player.addListener("preroll",function(){window.parent.postMessage("is_visi_"+this.my_id_visi,"*")}.bind(this)),this.player.on("pause",function(){this.changeState("pause")}.bind(this)),this.player.on("play",function(){this.changeState("play")}.bind(this)),this.player.on("change_visible_title",function(e,options){window.parent.postMessage("title_video_"+this.my_id+"_"+this.formatTitle(options.video.title),"*")}.bind(this)),this.player.addListener("after_preroll",function(){!this.player.infos.disableAutoplayVisibleNoAd||1==this.player.infos.scrolltoplay||0==this.player.infos.float_video&&0==this.player.infos.visible_plus||"yes"!=this.player.infos.autoplay||void 0===this.player.prerollAlreadyPlayed||0!==this.player.prerollAlreadyPlayed.length||window.parent.postMessage("disable_visble_autoplay_"+this.my_id,"*")}.bind(this)),this.player.addListener("visibilityChanged",function(evt){!this.player.infos.disableAutoplayVisibleNoAd||1==this.player.infos.scrolltoplay||0==this.player.infos.float_video&&0==this.player.infos.visible_plus||"yes"!=this.player.infos.autoplay||void 0===this.player.prerollAlreadyPlayed||0!==this.player.prerollAlreadyPlayed.length||void 0!==evt.v&&50<evt.v&&window.parent.postMessage("visibility_reached_"+this.my_id,"*")}.bind(this)),this.sendPostMessageToVisible("visible_not_to_overlap_ad_div")}},{key:"sendPostMessageToVisible",value:function(type){"visible_not_to_overlap_ad_div"===type&&this.player.infos.visibleNotToOverlapAdDiv&&""!==this.player.infos.visibleNotToOverlapAdDiv.trim()&&window.parent.postMessage({action:"visible_not_to_overlap_ad_div",ad_div_id:this.player.infos.visibleNotToOverlapAdDiv},"*")}},{key:"sendPrefetchingPostMessage",value:function(state){state="state_player=prefetching"+(state?1:0)+"_"+this.my_id;window.parent.postMessage(state,"*")}},{key:"getPostMessageListener",value:function(){return function(evt){var e,matches_init,matches_init_visi,matches_resize,matches_visible_onfocus,matches_reduce,matches_transitionend,matches_pause_me,visible_not_to_overlap_ad_div,dtkPlayer=this.player;if(void 0!==evt&&"string"==typeof evt.data&&(e=evt.data.split("="),matches_init=evt.data.match(/(your_id=)(\d+)/),matches_init_visi=evt.data.match(/(your_id_visi=)(\d+)/),matches_resize=evt.data.match(/resizeVsync_(\d+)_(\d+)/),matches_visible_onfocus=evt.data.match(/(visible_player_on_focus=)(\d+)/),matches_reduce=evt.data.match(/is_reduced_(\d+)/),matches_transitionend=evt.data.match(/is_transitionend_(\d+)/),matches_pause_me=evt.data.match(/pause_me_(\d+)/),visible_not_to_overlap_ad_div=evt.data.match(/(visible_not_to_overlap_ad_div=)(\d+)/),matches_init?this.initIframe(evt):"check_play"==evt.data?this.changeState("check"):matches_init_visi?this.my_id_visi=matches_init_visi[2]:matches_resize||("end_of_visible"==evt.data?dtkPlayer.endOfVisiblePlayer=!0:"pause_"==e[0]&&dtkPlayer.isAdapterLoaded()?"preroll"!=dtkPlayer._state&&"postroll"!=dtkPlayer._state||(this.old_state="pauseAd",this.toggleLayerVisiblePlayer(this.my_id,"button",!0),window.parent.postMessage("state_player=pause_"+this.my_id,"*")):"fb_btn_hide"==e[0]?this.setVisiblePlayer(!0):"fb_btn_show"==e[0]?this.setVisiblePlayer(!1):"in_page_visible_player_true"==e[0]?dtkPlayer.in_page_visible_player=!0:"in_page_visible_player_false"==e[0]?dtkPlayer.in_page_visible_player=!1:matches_visible_onfocus&&1==matches_visible_onfocus[2]?this.setVisiblePlayer(!0):matches_reduce?this.toggleLayerVisiblePlayer(matches_reduce[1],"extend",!0):matches_transitionend?(this.toggleLayerVisiblePlayer(matches_transitionend[1],"extend",!1),dtkPlayer.adapter.videojs.userActive(!0)):matches_pause_me?dtkPlayer.infos.pause_me=!0:visible_not_to_overlap_ad_div&&void 0!==visible_not_to_overlap_ad_div[2]&&"0"===visible_not_to_overlap_ad_div[2]&&this.sendPostMessageToVisible("visible_not_to_overlap_ad_div"))),void 0!==evt&&"object"==VisiblePlayer_typeof(evt.data))switch(evt.data.action){case"launch_visible_from_notif":this.newVideo(evt.data.position,evt.data.top_bottom,evt.data.right_left,evt.data.width,evt.data.display_mobile,this.option_visible_plus,this.is_mobile,this.theme_visible_plus,dtkPlayer.infos.mdtk),dtkPlayer.infos.float_video=1,dtkPlayer.infos.autoplay="yes",dtkPlayer.setState("before_preroll"),this.flagNewVideoNotification=!0;break;case"close_visible_plus":this.closeVisiblePlayer();break;case"play_visible_plus":dtkPlayer.play(!0),window.parent.postMessage("state_player=play_"+this.my_id,"*"),this.old_state="play";break;case"vpp_detected":this.isVppDetected=!0,this.vppSettings=evt.data.settings;break;case"extend_detected":this.createDivExtend(evt.data.id)}}.bind(this)}},{key:"initIframe",value:function(evt){var dtkPlayer=this.player,value_float_video=dtkPlayer.infos.float_video||dtkPlayer.infos.visible_plus;void 0===evt||"string"!=typeof evt.data||(evt=evt.data.match(/(your_id=)(\d+)/))&&value_float_video&&!this.alreadyInit&&"your_id="==evt[1]&&(this.my_id=evt[2],this.addLayerVisiblePlayer(this.my_id),void 0!==this.player.infos.visible_extra_css&&""!==this.player.infos.visible_extra_css.trim()&&window.parent.postMessage("visible_extra_css_"+this.player.infos.visible_extra_css.trim(),"*"),void 0!==this.player.infos.visible_video_title&&this.player.infos.visible_video_title?(this.activ=!0,this.visibleVideoTitle=!0):this.addCloseCross(),window.parent.postMessage("state_player=valid"+(0,flagToInt.Z)(value_float_video)+"_"+this.my_id,"*"),window.parent.postMessage("title_video_"+this.my_id+"_"+this.formatTitle(dtkPlayer.getInfo("title")),"*"),void 0!==dtkPlayer.infos.isMobile&&dtkPlayer.infos.isMobile,window.parent.postMessage("play_mode_"+this.my_id+"_"+dtkPlayer.infos.autoplay,"*"),this.flagNewVideoNotification&&(this.flagNewVideoNotification=!1,window.parent.postMessage("state_player=play_"+this.my_id,"*")),this.alreadyInit=!0)}},{key:"changeState",value:function(state){var dtkPlayer=this.player,value_float_video=dtkPlayer.infos.float_video||dtkPlayer.infos.visible_plus;void 0!==dtkPlayer&&dtkPlayer.isAdapterLoaded()&&value_float_video&&("otplay"==state?(this.ot_check_ifr++,ot_check_ifr%8==0&&(window.parent.postMessage("state_player=play_"+this.my_id,"*"),this.old_state="play")):"play"==state||"playAd"==state?(window.parent.postMessage("state_player=play_"+this.my_id,"*"),this.old_state="play"):"pause"==state||"pauseAd"==state?(window.parent.postMessage("state_player=pause_"+this.my_id,"*"),this.old_state="pause",this.ot_check_ifr=7,"pauseAd"==state&&(this.old_state="pauseAd")):"ready"!=dtkPlayer._state&&"loading"!=dtkPlayer._state&&"end"!=dtkPlayer._state&&"pauseAd"!=this.old_state&&"pause"!=this.old_state?(window.parent.postMessage("state_player=play_"+this.my_id,"*"),this.old_state="play"):"pauseAd"!=this.old_state&&(window.parent.postMessage("state_player=pause_"+this.my_id,"*"),this.old_state="pause",this.ot_check_ifr=7))}},{key:"button_vp_pause",value:function(){var dtkPlayer=this.player;dtkPlayer.play(!0),dtkPlayer.toggleLayerVisiblePlayer(this.my_id,"button",!1),old_state="play",window.parent.postMessage("state_player=play_"+my_id,"*"),this.changeState()}},{key:"close_video",value:function(){window.parent.postMessage("state_player=close_"+this.my_id,"*"),this.player.setMute(1)}},{key:"newVideo",value:function(position,top_bottom,right_left,width,display_mobile,option_visible_plus,is_mobile,theme_visible_plus,mdtk){var plugin=this,transition=this.player.infos.float_video_transition||300,visible_video_title=void 0!==this.player.infos.visible_video_title&&this.player.infos.visible_video_title?1:0;window.parent.postMessage("new_video_"+position+"_"+top_bottom+"_"+right_left+"_"+width+"_"+display_mobile+"_"+transition+"_"+option_visible_plus+"_"+is_mobile+"_"+theme_visible_plus+"_"+this.my_id+"_"+mdtk+"_"+visible_video_title,"*"),this.cls_status&&window.parent.postMessage({action:"send_poster",poster:this.player.infos.image,id_player:this.my_id},"*"),-1==this.my_id&&setTimeout(function(){plugin.newVideo(position,top_bottom,right_left,width,display_mobile,option_visible_plus,is_mobile,theme_visible_plus,mdtk)},1500)}},{key:"newVideoVisibility",value:function(){var plugin=this;window.parent.postMessage({message:"newVideo"},"*"),-1==this.my_id_visi&&setTimeout(function(){plugin.newVideoVisibility()},1500)}},{key:"addLayerVisiblePlayer",value:function(id){var plugin=this,elt=document.createElement("div"),body=(elt.setAttribute("style","cursor: pointer; position:absolute; top:0; left:0; width:100%; height:100%; z-index:99999; display: none;"),elt.setAttribute("id",id+"_button_visible_player"),elt.setAttribute("class","button_visible_player"),document.getElementsByTagName("body")[0]);body.insertBefore(elt,body.firstChild),document.getElementById(id+"_button_visible_player").addEventListener("click",function(){plugin.toggleLayerVisiblePlayer(id,"button",!1)},!1),plugin.is_mobile&&plugin.player.getInfo("display_visible_mobile")}},{key:"getCloseCross",value:function(){return document.getElementById("um_close_cross")}},{key:"addCloseCross",value:function(){var plugin=this,parent=document.getElementById(this.player.getTarget()).parentNode,elt=document.createElement("div");elt.setAttribute("id","um_close_cross"),parent.insertBefore(elt,parent.firstChild),elt.addEventListener("click",function(){plugin.closeVisiblePlayer()}.bind(plugin),!1),this.activ=!0}},{key:"toggleLayerVisiblePlayer",value:function(id,ele,show){"button"==ele?document.getElementById(id+"_button_visible_player")&&(document.getElementById(id+"_button_visible_player").style.display=show?"":"none"):"extend"==ele&&document.getElementById(id+"_button_extend_visible_player")&&(document.getElementById(id+"_button_extend_visible_player").style.display=show?"":"none")}},{key:"setVisiblePlayer",value:function(state){var dispCloseCross,vpp_disabled_state_btn_close;this.activ&&(vpp_disabled_state_btn_close=!(dispCloseCross="block"),state?(this.visible_player=!0,vpp_disabled_state_btn_close=!(dispCloseCross="block"),this.player.adapter.videojs.addClass("dtk-visible-player"),this.isVppDetected&&5!==this.player.infos.float_video&&this.player.adapter.videojs.addClass("dtk-visible-player-plus"),this.toggleLayerVisiblePlayer(this.my_id,"extend",!0)):(vpp_disabled_state_btn_close=!(this.visible_player=!(dispCloseCross="none")),this.player.adapter.videojs.removeClass("dtk-visible-player"),this.player.adapter.videojs.removeClass("dtk-visible-player-plus"),this.toggleLayerVisiblePlayer(this.my_id,"extend",!1)),this.forceHideCloseCross&&(dispCloseCross="none",vpp_disabled_state_btn_close=!0),this.isVppDetected&&5!==this.player.infos.float_video?window.parent.postMessage({action:"manage_btn_close",disabled_state:vpp_disabled_state_btn_close,id_visible:this.my_id},"*"):this.visibleVideoTitle||(this.getCloseCross().style.display=dispCloseCross))}},{key:"hideCloseCross",value:function(duration){var visibleplayerPlugin;this.activ&&(0<(this.player.infos.plindex||0)?this.visibleVideoTitle&&window.parent.postMessage("show_close_button_on_video_title","*"):(visibleplayerPlugin=this,setTimeout(function(){visibleplayerPlugin.visibleVideoTitle?window.parent.postMessage("show_close_button_on_video_title","*"):visibleplayerPlugin.forceHideCloseCross=!1,visibleplayerPlugin.visible_player&&(visibleplayerPlugin.isVppDetected&&5!==visibleplayerPlugin.player.infos.float_video?window.parent.postMessage({action:"manage_btn_close",disabled_state:!1,id_visible:visibleplayerPlugin.my_id},"*"):visibleplayerPlugin.visibleVideoTitle||(visibleplayerPlugin.getCloseCross().style.display="block"))},duration),this.isVppDetected&&5!==this.player.infos.float_video?window.parent.postMessage({action:"manage_btn_close",disabled_state:!0,id_visible:visibleplayerPlugin.my_id},"*"):this.visibleVideoTitle||(this.getCloseCross().style.display="none"),visibleplayerPlugin.forceHideCloseCross=!0))}},{key:"showCloseCrossAfterAd",value:function(){var CloseCrossAd=this;this.forceHideCloseCross=!0,this.player.addListener("after_preroll",function(){void 0!==CloseCrossAd.player.infos.visible_video_title&&CloseCrossAd.player.infos.visible_video_title?(CloseCrossAd.forceHideCloseCross=!0,window.parent.postMessage("show_close_button_on_video_title","*")):CloseCrossAd.forceHideCloseCross=!1,CloseCrossAd.visible_player&&(CloseCrossAd.isVppDetected&&5!==CloseCrossAd.player.infos.float_video?window.parent.postMessage({action:"manage_btn_close",disabled_state:!1,id_visible:CloseCrossAd.my_id},"*"):CloseCrossAd.visibleVideoTitle||(CloseCrossAd.getCloseCross().style.display="block"))}),this.visible_player&&(this.isVppDetected&&5!==this.player.infos.float_video?window.parent.postMessage({action:"manage_btn_close",disabled_state:!0,id_visible:this.my_id},"*"):this.visibleVideoTitle||(this.getCloseCross().style.display="none"))}},{key:"closeVisiblePlayer",value:function(){this.setVisiblePlayer(!1),this.close_video(),this.player.endOfVisiblePlayer=!0}},{key:"formatTitle",value:function(title){var title_formated=title;return title_formated=65<title.length?title.substr(0,65)+"...":title_formated}},{key:"createDivExtend",value:function(id){var div=document.createElement("div"),body=(div.setAttribute("style","cursor: pointer; position:absolute; top:0; left:0; width:100%; height:100%; z-index:100000; display:none;"),div.setAttribute("id",id+"_button_extend_visible_player"),div.setAttribute("class","button_extend_visible_player"),document.getElementsByTagName("body")[0]);body.insertBefore(div,body.firstChild),document.getElementById(id+"_button_extend_visible_player").addEventListener("touchstart",function(){window.parent.postMessage("is_extend_"+id,"*")},!1)}}])&&VisiblePlayer_defineProperties(Constructor.prototype,protoProps),staticProps&&VisiblePlayer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),VisiblePlayerPlugin}();var PlayerAdapterFactory=__webpack_require__(9250),Notification_default=__webpack_require__.n(PlayerAdapterFactory),PlayerAdapterFactory=__webpack_require__(1610),AddonsManager_default=__webpack_require__.n(PlayerAdapterFactory),PlayerAdapterFactory=__webpack_require__(2323),PlayerAdapterFactory=__webpack_require__.n(PlayerAdapterFactory),HttpRequest=__webpack_require__(5146),HttpRequest_default=__webpack_require__.n(HttpRequest);function Lotname_typeof(obj){return(Lotname_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Lotname_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Lotname_setPrototypeOf(o,p){return(Lotname_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Lotname_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Lotname_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Lotname_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Lotname_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Lotname_getPrototypeOf(o){return(Lotname_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Lotname=function(_AddonAbstract){var subClass=Lotname;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Lotname_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Lotname_createSuper(Lotname);function Lotname(allowedMdtk){var _this;if(!(this instanceof Lotname))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).allowedMdtk=allowedMdtk,_this}return subClass=Lotname,(_AddonAbstract=[{key:"init",value:function(){-1!==this.allowedMdtk.indexOf(this.player.getInfo("mdtk"))&&HttpRequest_default().getScript(window.location.protocol+"//ad.crwdcntrl.net/5/c=4886/pe=y/callback="+this.getMyVarName()+".manageLotameSegments"),this.player.addRelevantTagFilter(this.isRelevantTag.bind(this))}},{key:"manageLotnameSegments",value:function(data){var segments=[];if(void 0!==data.Profile&&void 0!==data.Profile.Audiences&&void 0!==data.Profile.Audiences.Audience)for(var i=0;i<data.Profile.Audiences.Audience.length;i++)segments.push(data.Profile.Audiences.Audience[i].id);this._lotame_segments=segments}},{key:"isRelevantTag",value:function(tag){var all_segments_matched=!0;if(void 0!==tag.lotname_segments&&0===parseInt(tag.vsync))for(var j=0;j<tag.lotname_segments.length;j++)if(-1===this._lotame_segments.indexOf(tag.lotname_segments[j])){all_segments_matched=!1;break}return all_segments_matched}}])&&Lotname_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Lotname_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Lotname}(PlayerAdapterFactory());function Spott_typeof(obj){return(Spott_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Spott_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Spott_setPrototypeOf(o,p){return(Spott_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Spott_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Spott_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Spott_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Spott_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Spott_getPrototypeOf(o){return(Spott_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Spott=function(_AddonAbstract){var subClass=Spott;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Spott_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Spott_createSuper(Spott);function Spott(){if(!(this instanceof Spott))throw new TypeError("Cannot call a class as a function");return _super.call(this)}return subClass=Spott,(_AddonAbstract=[{key:"init",value:function(){(this.player.spottPlayer=this).deals={"DIG-DEA-00978":"781702ca-b5e8-49ca-9adc-58b05266b752","DIG-DEA-00979":"d6f42806-32a4-4920-8366-db303d7c837c","DIG-DEA-00980":"ea142c59-7870-4d44-a0e8-9d46cc1f8789","DIG-DEA-00981":"cb60827b-9dbd-4712-85fe-bfb2381ec5be"}}},{key:"launchDeal",value:function(dealId){var _this=this;void 0!==this.deals[dealId]&&initSpott({player:this.player}).then(function(){_this.player.isSpottInit=!0,_this.nextVideoEvent(_this.deals[dealId],!1)})}},{key:"nextVideoEvent",value:function(videoId,external){window.postMessage({event:"newVideo",videoId:videoId,external:external})}},{key:"hideProducts",value:function(){SpottPlayer.hideProducts()}}])&&Spott_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Spott_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Spott}(PlayerAdapterFactory());function CookieManager_typeof(obj){return(CookieManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CookieManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CookieManager_setPrototypeOf(o,p){return(CookieManager_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CookieManager_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=CookieManager_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=CookieManager_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===CookieManager_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function CookieManager_getPrototypeOf(o){return(CookieManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_CookieManager=function(_AddonAbstract){var subClass=CookieManager;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&CookieManager_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=CookieManager_createSuper(CookieManager);function CookieManager(cookieAuth){var _this;if(!(this instanceof CookieManager))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).cookieAuth=cookieAuth,_this}return subClass=CookieManager,(_AddonAbstract=[{key:"init",value:function(){}},{key:"getCookie",value:function(cname){return this._readCookie(cname="um_"+cname)}},{key:"setCookie",value:function(cname,cvalue,exdays){void 0!==this.cookieAuth&&this.cookieAuth["cookie.customization"]&&this._writeCookie(cname="um_"+cname,cvalue,exdays,3<arguments.length&&void 0!==arguments[3]&&arguments[3])}},{key:"setAdCookie",value:function(cname,cvalue,exdays){void 0!==this.cookieAuth&&this.cookieAuth["cookie.advertising"]&&this._writeCookie(cname,cvalue,exdays,3<arguments.length&&void 0!==arguments[3]&&arguments[3])}},{key:"getAdCookie",value:function(cname){return this._readCookie(cname)}},{key:"_writeCookie",value:function(cname,cvalue,exdays,noRelativeDate){exdays=noRelativeDate?exdays:((noRelativeDate=new Date).setTime(noRelativeDate.getTime()+24*exdays*60*60*1e3),"expires="+noRelativeDate.toUTCString());document.cookie=cname+"="+cvalue+"; "+exdays+"; path=/; domain=."+document.domain}},{key:"_readCookie",value:function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(name))return c.substring(name.length,c.length)}return""}}])&&CookieManager_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&CookieManager_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),CookieManager}(PlayerAdapterFactory());function Pulpix_typeof(obj){return(Pulpix_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Pulpix_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Pulpix_setPrototypeOf(o,p){return(Pulpix_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Pulpix_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Pulpix_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Pulpix_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Pulpix_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Pulpix_getPrototypeOf(o){return(Pulpix_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Pulpix=function(_AddonAbstract){var subClass=Pulpix;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Pulpix_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Pulpix_createSuper(Pulpix);function Pulpix(){var _this;if(!(this instanceof Pulpix))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).pulpixActive=1,_this}return subClass=Pulpix,(_AddonAbstract=[{key:"init",value:function(){var pulpix=this;this.player.addListener("ready",function(){this.player.on("play",function(){pulpix.pulpixEvent("event=played")}),this.player.on("pause",function(){pulpix.pulpixEvent("event=paused")}),this.player.on("ended",function(){pulpix.pulpixEvent("event=ended")}),this.player.on("timeupdate",function(){pulpix.pulpixEvent("event=timeupdate&time="+pulpix.player.getPosition()+"&duration="+pulpix.player.getDuration())}),pulpix.pulpixEvent("event=ready"),this.player.on("interraction-click",function(e,d){switch(d.label){case"facebook":case"twitter":this.player.pulpixEvent("event=share&media="+d.label)}}.bind(this))}.bind(this)),this.player.pulpixEvent=this.pulpixEvent.bind(this)}},{key:"pulpixEvent",value:function(message){this.pulpixActive&&parent.postMessage(message,"*")}},{key:"getPostMessageListener",value:function(){var player=this.player,pulpix=this;return function(message){"getCurrentTime"==(e="undefined"!=typeof e&&"string"==typeof e.data?e.data.split("="):e)[0]&&player.adapter.isLoaded()?pulpix.pulpixEvent("event=getCurrentTime&time="+player.getPosition()):"getDuration"==e[0]&&player.adapter.isLoaded()&&pulpix.pulpixEvent("event=getDuration&duration="+player.getDuration())}}}])&&Pulpix_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Pulpix_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Pulpix}(PlayerAdapterFactory());function Visibility_typeof(obj){return(Visibility_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Visibility_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Visibility_setPrototypeOf(o,p){return(Visibility_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Visibility_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Visibility_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Visibility_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Visibility_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Visibility_getPrototypeOf(o){return(Visibility_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Visibility=function(_AddonAbstract){var subClass=Visibility;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Visibility_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Visibility_createSuper(Visibility);function Visibility(){var _this;if(!(this instanceof Visibility))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).visibilityRate=0,_this.undefinedVisibility=!1,_this.chronoAdReady=!1,_this.chronoStreamReady=!1,_this.chronoId=[],_this.chrono=[],_this.chronoStarted=[],_this.lastTimestampVisible=[],_this.adDuration=0,_this.visibilityInitialized=!1,_this.visibilityMethod=null,_this.DEFAULT_THRESHOLD=50,_this}return subClass=Visibility,(_AddonAbstract=[{key:"init",value:function(){var _this2=this;this.DEFAULT_DURATION_PREVIEW=this.player.infos.DEFAULT_DURATION_PREVIEW,this.DEFAULT_DURATION_PREVIEW_MESSAGE=this.player.infos.DEFAULT_DURATION_PREVIEW_MESSAGE,this.DEFAULT_THRESHOLD_PREVIEW=this.player.infos.DEFAULT_THRESHOLD_PREVIEW,this.adNormesVisibility=[{id:1,ad:1,name:"az",threshold:50,duration:2100,unit:"sec",atOnce:1,sound:0},{id:2,ad:1,name:"ae",threshold:99,duration:50,unit:"%",atOnce:1,sound:1},{id:3,ad:1,name:"ne",duration:3e3,threshold:99,unit:"sec",atOnce:1,sound:0}],this.streamNormesVisibility=[{id:10,ad:0,name:"prev",threshold:this.DEFAULT_THRESHOLD_PREVIEW,duration:1e3*this.DEFAULT_DURATION_PREVIEW,unit:"sec",atOnce:1,sound:0},{id:11,ad:0,name:"prev_inven",threshold:this.DEFAULT_THRESHOLD_PREVIEW,duration:1e3*(this.DEFAULT_DURATION_PREVIEW+this.DEFAULT_DURATION_PREVIEW_MESSAGE),unit:"sec",atOnce:1,sound:0},{id:12,ad:0,name:"vdvis",threshold:99,duration:50,unit:"%",atOnce:0,sound:0}],this.player.addListener("ready",this.initObserver.bind(this)),this.player.addListener("VsyncCreated",this.onFocus.bind(this)),this.player.addListener("adImpression",this.startAdChrono.bind(this)),this.player.addListener("resetNorme",this.resetOneNorme.bind(this)),this.player.addListener("visibilityChanged",this.checkEveryNorme.bind(this)),this.player.addListener("AdVolumeChanged",this.checkEveryNorme.bind(this)),this.player.addListener("AtEndPub",this.reset.bind(this)),this.player.addListener("stream",this.startChrono.bind(this)),this.player.addListener("manageScroll",this.manageScroll.bind(this)),this.player.addListener("normeValidated",function(n){return _this2.statBigData(n)}),this.player.addListener("resetVisibility",this.reset.bind(this)),this.player.on("ended",this.reset.bind(this)),this.player.addListener("ready",function(){this.player.on("play",this.checkEveryNorme.bind(this)),this.player.on("pause",this.checkEveryNorme.bind(this))}.bind(this)),this.player.previewSettigs={duration:this.DEFAULT_DURATION_PREVIEW+this.DEFAULT_DURATION_PREVIEW_MESSAGE,threshold:this.DEFAULT_THRESHOLD_PREVIEW/100},this.isFocus(this.onFocus.bind(this)),this.reset(),this.player.isFocus=this.isFocus.bind(this),this.player.getVisibilityRate=this.getVisibilityRate.bind(this),this.player.isVisible=this.isVisible.bind(this),this.player.isVisibleString=this.isVisibleString.bind(this),this.player.getOs=this.getOs.bind(this)}},{key:"reset",value:function(){var _this3=this;this.adDuration=0,this.chronoAdReady=!1,this.chronoStreamReady=!1,this.player.normeValidated=[],this.player.adNormesVisibility=this.adNormesVisibility,this.player.streamNormesVisibility=this.streamNormesVisibility,this.player.adNormesVisibility.forEach(function(n){_this3.player.normeValidated[n.id]=0,_this3.chrono[n.id]=0,_this3.chronoId[n.id]=0,_this3.chronoStarted[n.id]=!1,_this3.lastTimestampVisible[n.id]=0}),this.player.streamNormesVisibility.forEach(function(n){_this3.player.normeValidated[n.id]=0,_this3.chrono[n.id]=0,_this3.chronoId[n.id]=0,_this3.chronoStarted[n.id]=!1,_this3.lastTimestampVisible[n.id]=0})}},{key:"resetOneNorme",value:function(idNorme){this.player.normeValidated[idNorme]=0,this.chrono[idNorme]=0,this.chronoId[idNorme]=0,this.chronoStarted[idNorme]=!1,this.lastTimestampVisible[idNorme]=0}},{key:"initObserver",value:function(){var iObserver,_this4=this;"function"==typeof IntersectionObserver?(iObserver=new IntersectionObserver(function(items){_this4.visibilityRate=100*items[0].intersectionRatio,_this4.player.notify("visibilityChanged",{v:_this4.getVisibilityRate(),stp:!0})},{threshold:[0,.1,.2,.25,.3,.4,.5,.6,.7,.75,.8,.9,.99,1]}),this.visibilityInitialized=!0,this.visibilityMethod="intersectionObserver",this.player.IABValide=0,iObserver.POLL_INTERVAL=100,iObserver.observe(document.getElementById(this.player.getTarget()))):(this.visibilityInitialized=!0,this.undefinedVisibility=!0,this.player.IABValide=2,this.visibilityMethod="postMessage",window.addEventListener("message",this.visibilityPostMessage.bind(this),!1))}},{key:"checkEveryNorme",value:function(){var _this5=this;!this.undefinedVisibility&&this.visibilityInitialized&&(this.chronoAdReady&&this.player.adNormesVisibility.filter(function(n){return 0===_this5.player.normeValidated[n.id]}).forEach(function(n){return n.atOnce?_this5.chronoVisibilityAtOnce(n,_this5.getVisibilityRate()>=n.threshold):_this5.chronoVisibilityNotAtOnce(n,_this5.getVisibilityRate()>=n.threshold)}),this.chronoStreamReady&&this.player.streamNormesVisibility.filter(function(n){return 0===_this5.player.normeValidated[n.id]}).forEach(function(n){return n.atOnce?_this5.chronoVisibilityAtOnce(n,_this5.player.isPlaying()&&_this5.getVisibilityRate()>=n.threshold):_this5.chronoVisibilityNotAtOnce(n,_this5.player.isPlaying()&&_this5.getVisibilityRate()>=n.threshold)}))}},{key:"validateNorme",value:function(norme){0===this.player.normeValidated[norme.id]&&(this.player.normeValidated[norme.id]=1,this.player.notify("NormeValidated",norme),10==norme.id?this.player.notify("previewPlayerReady"):11==norme.id&&this.player.notify("previewInventoryReady"),"az"===norme.name&&(this.player.IABValide=1,this.sendIABStat()))}},{key:"getVisibilityRate",value:function(){return this.undefinedVisibility?this.isFocus()?100:0:this.isFocus()?this.visibilityRate:0}},{key:"chronoVisibilityAtOnce",value:function(norme,status){var sound=norme.ad?this.player.adPlayer.getAdVolume():this.player.getVolume();!status||norme.sound&&!sound?(norme.name,clearTimeout(this.chronoId[norme.id]),this.chronoId[norme.id]=!1):this.chronoId[norme.id]||(norme.name,this.chronoId[norme.id]=setTimeout(function(){this.validateNorme(norme)}.bind(this),this.getNormeDuration(norme)))}},{key:"chronoVisibilityNotAtOnce",value:function(norme,status){var sound=norme.ad?this.player.adPlayer.getAdVolume():this.player.getVolume();!status||norme.sound&&!sound?(clearTimeout(this.chronoId[norme.id]),this.chronoStarted[norme.id]&&(this.chrono[norme.id]+=Date.now()-this.lastTimestampVisible[norme.id]),this.chronoStarted[norme.id]=!1):this.chronoStarted[norme.id]||(this.chronoStarted[norme.id]=!0,this.lastTimestampVisible[norme.id]=Date.now(),this.chronoId[norme.id]=setTimeout(function(){this.validateNorme(norme)}.bind(this),this.getNormeDuration(norme)-this.chrono[norme.id]))}},{key:"getNormeDuration",value:function(norme){return"sec"===norme.unit?norme.duration:(1===norme.ad?this.adDuration:this.player.vinfos.video.duration)*norme.duration/100*1e3}},{key:"startAdChrono",value:function(){this.chronoAdReady=!0,this.adDuration=this.player.getCurrentAd()?this.player.getCurrentAd().duration:0,this.checkEveryNorme()}},{key:"startChrono",value:function(){this.chronoStreamReady=!0,this.checkEveryNorme()}},{key:"isVisible",value:function(){var rate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.DEFAULT_THRESHOLD;return this.getVisibilityRate()>rate}},{key:"isVisibleString",value:function(){var rate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.DEFAULT_THRESHOLD;return this.undefinedVisibility?"2":this.isFocus()&&this.getVisibilityRate()>rate?"1":"0"}},{key:"isFocus",value:function(c){var stateKey,eventKey,keys={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(stateKey in keys)if(stateKey in document){eventKey=keys[stateKey];break}return c&&document.addEventListener(eventKey,c),!document[stateKey]}},{key:"onFocus",value:function(){this.player.notify("visibilityChanged",{v:this.getVisibilityRate(),stp:!0}),this.player.notify("focusChanged",this.isFocus.bind(this))}},{key:"getOs",value:function(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(userAgent)?"Windows Phone":/android/i.test(userAgent)?"Android":/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream?"iOs":/Mac/.test(navigator.platform)?"MacOs":/Linux/.test(navigator.platform)?"Linux":/Win|HP|X11/.test(navigator.platform)?"Windows":/Mozilla|Chrome/i.test(userAgent)?"PC":"unknown_browser"}},{key:"visibilityPostMessage",value:function(e){void 0!==e&&"string"==typeof e.data&&"manageScroll"===(e=e.data.split("="))[0]&&(this.undefinedVisibility=!1,e=e[1].split(","),this.manageScroll(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4]),parseInt(e[5]),parseInt(e[6]),parseInt(e[7]),!0))}},{key:"manageScroll",value:function(page_x,page_y,page_w,page_h,player_x,player_y,player_w,player_h,isStpAnyway){var visi,page;"intersectionObserver"!==this.visibilityMethod&&(page="BackCompat"!==document.compatMode?document.documentElement:document.body,page_y=void 0!==page_y?page_y:(0!=document.body.scrollTop?document.body:document.documentElement).scrollTop,page_h=void 0!==page_h?page_h:"innerHeight"in window?window.innerHeight:page.clientHeight,player_y=void 0!==player_y?player_y:document.getElementById(this.player.getTarget()).offsetTop,player_h=void 0!==player_h?player_h:document.getElementById(this.player.getTarget()).offsetHeight,0==(void 0!==player_w?player_w:document.getElementById(this.player.getTarget()).offsetWidth)||0==player_h?visi=0:(page=(player_y+player_h-(page_y+page_h))/Math.abs(player_h),page=Math.round(100*page),player_w=(player_y-page_y)/Math.abs(player_h),player_w=Math.round(100*player_w),Math.abs(player_w)/player_w!=Math.abs(page)/page?visi=100:player_w<0?visi=100+player_w:0<page&&(visi=100-page)),visi=Math.max(0,Math.min(visi,100)),this.visibilityRate=visi,this.player.notify("visibilityChanged",{v:this.getVisibilityRate(),stp:isStpAnyway}))}},{key:"sendIABStat",value:function(){var code_enc;(this.player.getInfo("isVisibilityStatsAd")||this.player.getCurrentAd().isVisibilityStatsAd)&&(code_enc=this.player.getInfo("mdtk")+"_"+this.player.getInfo("zone"),HttpRequest_default().ajax({type:"POST",url:this.player.statsurl+"/deliver/statistiques/iabstat/",data:{code_enc:code_enc,type_player:this.player.getInfo("typePlayer"),campaign_id:this.player.getCurrentAd().id,iabv:1,trg:this.player.infos.trg,pl:this.player.infos.plindex||null,fs:this.player.infos.fstart||null},dataType:"jsonp",jsonp:!1}),this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p2iab",{cp:this.player.getCurrentAd(this._state).id,iabv:1}):this.player.sendEvent("priab",{cp:this.player.getCurrentAd(this._state).id,iabv:1}))}}])&&Visibility_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Visibility_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Visibility}(PlayerAdapterFactory());function Vertical_typeof(obj){return(Vertical_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Vertical_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Vertical_setPrototypeOf(o,p){return(Vertical_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Vertical_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Vertical_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Vertical_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Vertical_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Vertical_getPrototypeOf(o){return(Vertical_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Vertical=function(_AddonAbstract){var subClass=Vertical;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Vertical_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Vertical_createSuper(Vertical);function Vertical(){var instance=this,Constructor=Vertical;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=Vertical,(_AddonAbstract=[{key:"init",value:function(){this.player.addListener("ready",function(){this.player.on("rewind",this.rewind.bind(this)),this.player.on("forward",this.forward.bind(this))}.bind(this))}},{key:"rewind",value:function(e,duration){duration=Math.max(this.player.getPosition()-duration,0);isNaN(duration)||this.player.seek(duration)}},{key:"forward",value:function(e,duration){duration=Math.min(this.player.getPosition()+duration,this.player.getDuration());isNaN(duration)||this.player.seek(duration)}}])&&Vertical_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Vertical_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Vertical}(PlayerAdapterFactory());function Mediametrie_typeof(obj){return(Mediametrie_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Mediametrie_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Mediametrie_setPrototypeOf(o,p){return(Mediametrie_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Mediametrie_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Mediametrie_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Mediametrie_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Mediametrie_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Mediametrie_getPrototypeOf(o){return(Mediametrie_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Mediametrie=function(_AddonAbstract){var subClass=Mediametrie;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Mediametrie_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Mediametrie_createSuper(Mediametrie);function Mediametrie(defaultSerial){var _this;if(!(this instanceof Mediametrie))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).serial=defaultSerial,_this._mediametrieStreamTag=null,_this._mediametrieStreamTagReady=!1,_this}return subClass=Mediametrie,(_AddonAbstract=[{key:"init",value:function(){var _this2=this;("sqsu5"===this.player.infos.owner||"sq5x3"===this.player.infos.owner||this.player.infos.statsMediametrie&&void 0!==this.player.getInfo("mediametrieSerial")&&""!==this.player.getInfo("mediametrieSerial"))&&("undefined"==typeof eStatTag?HttpRequest_default().getScript("https://js.estat.com/js/mu-7.2.js",this.initStatTag.bind(this)):this.initStatTag(),this.serial=this.player.getInfo("mediametrieSerial")||this.serial,this.player.addListener("ready",function(){this.player.on("ended",this.onVideoEnd.bind(this))}.bind(this)),this.player.addListener("reinit",function(player){_this2.reInitDuration(player.infos.duration)}))}},{key:"initStatTag",value:function(){if("sqsu5"===this.player.infos.owner||"sq5x3"===this.player.infos.owner)try{if(void 0===this.player.infos.metaData||""===this.player.infos.metaData.trim())return;var rematchMetaData=JSON.parse(this.player.infos.metaData),rematchDate=new Date(1e3*rematchMetaData.date),rematchDays=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],mediametrieTagObject={serial:"299099218738",measure:"streaming",consentType:"exempted",streaming:{diffusion:"replay",callbackPosition:this.player.getPosition.bind(this.player),playerName:"Digiteka-player-v3",streamName:rematchMetaData.id,streamGenre:rematchMetaData.sportName.charAt(0).toUpperCase()+rematchMetaData.sportName.slice(1),streamDuration:parseInt(this.player.infos.duration),probe:!0},levels:{level_1:this.removeRematchSpecialChars(rematchMetaData.type),level_2:this.removeRematchSpecialChars(rematchMetaData.club1Alias),level_3:this.removeRematchSpecialChars(rematchMetaData.club2Alias),level_4:this.removeRematchSpecialChars(rematchMetaData.author),level_5:this.removeRematchSpecialChars(rematchMetaData.competitionName)},newLevels:{newLevel_1:rematchDate.getDate()+"-"+(rematchDate.getMonth()+1)+"-"+rematchDate.getFullYear(),newLevel_2:rematchDate.getHours(),newLevel_3:rematchDays[rematchDate.getDay()].toLowerCase().charAt(0).toUpperCase()+rematchDays[rematchDate.getDay()].slice(1),newLevel_4:this.removeRematchSpecialChars(rematchMetaData.userLevel),newLevel_5:this.removeRematchSpecialChars(rematchMetaData.categoryName),newLevel_6:this.removeRematchSpecialChars(rematchMetaData.placeName)}}}catch(e){}else mediametrieTagObject={serial:this.serial,measure:"streaming",streaming:{diffusion:"replay",callbackPosition:this.player.getPosition.bind(this.player),playerName:"DIGITEKA Player v3.0",streamName:this.player.infos.title,streamDuration:parseInt(this.player.infos.duration),probe:!0}};top.location!==document.location&&(mediametrieTagObject.implementation="frame"),this.player._mediametrieStreamTag=new eStatTag(mediametrieTagObject)}},{key:"reInitDuration",value:function(duration){this.player._mediametrieStreamTag&&"before_preroll"!==this.player._state&&this.player._mediametrieStreamTag.set({streaming:{streamDuration:duration}})}},{key:"onVideoEnd",value:function(){this.player._mediametrieStreamTag&&"before_preroll"!==this.player._state&&this.player._mediametrieStreamTag.notifyPlayer("stop")}},{key:"removeRematchSpecialChars",value:function(txt){return txt?txt.replace(/[^A-Za-z0-9]/g,"-"):""}}])&&Mediametrie_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Mediametrie_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Mediametrie}(PlayerAdapterFactory());function Amazon_typeof(obj){return(Amazon_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Amazon_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Amazon_setPrototypeOf(o,p){return(Amazon_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Amazon_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Amazon_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Amazon_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Amazon_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Amazon_getPrototypeOf(o){return(Amazon_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Amazon=function(_AddonAbstract){var subClass=Amazon;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Amazon_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=Amazon_createSuper(Amazon);function Amazon(timeout){var _this;if(!(this instanceof Amazon))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).params=_this.bidAmazon=!1,_this.loadAmazon=!1,_this.bidParams={},_this.pubID=3906,_this.timeout=timeout,_this.gdpr_consent="",_this}return subClass=Amazon,(_AddonAbstract=[{key:"init",value:function(campaigns,gdpr_consent){this.checkApstag(),this.gdpr_consent=gdpr_consent,this.bidParams=JSON.parse(campaigns[0].bid_params),void 0!==this.bidParams.pubID&&(this.pubID=this.bidParams.pubID),apstag.init({pubID:this.pubID,videoAdServer:"DFP",bidTimeout:this.timeout,gdpr:{enabled:1,consent:gdpr_consent},deals:!0})}},{key:"checkApstag",value:function(){function q(c,r){a[a9]._Q.push([c,r])}var a9,a,s,A,p;"undefined"==typeof apstag&&(a9="apstag",a=window,p=document,s="script",a[a9]||(a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(A=p.createElement(s)).async=!0,A.src="//c.amazon-adsystem.com/aax2/apstag.js",(p=p.getElementsByTagName(s)[0]).parentNode.insertBefore(A,p)))}},{key:"requestAmazon",value:function(){return new Promise(function(resolve){apstag.fetchBids({slots:[{slotID:"videoSlot",mediaType:"video"}]},function(bids,err){if(0<bids.length)try{bids.forEach(function(bid){resolve(JSON.parse('{"'+decodeURIComponent(bid.helpers.encodedQsParams().substring(3)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'))})}catch(error){resolve({})}else resolve({})})})}},{key:"getStatus",value:function(){var _this2=this;return new Promise(function(resolve){var start_time=Date.now(),that=_this2;function checkFlag(){that.loadAmazon||Date.now()>start_time+2e3?resolve({load:that.loadAmazon,bidAmazon:that.bidAmazon}):window.setTimeout(checkFlag.bind(that),30)}checkFlag()})}}])&&Amazon_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&Amazon_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),Amazon}(PlayerAdapterFactory());function DebugLog_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const library_DebugLog=function(){function DebugLog(){if(!(this instanceof DebugLog))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=DebugLog,staticProps=[{key:"isDebugActive",value:function(){return 1==parseInt(DebugLog._readCookie("DEBUG_LOG"))}},{key:"_readCookie",value:function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(name))return c.substring(name.length,c.length)}return""}}],(protoProps=null)&&DebugLog_defineProperties(Constructor.prototype,protoProps),staticProps&&DebugLog_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DebugLog}();function Prebid_typeof(obj){return(Prebid_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Prebid_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Prebid_setPrototypeOf(o,p){return(Prebid_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Prebid_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=Prebid_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=Prebid_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===Prebid_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function Prebid_getPrototypeOf(o){return(Prebid_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_Prebid=function(_AddonAbstract){var subClass=Prebid;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&Prebid_setPrototypeOf(subClass,_AddonAbstract);var protoProps,_super=Prebid_createSuper(Prebid);function Prebid(){if(!(this instanceof Prebid))throw new TypeError("Cannot call a class as a function");return _super.call(this)}return subClass=Prebid,_AddonAbstract=[{key:"extractAdUnitIdFromURL",value:function(url){url=url.match(/iu=(.*?)&/);return!(!Array.isArray(url)||void 0===url[1])&&url[1]}},{key:"getBidParamFromUltimediaAd",value:function(ultiAd){try{var bidInfo=JSON.parse(ultiAd.bid_params);return bidInfo.dgid=ultiAd.id,bidInfo}catch(e){return!1}}},{key:"getXMLHttpRequest",value:function(){var xhr=null;if(!window.XMLHttpRequest&&!window.ActiveXObject)return null;if(window.ActiveXObject)try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP")}else xhr=new XMLHttpRequest;return xhr}}],(protoProps=[{key:"init",value:function(){var _this=this,reset=0<arguments.length&&void 0!==arguments[0]&&arguments[0],sspParams=(this.lauchOnce=!1,this.statUrl="//ads.videoadex.com/deliver/statistiques/",this.mappingId={},this.bidders={},this.timeout=3e3,this.consentString=!1,this.player.amazon=!1,this.player.amazonParams="",this.player.custParams={},this.player.prebid={},this.player.prebid.useDfp=!1,this.player.prebid.bidWinnerUlti="",this.player.prebid.adUnit=null,this.player.prebid.urlDfp="",this.player.hbBidders=["prebid"],this.player.requestManager={adserverRequestSent:!1,a9:!1,prebid:!1},this.ias={hasResponded:0,isInitialized:0,fraud:0,adt:0,alc:0,dlm:0,drg:0,hat:0,off:0,vio:0,ids:[]},this.hbRequests=[],this.hbResponses=[],this.player.hbResponses=[],this.player.a9Responses=[],this.player.hbDeals=[],this.player.sfxDeals=[],this.player.xandrDeals=[],this.player.dfpDeals=[],this.player.dfpDealIds=[],this.player.prebidReady=!1,this.player.HBComplete=!1,this.adCampaignDfp={},this.playHBTimeoutId=!1,this.UKcompanyIds=[16432,25410,25617,25796,28256,28285,37920],this.pubIdToSellerChainCompanyIds=[16364,56042],this.sspParams={},this.sspParamKeys=[],this.player.infos.sspParam);if(sspParams)try{sspParams=JSON.parse(decodeURIComponent(sspParams)),this.sspParams=sspParams,this.sspParamKeys=Object.keys(sspParams)}catch(e){console.log("Erreur de parsing du sspParam")}sspParams=window.pbjsDtk||{};void 0!==this.player.getInfo("pubstackTrackId")&&""!==this.player.getInfo("pubstackTrackId")&&null!==this.player.getInfo("pubstackTrackId")&&(window.pbjs=sspParams),this.reset=reset,this.reset||this.player.addListener("allHBTagReceived",function(){_this.player.HBComplete=!0,_this.player.adPlayer&&_this.player.adPlayer.startWaterfall()}),1!==this.player.infos.adBlock&&(this.player.hasReceivedCmpResponse()||this.player.infos.gdprconsentstring&&""!==this.player.infos.gdprconsentstring?this.initAd():this.setTimeoutHB())}},{key:"getXMLHttpRequest",value:function(){var xhr=null;if(!window.XMLHttpRequest&&!window.ActiveXObject)return null;if(window.ActiveXObject)try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP")}else xhr=new XMLHttpRequest;return xhr}},{key:"iasCall",value:function(){var referrerUrl=0<document.referrer.length?document.referrer:window.location.href,url=(this.player.infos.mdtk,this.player.infos.zone,this.player.infos.mdtk,this.player.infos.zone,"https://pixel.adsafeprotected.com/services/pub?anId=931501&campId=0&chanId="+encodeURIComponent(this.player.infos.mdtk+"/"+this.player.infos.zone)+"&pubOrder=0&placementId="+this.player.infos.zone+"&pubCreative=0&custom="+this.player.infos.mdtk+"&custom2="+this.player.infos.s_url+"&slot=%7Bid:dgtk_01310035_1_0_FR_82,ss:%5B%5D,p:dgtk_01310035_1_0_FR_82%7D&wr=1664.1243&&sr=2560.1440&&url="+encodeURIComponent(referrerUrl)),referrerUrl=(this.player.logInfo("ias scanned url",referrerUrl,"object"),this.getXMLHttpRequest());return referrerUrl.open("GET",url,!1),referrerUrl.send(null),200!==referrerUrl.status||""===referrerUrl.responseText?"":referrerUrl.responseText}},{key:"iasInit",value:function(iasResponseText){var iasValues={verylow:4,low:3,medium:2,high:1,veryhigh:0},brandSafetyVariables=["adt","alc","dlm","drg","hat","off","vio"],str={};if(1!==this.ias.isInitialized&&1!==this.ias.hasResponded)if(""!==iasResponseText&&void 0!==iasResponseText){if(void 0!==(str=JSON.parse(iasResponseText)).code&&200!==str.code)return this.player.logInfo("error ias",iasResponseText,"object"),this.ias.isInitialized=0,void(this.ias.hasResponded=1);this.ias.fraud="false"===str.fr.toLowerCase()?0:1,this.player.isAdFraudInventory=1===this.ias.fraud;for(var i in brandSafetyVariables){var i=brandSafetyVariables[i],tmp=void 0!==str[i]?str[i].toLowerCase():"";this.ias[i]=void 0!==iasValues[tmp]?iasValues[tmp]:4}if(void 0!==str["ias-kw"]&&0<str["ias-kw"].length){var _i,_tmp=str["ias-kw"].split(",");for(_i in _tmp){var id=_tmp[_i];id.length<=6||(id=(id=id.trim()).substring(4,id.length-3),this.ias.ids.push(id))}}this.ias.isInitialized=1,this.ias.hasResponded=1}else this.player.logInfo("error : ias","bad response status or empty text","log")}},{key:"iasFilterAd",value:function(){var key,str,_this2=this,adServerTargeting=pbjsDtk.getAdserverTargeting();for(key in this.player.logInfo("Ias response",adServerTargeting,"object"),adServerTargeting)key.startsWith("dgtk_")&&void 0!==adServerTargeting[key].fr&&(str=JSON.stringify(adServerTargeting[key]),this.iasInit(str));for(var campaignType in{dbpreroll:1,postroll:1,preroll:1})(function(campaignType){if(void 0===_this2.player.campaigns[campaignType]||_this2.player.campaigns[campaignType].length<=0)return;_this2.player.campaigns[campaignType]=_this2.player.campaigns[campaignType].filter(function(ad){if(_this2.iasValidation(ad))return!0;_this2.player.logInfo("ias campaign invalidation delete ("+campaignType+") ",ad.id,"log")})})(campaignType);this.prebidAdsRequestedDeals=this.prebidAdsRequestedDeals.filter(function(ad){if(_this2.iasValidation(ad))return!0;void 0!==_this2.player.hbDeals[ad.deal_ssp]&&(_this2.player.hbDeals[ad.deal_ssp]=_this2.player.hbDeals[ad.deal_ssp].filter(function(deal){return deal.dealId!=ad.deal_id}),_this2.player.logInfo("ias campaign invalidation delete (Deal) ",ad.id,"log"))})}},{key:"iasValidation",value:function(campaign){if(void 0===campaign.ias_activated||0==campaign.ias_activated)return!0;0===this.ias.isInitialized&&this.iasInit();var i,brandSafetyVariables=[{campaignVarName:"ias_adt",iasVarName:"adt",errorMessage:"adult"},{campaignVarName:"ias_alc",iasVarName:"alc",errorMessage:"alcohol"},{campaignVarName:"ias_dlm",iasVarName:"dlm",errorMessage:"illegal download"},{campaignVarName:"ias_drg",iasVarName:"drg",errorMessage:"drug"},{campaignVarName:"ias_hat",iasVarName:"hat",errorMessage:"hate"},{campaignVarName:"ias_off",iasVarName:"off",errorMessage:"offensive language"},{campaignVarName:"ias_vio",iasVarName:"vio",errorMessage:"violence"}],errors=[];for(i in void 0!==campaign.ias_fraud&&1==parseInt(campaign.ias_fraud)&&1===this.ias.fraud&&errors.push("fraud"),brandSafetyVariables){var camp=brandSafetyVariables[i].campaignVarName,iasVar=brandSafetyVariables[i].iasVarName;void 0!==campaign[camp]&&0<campaign[camp]&&campaign[camp]>this.ias[iasVar]&&errors.push(brandSafetyVariables[i].errorMessage)}if(0<this.ias.ids.length){var campaignIds=this.explode(";",campaign.ias_campaign_ids);if(0<campaignIds.length)for(var _i2 in campaignIds){_i2=campaignIds[_i2];-1!==this.ias.ids.indexOf(_i2)&&errors.push("id found : "+_i2)}}return errors.length<=0||(errors.unshift("campaignId: "+campaign.id),this.player.logInfo("ias brand not safe",errors,"object"),!1)}},{key:"explode",value:function(glue,str){var tmp,res=[];if(""===str)return res;if(-1===str.indexOf(glue))return""===(tmp=str.trim())||res.push(tmp),res;var i,tab=str.split(glue);for(i in tab){var _tmp2=tab[i].trim();""!==_tmp2&&res.push(_tmp2)}return res}},{key:"checkOS",value:function(os){return 0===os.length||-1!==os.indexOf(this.player.getOs())}},{key:"setTimeoutHB",value:function(){this.playHBTimeoutId=setTimeout(function(){49<this.player.getVisibilityRate()||5===this.player.infos.float_video?this.initAd():(this.player.infos.playMultiAdTimeoutDelay=2,this.setTimeoutHB())}.bind(this),this.player.infos.playMultiAdTimeoutDelay)}},{key:"initAd",value:function(){var _this3=this;if(!1===this.lauchOnce){var bids=[];if(this.aliases=[],this.lauchOnce=!0,this.videoAdUnit=this.getDefaultVideoAdUnit(),this.consentString=this.player.infos.gdprconsentstring&&""!==this.player.infos.gdprconsentstring?this.player.infos.gdprconsentstring:this.player.getConsentData(),this.prebidAdsRequested=this.player.campaigns.preroll.filter(function(campaign){return("1"===campaign.is_hb||1===campaign.is_hb||!0===campaign.is_hb)&&"amazon"!==campaign.bidder&&"dfp"!==campaign.bidder&&!(""===_this3.consentString&&"oneVideo"===campaign.bidder)&&_this3.checkOS(void 0!==campaign.oss?campaign.oss:[])}),this.player.getInfo("filterVendorsAllowed")&&(this.prebidAdsRequested=this.prebidAdsRequested.filter(function(campaign){return campaign.bidder in _this3.player.vendorsAllowed&&_this3.player.vendorsAllowed[campaign.bidder]})),this.prebidAdsRequestedDeals=this.player.campaigns.preroll.filter(function(campaign){return null!==campaign.deal_id&&_this3.checkOS(void 0!==campaign.oss?campaign.oss:[])}),this.prebidAdsRequestedAmazon=this.player.campaigns.preroll.filter(function(campaign){return("1"===campaign.is_hb||1===campaign.is_hb||!0===campaign.is_hb)&&_this3.checkOS(void 0!==campaign.oss?campaign.oss:[])&&_this3.player.amazonConsent&&"amazon"===campaign.bidder}),this.prebidAdsRequestedDfp=this.player.campaigns.preroll.filter(function(campaign){return("1"===campaign.is_hb||1===campaign.is_hb||!0===campaign.is_hb)&&"dfp"===campaign.bidder&&_this3.checkOS(void 0!==campaign.oss?campaign.oss:[])}),this.prebidAdsRequestedDeals.length)for(var ad in this.player.logInfo("HEADER BIDDING Deals List",this.prebidAdsRequestedDeals,"object"),this.prebidAdsRequestedDeals)this.player.hbDeals.hasOwnProperty(this.prebidAdsRequestedDeals[ad].deal_ssp)||(this.player.hbDeals[this.prebidAdsRequestedDeals[ad].deal_ssp]=[]),this.player.hbDeals[this.prebidAdsRequestedDeals[ad].deal_ssp].push({dealId:this.prebidAdsRequestedDeals[ad].deal_id,isAdfraudBlocked:1===parseInt(this.prebidAdsRequestedDeals[ad].is_adloox_adfraud),dgid:this.prebidAdsRequestedDeals[ad].id,autopilot:this.prebidAdsRequestedDeals[ad].autopilot,showSkipAd:parseInt(this.prebidAdsRequestedDeals[ad].show_skip_ad),skipAdType:parseInt(this.prebidAdsRequestedDeals[ad].skip_ad_type),skipAdDelay:parseInt(this.prebidAdsRequestedDeals[ad].skip_ad_delay),creativeIds:this.prebidAdsRequestedDeals[ad].perfRuleParams?JSON.parse(this.prebidAdsRequestedDeals[ad].perfRuleParams).creativeIds:[]});if(0===this.prebidAdsRequestedDfp.length)return this.player.logInfo("HEADER BIDDING","Pas de campagne DFP Header Bidding."),void this.player.notify("allHBTagReceived");this.prebidAdsRequestedAmazon.length&&this.prebidAdsRequestedDfp.length&&(this.player.logInfo("HEADER BIDDING - Init AMAZON","Request Amazon"),this.player.logInfo("HEADER BIDDING Amazon List",this.prebidAdsRequestedAmazon,"object"),this.player.amazon=new addons_Amazon(this.timeout),this.player.amazon.init(this.prebidAdsRequestedAmazon,this.consentString),this.player.hbBidders.push("a9")),this.player.logInfo("HEADER BIDDING List",this.prebidAdsRequested,"object"),this.adCampaignDfp=this.prebidAdsRequestedDfp[0];var dfpBidParams=JSON.parse(this.adCampaignDfp.bid_params);if(dfpBidParams.dgid=this.adCampaignDfp.id,this.adCampaignDfp.bid={params:dfpBidParams},this.player.prebid.adUnit={adUnitId:Prebid.extractAdUnitIdFromURL(dfpBidParams.url),campaignId:dfpBidParams.dgid,campaign:this.adCampaignDfp,bidGranularity:void 0===dfpBidParams.bidGranularity?1:parseFloat(dfpBidParams.bidGranularity),bidMax:void 0===dfpBidParams.bidMax?30:parseFloat(dfpBidParams.bidMax),bidPrecision:void 0===dfpBidParams.bidPrecision?2:parseFloat(dfpBidParams.bidPrecision),adMaxDuration:void 0===dfpBidParams.adMaxDuration?"":"&max_ad_duration="+parseInt(dfpBidParams.adMaxDuration)},this.player.prebid.adUnit.adUnitId&&(this.player.prebid.useDfp=!0),!this.prebidAdsRequested.length)return this.player.logInfo("HEADER BIDDING","Pas de campagne Header Bidding."),dfpBidParams=this.getDfpCampaign(),this.player.notify("prebidAdReady",dfpBidParams),void this.player.notify("allHBTagReceived");this.player.adPlayerHbStats.hb=1;var _ad,dfpBidParams=0<this.prebidAdsRequestedDfp.length?JSON.parse(this.prebidAdsRequestedDfp[0].bid_params).url:"undefined",dfpBidParams=(this.isDtkGam="undefined"===dfpBidParams||-1!==dfpBidParams.indexOf("/34631970/ca-video-pub-7026431251527825-tag"),void 0!==this.player.getInfo("sellerJsonDomainNumber")?this.player.getInfo("sellerJsonDomainNumber"):1),dfpBidParams=(this.sellerId="dtk-"+this.player.getInfo("mdtk")+"-"+dfpBidParams,this.player.getInfo("companyId"));for(_ad in-1===this.UKcompanyIds.indexOf(dfpBidParams)&&-1===this.pubIdToSellerChainCompanyIds.indexOf(dfpBidParams)||(this.sellerId=dfpBidParams),this.prebidAdsRequested){var alias=this.prebidAdsRequested[_ad].alias,mimes=this.videoAdUnit.mediaTypes.video.mimes,bidInfo=Prebid.getBidParamFromUltimediaAd(this.prebidAdsRequested[_ad]);if(bidInfo&&""!==alias){if(bidInfo.video=void 0!==bidInfo.video?bidInfo.video:{},-1!==alias.toLowerCase().indexOf("xandr")||-1!==alias.toLowerCase().indexOf("appnexus"))try{if(-1!==this.sspParamKeys.indexOf(alias)){var paramName,params=this.sspParams[alias];for(paramName in params)"keywords"===paramName&&(bidInfo[paramName]=params[paramName])}bidInfo.video.frameworks=[1,2,6],bidInfo.video.context="pre_roll"}catch(e){}if(["freewheel-366","freewheel-dtk"].indexOf(alias),0,-1!==alias.toLowerCase().indexOf("freewheel")||-1!==alias.toLowerCase().indexOf("sfx"))try{if(bidInfo.vastUrlParams={schain:"1.0,1!digiteka.com,"+this.sellerId.toString()+",1"},-1!==this.sspParamKeys.indexOf(alias)){var _paramName,_params=this.sspParams[alias];for(_paramName in _params)bidInfo.vastUrlParams[_paramName]=_params[_paramName]}bidInfo.gdpr_consented_providers="3,7,11,12,15,20,22,35,39,43,46,48,55,57,61,62,66,70,80,83,85,86,89,93,108,117,122,124,125,126,131,134,135,136,143,144,147,149,153,154,159,161,162,165,167,171,178,184,188,192,195,196,202,209,211,216,218,221,228,229,230,236,239,241,253,255,259,266,271,272,274,286,291,294,303,308,310,311,313,314,316,317,322,323,326,327,336,338,340,348,350,358,359,363,367,370,371,384,385,389,393,394,397,398,407,414,415,424,429,430,432,436,438,440,442,443,445,448,449,453,459,479,482,486,491,492,494,495,503,505,510,522,523,528,537,540,550,559,560,568,571,574,575,576,584,585,587,588,590,591,592,595,609,621,624,723,725,733,737,776,780,782,787,797,798,802,803,814,817,820,821,827,829,839,853,864,867,874,899,904,922,926,931,932,933,938,955,973,976,979,981,985,987,991,1003,1024,1025,1027,1028,1029,1033,1034,1040,1046,1047,1048,1051,1052,1053,1054,1062,1063,1067,1072,1085,1092,1095,1097,1099,1100,1107,1126,1127,1135,1143,1149,1152,1162,1166,1167,1170,1171,1172,1186,1188,1192,1199,1201,1204,1205,1211,1212,1215,1220,1225,1226,1227,1230,1232,1236,1241,1248,1250,1252,1268,1275,1276,1284,1286,1290,1298,1301,1307,1312,1313,1317,1329,1336,1344,1345,1356,1362,1365,1375,1403,1409,1411,1415,1416,1419,1423,1440,1442,1449,1451,1455,1456,1465,1468,1495,1496,1503,1509,1512,1514,1517,1520,1525,1540,1542,1547,1548,1555,1558,1564,1570,1575,1577,1579,1583,1584,1591,1598,1603,1608,1613,1616,1626,1631,1633,1638,1642,1648,1651,1652,1653,1660,1665,1667,1669,1671,1674,1677,1678,1682,1684,1697,1699,1703,1705,1716,1720,1721,1722,1725,1732,1733,1735,1739,1741,1745,1750,1753,1760,1765,1769,1776,1780,1782,1786,1791,1794,1799,1800,1801,1808,1810,1825,1827,1831,1832,1834,1837,1838,1840,1842,1843,1844,1845,1858,1859,1863,1866,1870,1872,1875,1878,1880,1882,1883,1889,1892,1896,1898,1899,1902,1905,1911,1922,1928,1929,1934,1942,1943,1944,1945,1958,1960,1962,1963,1964,1967,1968,1978,1985,1986,1987,1998,2003,2007,2012,2013,2016,2027,2035,2038,2039"}catch(e){}if("criteo"===alias.toLowerCase())try{void 0!==bidInfo.maxduration&&(this.videoAdUnit.mediaTypes.video.maxduration=bidInfo.maxduration,delete bidInfo.maxduration)}catch(e){}if(-1!==alias.toLowerCase().indexOf("onevideo"))try{bidInfo.video={placement:1,playerWidth:this.videoAdUnit.mediaTypes.video.playerSize[0],playerHeight:this.videoAdUnit.mediaTypes.video.playerSize[1],mimes:mimes,protocols:[2,3,5,6],api:[1,2]}}catch(e){}if(-1!==alias.toLowerCase().indexOf("richaud"))try{bidInfo.supplyType="site"}catch(e){}if(-1!==alias.toLowerCase().indexOf("spotx")||-1!==alias.toLowerCase().indexOf("onevideo"))try{if(-1!==alias.toLowerCase().indexOf("spotxipm")&&(bidInfo.mimes=["video/mp4","video/webm"]),-1!==this.sspParamKeys.indexOf(alias)){bidInfo.custom={};var _paramName2,_params2=this.sspParams[alias];for(_paramName2 in _params2)bidInfo.custom[_paramName2]=_params2[_paramName2]}}catch(e){}if(-1!==alias.toLowerCase().indexOf("ix")||-1!==alias.toLowerCase().indexOf("pubmatic"))try{bidInfo.size=[this.videoAdUnit.mediaTypes.video.playerSize[0],this.videoAdUnit.mediaTypes.video.playerSize[1]];var ixMaxDuration=void 0!==bidInfo.video&&void 0!==bidInfo.video.maxduration&&0<bidInfo.video.maxduration?bidInfo.video.maxduration:600;bidInfo.video={mimes:mimes,startdelay:0,minduration:0,maxduration:ixMaxDuration,placement:1,protocols:[2,3,5,6,7,8],api:[1,2]}}catch(e){}if(-1!==alias.toLowerCase().indexOf("rubicon"))try{bidInfo.video={size_id:201,language:"fr"}}catch(e){}if(-1!==alias.toLowerCase().indexOf("triplelift"))try{bidInfo.video={mimes:["video/mp4"],w:640,h:480}}catch(e){}if(-1!==alias.toLowerCase().indexOf("aniview"))try{bidInfo.rendererConfig={tagUrl:"https://tg1.aniview.com/api/adserver/spt?AV_TAGID=605c8739b12eaf17b150b549&AV_PUBLISHERID=5ec265e09fe2c951b30c2d25",tagId:"AV605c8739b12eaf17b150b549"}}catch(e){}if(-1!==alias.toLowerCase().indexOf("smart"))try{if(bidInfo.video={playbackmethod:[2],protocol:6,startDelay:1},-1!==this.sspParamKeys.indexOf(alias)){var _paramName3,_params3=this.sspParams[alias],targets=[];for(_paramName3 in _params3)targets.push(alias+"="+_params3[_paramName3]);bidInfo.target=targets.join(",")}}catch(e){}bids.push({bidder:alias,params:bidInfo}),this.aliases.push({alias:alias,bidder:this.prebidAdsRequested[_ad].bidder,bidAjustment:this.prebidAdsRequested[_ad].bid_ajustment})}}this.videoAdUnit.bids=bids,this.prebidAdsRequestedAmazon.length&&this.prebidAdsRequestedDfp.length&&(this.player.logInfo("HEADER BIDDING - Request Amazon",this.videoAdUnit,"object"),this.player.amazon.requestAmazon().then(function(bidResponse){_this3.player.logInfo("HEADER BIDDING - Response Amazon",bidResponse,"object"),bidResponse.id=_this3.prebidAdsRequestedAmazon[0].id,_this3.player.a9Responses.push(bidResponse),_this3.headerBidderBack("a9",bidResponse)}),void 0!==this.adCampaignDfp.bid_params&&void 0!==this.adCampaignDfp.bid_params&&void 0!==JSON.parse(this.adCampaignDfp.bid_params).currency?this.player.sendEvent("hbarq",{req:JSON.stringify([{bc:"a9",pubId:this.player.amazon.pubID,cp:this.prebidAdsRequestedAmazon[0].id,cur:JSON.parse(this.adCampaignDfp.bid_params).currency}])}):this.player.sendEvent("hbarq",{req:JSON.stringify([{bc:"a9",pubId:this.player.amazon.pubID,cp:this.prebidAdsRequestedAmazon[0].id}])})),this.player.logInfo("HEADER BIDDING - Request Prebid",this.videoAdUnit,"object"),this.requestPrebid()}}},{key:"getDefaultVideoAdUnit",value:function(){this.player.prebid.prebidCode="dgtk_"+this.player.getInfo("mdtk")+"_"+this.player.getInfo("zone")+"_"+this.player.getInfo("isMobile")+"_"+this.player.getInfo("country_code")+"_"+Math.floor(Math.random()*Math.floor(100));var sizeprebidjs=[640,480];return"01357940"===this.player.getInfo("mdtk")?sizeprebidjs=[640,533]:-1!==this.UKcompanyIds.indexOf(this.player.getInfo("companyId"))&&(sizeprebidjs=[640,360]),{code:this.player.prebid.prebidCode,mediaTypes:{video:{context:"instream",playerSize:[sizeprebidjs],mimes:["video/mp4","application/javascript","video/webm"],protocols:[2,3,5,6,7,8],minduration:6,maxduration:this.player.getInfo("prebidMaxDuration"),linearity:1,api:[1,2]}}}}},{key:"requestPrebid",value:function(){var appnexusAuctionKeywords,_this4=this,pbjsDtk=window.pbjsDtk||{},getTCData=(pbjsDtk.que=pbjsDtk.que||[],this.player.getTcData()?this.player.getTcData():{tcString:this.player.getConsentData(),gdprApplies:1===parseInt(this.player.getGdprApplies())}),mdtks20Minutes=["01357940","01737086","01946435","01491621"],getTCData=(pbjsDtk.setConfig({debug:library_DebugLog.isDebugActive(),enableSendAllBids:-1===mdtks20Minutes.indexOf(this.player.getInfo("mdtk")),useBidCache:!0,bidderTimeout:this.timeout,pageUrl:this.player.infos.realReferer,currency:{adServerCurrency:void 0===this.adCampaignDfp.bid.params.currency?"EUR":this.adCampaignDfp.bid.params.currency,defaultRates:{USD:{EUR:.88}}},consentManagement:{usp:{cmpApi:"iab",timeout:100},gdpr:{cmpApi:"static",consentData:{getTCData:getTCData}}},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache",ignoreBidderCacheKey:!0},priceGranularity:{buckets:[{precision:this.player.prebid.adUnit.bidPrecision,max:this.player.prebid.adUnit.bidMax,increment:this.player.prebid.adUnit.bidGranularity}]},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"digiteka.com",sid:this.sellerId.toString(),hp:1}]}}}),[]);void 0!==this.player.adlooxParams.clientId&&getTCData.push([{name:"adloox",waitForIt:!1,params:{slotinpath:!1}}]),this.player.infos.realReferer&&-1===this.player.infos.realReferer.indexOf("https://www.ultimedia.com/deliver/generic")&&!0===this.isIasCampaigns()&&getTCData.push({name:"ias",waitForIt:!0,params:{pubId:931501,pageUrl:this.player.infos.realReferer}}),void 0!==this.player.adlooxParams.clientId&&463!==this.player.adlooxParams.clientId&&560!==this.player.adlooxParams.clientId&&544!==this.player.adlooxParams.clientId&&getTCData.push({name:"weborama",waitForIt:!0,params:{weboCtxConf:{token:"263GgpvUT8WDTRhPqPTz",targetURL:this.player.infos.realReferer}}}),-1!==mdtks20Minutes.indexOf(this.player.getInfo("mdtk"))&&pbjsDtk.setConfig({userSync:{userIds:[{name:"id5Id",params:{partner:786},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}],auctionDelay:250}}),0<getTCData.length&&pbjsDtk.setConfig({realTimeData:{auctionDelay:100,dataProviders:getTCData}}),void 0!==this.player.adlooxParams.clientId&&pbjsDtk.enableAnalytics({provider:"adloox",options:{client:"digiteka",clientid:this.player.adlooxParams.clientId,platformid:this.player.adlooxParams.platformId,tagid:this.player.adlooxParams.tagId,params:{id1:function(b){return b.adUnitCode},id2:"%%pbadslot%%",id3:"%%pageurl%%",id4:function(b){return b.adId},id5:function(b){return b.dealId},id6:function(b){return b.creativeId},id7:function(b){return b.size},id8:function(b){return b.bidder},id11:"$ADLOOX_WEBSITE"}}}),this.player.hbDeals.hasOwnProperty("xandr")&&(appnexusAuctionKeywords={},this.player.hbDeals.xandr.forEach(function(deal){_this4.player.isAdFraudInventory&&(!_this4.player.isAdFraudInventory||deal.isAdfraudBlocked)||(_this4.player.xandrDeals.push(deal.dealId),appnexusAuctionKeywords["deal_"+deal.dealId]=deal.dealId)}),pbjsDtk.setConfig({appnexusAuctionKeywords:appnexusAuctionKeywords})),pbjsDtk.que.push(function(){_this4.reset&&!_this4.player.isFalseOutstream||(pbjsDtk.onEvent("bidRequested",function(request){var key,refererInfoUrl=request.refererInfo.referer;if(void 0!==(refererInfoUrl=void 0!==refererInfoUrl&&refererInfoUrl?refererInfoUrl:request.refererInfo.legacy.referer)&&0===refererInfoUrl.indexOf("https://www.ultimedia.com/deliver/generic")&&void 0!==_this4.player.urlfacebook&&(request.refererInfo.referer=_this4.player.urlfacebook),-1!==request.bidderCode.toLowerCase().indexOf("sfx")||-1!==request.bidderCode.toLowerCase().indexOf("freewheel-ssp"))try{_this4.player.hbDeals.hasOwnProperty("freewheel-ssp")&&!function(){var bidKey,bids=request.bids;for(bidKey in bids)!function(bidKey){void 0===bids[bidKey].params.vastUrlParams&&(bids[bidKey].params.vastUrlParams={}),_this4.player.hbDeals["freewheel-ssp"].forEach(function(deal){_this4.player.isAdFraudInventory&&(!_this4.player.isAdFraudInventory||deal.isAdfraudBlocked)||(bids[bidKey].params.vastUrlParams["deal_"+deal.dealId]=deal.dealId,_this4.player.sfxDeals.push("deal_"+deal.dealId+"="+deal.dealId))})}(bidKey)}()}catch(e){}if(-1!==request.bidderCode.toLowerCase().indexOf("smart"))try{var bidKey,bids=request.bids;for(bidKey in bids)bids[bidKey].mediaTypes.video.protocols=[6]}catch(e){}for(key in _this4.player.hbCampaignIds[request.bidderCode]=request.bids[0].params.dgid,request.bids){var bid=request.bids[key];_this4.player.hbBidderIds[bid.bidId]=bid.params.dgid}_this4.player.logInfo("HEADER BIDDING - Request",request,"object"),_this4.mapId(request),_this4.sendAdRequestStat(request.bids[0].params),void 0!==_this4.adCampaignDfp.bid&&void 0!==_this4.adCampaignDfp.bid.params&&void 0!==_this4.adCampaignDfp.bid.params.currency?_this4.hbRequests.push({bc:request.bidderCode,cp:request.bids[0].params.dgid,cur:_this4.adCampaignDfp.bid.params.currency}):_this4.hbRequests.push({bc:request.bidderCode,cp:request.bids[0].params.dgid});refererInfoUrl=new Set(_this4.aliases.map(function(alias){return alias.alias}));_this4.hbRequests.length===refererInfoUrl.size&&_this4.player.sendEvent("hbprq",{req:JSON.stringify(_this4.hbRequests)})}),pbjsDtk.onEvent("bidResponse",function(adResponse){_this4.player.logInfo("HEADER BIDDING - Response",adResponse,"object");var responseBidder,responseCampaignId=_this4.mappingId[adResponse.requestId],fDealId="",fDealCpm=0,responseDeal=[];void 0!==adResponse.dealId&&(fDealId=adResponse.dealId,fDealCpm=parseFloat(adResponse.pbCg),_this4.player.custParams.fdealid=fDealId,responseBidder=_this4.aliases.filter(function(alias){return alias.alias===adResponse.bidderCode})[0].bidder,responseDeal=void 0!==_this4.player.hbDeals[responseBidder]?_this4.player.hbDeals[responseBidder].filter(function(deal){return deal.dealId===fDealId}):[]),0<responseDeal.length&&(responseCampaignId=responseDeal[0].dgid),_this4.player.adPlayerHbStats.fdealid=fDealId,_this4.player.adPlayerHbStats.fdealcpm=fDealCpm,_this4.player.hbResponsesAdIds[responseCampaignId]=adResponse.adId,_this4.hbResponses.push({bc:adResponse.bidderCode,cpm:adResponse.cpm,cur:adResponse.currency,pbcg:adResponse.pbCg,vastUrl:adResponse.vastUrl,fdealid:fDealId,fdealcpm:fDealCpm,id:responseCampaignId}),_this4.onAdRespond(adResponse)}));var typePlayer,isOwned=0,adUnitPath=!1;if(0<_this4.prebidAdsRequestedDfp.length){isOwned=parseInt(_this4.prebidAdsRequestedDfp[0].isOwned);try{adUnitPath=new URL(JSON.parse(_this4.prebidAdsRequestedDfp[0].bid_params).url).searchParams.get("iu")}catch(e){console.log(e)}}_this4.player.logInfo("HEADER BIDDING - Config Prebid",pbjsDtk.getConfig(),"object"),void 0!==_this4.player.getInfo("pubstackTrackId")&&""!==_this4.player.getInfo("pubstackTrackId")&&null!==_this4.player.getInfo("pubstackTrackId")&&(typePlayer=1===_this4.player.infos.typePlayer?"simple":"smart",_this4.videoAdUnit.pubstack={adUnitName:"dtkPreRoll_"+(0<isOwned?1===isOwned?"propre_":"tiers_":"")+typePlayer},adUnitPath&&(_this4.videoAdUnit.pubstack.adUnitPath=adUnitPath)),pbjsDtk.addAdUnits(_this4.videoAdUnit),pbjsDtk.bidderSettings={standard:{adserverTargeting:[{key:"hb_bidder",val:function(bidResponse){return bidResponse.bidderCode}},{key:"hb_adid",val:function(bidResponse){return bidResponse.adId}},{key:"hb_pb",val:function(bidResponse){return bidResponse.pbCg}},{key:"hb_size",val:function(bidResponse){return bidResponse.size}},{key:"hb_source",val:function(bidResponse){return bidResponse.source}},{key:"hb_format",val:function(bidResponse){return bidResponse.mediaType}},{key:"hb_cache_id",val:function(bidResponse){return bidResponse.videoCacheKey}},{key:"hb_uuid",val:function(bidResponse){return bidResponse.videoCacheKey}},{key:"hb_deal",val:function(bidResponse){return bidResponse.dealId}}]}},_this4.aliases.forEach(function(alias){pbjsDtk.bidderSettings[alias.alias]={bidCpmAdjustment:function(bidCpm,bid){return"bliinkof"===bid.bidderCode?6:bidCpm*alias.bidAjustment}},pbjsDtk.aliasBidder(alias.bidder,alias.alias),-1!==alias.alias.toLowerCase().indexOf("adot")&&pbjsDtk.setBidderConfig({bidders:[alias.alias],config:{adot:{publisherId:{adot20m:"20minutes",adotpl:"planet",adotms:"mediastay"}[alias.alias]}}}),-1!==alias.alias.toLowerCase().indexOf("yahoo")&&pbjsDtk.setConfig({yahoossp:{mode:"video"}})}),pbjsDtk.requestBids({bidsBackHandler:function(bidResponses){var _this5=this,ortb2=pbjsDtk.getConfig("ortb2");void 0!==ortb2&&["site","user"].forEach(function(ortb2Key){if(ortb2.hasOwnProperty(ortb2Key))for(var key in ortb2[ortb2Key].ext.data){var valueArr,value=ortb2[ortb2Key].ext.data[key];Array.isArray(value)&&(value=value.join(",")),_this5.player.custParams.hasOwnProperty(key)&&0<_this5.player.custParams[key].length&&((valueArr=Object.values(_this5.player.custParams[key])).push(value),value=valueArr.join(",")),_this5.player.custParams[key]=value}}),this.headerBidderBack("prebid",bidResponses)}.bind(_this4)})})}},{key:"allBiddersBack",value:function(){return this.player.hbBidders.map(function(bidder){return this.player.requestManager[bidder]}.bind(this)).filter(Boolean).length===this.player.hbBidders.length}},{key:"headerBidderBack",value:function(bidder,bidResponses){var _this6=this;if("a9"===bidder?(this.player.logInfo("HEADER BIDDING - headerBidderBack a9","a9","object"),this.player.requestManager.a9=!0,void 0!==bidResponses.amznbid&&(pubId=void 0===(pubId=this.player.amazon.pubID)?null:pubId,this.player.sendEvent("hbarp",{res:JSON.stringify([{bc:"a9",bid:bidResponses.amznbid,pubId:pubId}])}))):"prebid"===bidder&&(this.player.logInfo("HEADER BIDDING - headerBidderBack prebid","prebid","object"),this.player.requestManager.prebid=!0),this.player.prebid.useDfp){if("prebid"===bidder)if(this.player.prebid.bidWinner=pbjsDtk.getHighestCpmBids(this.videoAdUnit),0!==this.player.prebid.bidWinner.length){for(var indexBid in this.player.prebid.bidWinner)if(this.player.prebid.prebidCode===this.player.prebid.bidWinner[indexBid].adUnitCode){this.player.prebid.bidWinner=this.player.prebid.bidWinner[indexBid];break}this.hbResponses.sort(function(response1,response2){return response2.cpm-response1.cpm}),this.player.hbResponses=this.hbResponses,-1!==this.player.prebid.bidWinner.bidderCode.indexOf("digiteka")&&2===this.player.digitekaBid.rule&&(pubId=parseFloat(this.hbResponses[0].pbcg),isNaN(pubId)&&(pubId=0),1===this.hbResponses.length?(this.player.prebid.bidWinner.cpm=this.player.hb_floor,pubId=parseFloat(this.player.prebid.bidWinner.cpm),isNaN(pubId)&&(pubId=0)):(highestNewCpm=this.hbResponses[1].cpm+.1)<=this.hbResponses[0].cpm&&(this.player.prebid.bidWinner.cpm=this.hbResponses[1].cpm+.1,pubId=parseFloat(this.hbResponses[1].pbcg)+.1,isNaN(pubId)&&(pubId=0),this.hbResponses[0].cpm=highestNewCpm,this.hbResponses[0].pbcg=pubId),pubId=pubId.toFixed(2).toString(),this.player.prebid.bidWinner.adserverTargeting.hb_pb=pubId,this.player.prebid.bidWinner.pbAg=pubId,this.player.prebid.bidWinner.pbCg=pubId,this.player.prebid.bidWinner.pbDg=pubId,this.player.prebid.bidWinner.pbHg=pubId,this.player.prebid.bidWinner.pbLg=pubId,this.player.prebid.bidWinner.pbMg=pubId,this.player.prebid.bidWinner.originalCpm=pubId),this.hbResponses2=[],this.hbResponses.forEach(function(res){res=Object.assign({},res);void 0!==res.vastUrl&&delete res.vastUrl,_this6.hbResponses2.push(res)}),this.player.sendEvent("hbprp",{res:JSON.stringify(this.hbResponses2)}),this.player.prebid.bidWinnerUlti=this.mappingId[this.player.prebid.bidWinner.requestId];var pubId,highestNewCpm=this.player.hbCampaignIds[this.player.prebid.bidWinner.bidderCode];this.player.adPlayerHbStats.hbn=this.getCampaign(highestNewCpm).nc,this.player.adPlayerHbStats.hbcpm=parseFloat(this.player.prebid.bidWinner.adserverTargeting.hb_pb),this.player.logInfo("HEADER BIDDING - Bid Winner",this.player.prebid.bidWinner,"object")}else this.player.logInfo("HEADER BIDDING","No responses.","object");"a9"===bidder&&(""===bidResponses?this.player.logInfo("HEADER BIDDING - No Ad AMAZON","no ad!!! "+this.prebidAdsRequestedAmazon[0].id):(this.player.amazon.bidWinnerUlti=this.prebidAdsRequestedAmazon[0].id,this.player.adPlayerHbStats.hba9=1,this.player.adPlayerHbStats.hbna9=this.prebidAdsRequestedAmazon[0].nc,void 0!==bidResponses.amznbid&&(this.player.adPlayerHbStats.hba9idc=bidResponses.amznbid),this.player.logInfo("HEADER BIDDING - Ad AMAZON",bidResponses,"object")),this.player.amazon.params=bidResponses),this.allBiddersBack()&&(this.player.logInfo("HEADER BIDDING","ALL RESPONSES RECEIVED","log"),this.iasFilterAd(),pubId="",this.player.googleConsent?(pubId=this.getDfpCampaign(),this.player.logInfo("HEADER BIDDING - La campagne DFP générée est : ",pubId,"object")):(highestNewCpm=void 0!==pbjsDtk.getBidResponses()[this.player.prebid.prebidCode]?pbjsDtk.getBidResponses()[this.player.prebid.prebidCode].bids.sort(function(a,b){return b.cmp-a.cpm}):[],bidder=this.getVastWrapper(highestNewCpm),pubId=this.generateCampaignFromVastWrapper(bidder),this.player.logInfo("HEADER BIDDING - La campagne Prebid générée est : ",pubId,"object")),this.adReadyForWaterfall(pubId,!0))}else this.player.notify("allHBTagReceived")}},{key:"getDfpCampaign",value:function(){var _this7=this;if(this.player.amazon)for(var k in this.player.amazon.params)this.player.custParams[k]=this.player.amazon.params[k];this.player.hbDeals.hasOwnProperty("dfp")&&(this.player.hbDeals.dfp.forEach(function(deal){_this7.player.isAdFraudInventory&&(!_this7.player.isAdFraudInventory||deal.isAdfraudBlocked)||_this7.player.dfpDealIds.push(deal.dealId)}),0<this.player.dfpDealIds.length&&(this.player.custParams.dtk_perf=this.player.dfpDealIds.join(","),this.player.dfpDeals="dtk_perf%3D"+this.player.dfpDealIds.join("%2C"))),void 0!==JSON.parse(this.adCampaignDfp.bid_params).cust_params&&""!==JSON.parse(this.adCampaignDfp.bid_params).cust_params&&(custParams=JSON.parse(this.adCampaignDfp.bid_params).cust_params,this.player.infos.tagparam=this.player.infos.tagparam?this.player.infos.tagparam+"&"+custParams:custParams);["tagparam","adsparam"].map(function(param){if(void 0!==_this7.player.infos[param])try{Object.assign(_this7.player.custParams,JSON.parse('{"'+_this7.player.infos[param].replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'))}catch(error){_this7.player.logInfo("HEADER BIDDING - Wrong Format tagparam",_this7.player.infos[param],"object")}});var custParams={adUnit:this.videoAdUnit,params:{iu:this.player.prebid.adUnit.adUnitId,cust_params:this.player.custParams}};void 0!==this.player.getInfo("realReferer")&&null!=this.player.getInfo("realReferer")&&(custParams.params.description_url=this.player.getInfo("realReferer"),void 0!==this.player.infos.getOrginUrl&&1==this.player.infos.getOrginUrl&&(console.log("getOrginUrl",this.player.getInfo("realReferer")),custParams.params.url=this.player.getInfo("realReferer")));return-1!==["01946435","01491621","01357940"].indexOf(this.player.getInfo("mdtk"))&&(custParams.params.pp="20_profil_video"),this.player.logInfo("HEADER BIDDING - Config DFP",custParams,"object"),this.player.prebid.urlDfp=pbjsDtk.adServers.dfp.buildVideoUrl(custParams)+"&ad_rule=0"+this.player.prebid.adUnit.adMaxDuration,this.generateCampaignFromDfpUrl(this.player.prebid.urlDfp)}},{key:"getCampaign",value:function(campaignId){return this.prebidAdsRequested.filter(function(campaign){return campaign.id===campaignId})[0]}},{key:"mapId",value:function(request){for(var bidKey in request.bids)this.mappingId[request.bids[bidKey].bidId]=request.bids[bidKey].params.dgid}},{key:"getAd",value:function(adResponse,key){return'<Ad sequence="'+key+'" id="'+this.player.hbBidderIds[adResponse.requestId]+'"><Wrapper><VASTAdTagURI><![CDATA[ https://prebid.adnxs.com/pbc/v1/cache?uuid='+adResponse.videoCacheKey+" ]]></VASTAdTagURI></Wrapper></Ad>"}},{key:"getVastWrapper",value:function(bidResponses){var key,ads=[];for(key in bidResponses){var adResponse=bidResponses[key];ads.push(this.getAd(adResponse,key))}return'<VAST xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="vast.xsd" version="4.0">'+ads.join("")+"</VAST>"}},{key:"generateCampaignFromVastWrapper",value:function(vastWrapper){return this.player.prebid.adUnit.campaign.tagResponse=vastWrapper,this.player.prebid.adUnit.campaign}},{key:"onAdRespond",value:function(adResponse){var _this8=this,ultiAd=this.prebidAdsRequested.find(function(ad){return ad.id===_this8.mappingId[adResponse.adId]});adResponse.cpm<=0||!ultiAd||(ultiAd.prebidResponse=adResponse,ultiAd.cpm=adResponse.cpm,ultiAd.tag=adResponse.vastUrl,0===adResponse.vastUrl.indexOf("blob")?this.getResponseOfBlob(ultiAd):this.adReadyForWaterfall(ultiAd))}},{key:"getResponseOfBlob",value:function(adResponse){var _this9=this,xhr=new XMLHttpRequest;xhr.open("GET",adResponse.prebidResponse.vastUrl,!0),xhr.responseType="arrayBuffer",xhr.onload=function(){200===xhr.status&&(adResponse.prebidResponse.responseVast=xhr.response,_this9.adReadyForWaterfall(adResponse))},xhr.send()}},{key:"adReadyForWaterfall",value:function(adResponse){(null===this.player.prebid.adUnit||1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&this.player.notify("prebidAdReady",adResponse)}},{key:"sendAdRequestStat",value:function(ad){this.player.logInfo("HEADER BIDDING - STATS TAGCALL",ad.dgid,"log")}},{key:"generateCampaignFromDfpUrl",value:function(videoUrl){return this.player.prebid.adUnit.campaign.tag=videoUrl,this.player.prebid.adUnit.campaign.script=videoUrl,this.player.prebid.adUnit.campaign}},{key:"isIasCampaigns",value:function(){for(var campaignTypes in this.player.campaigns)if(campaignTypes.includes("dbpreroll")||campaignTypes.includes("preroll"))for(var campaign in this.player.campaigns[campaignTypes])if("1"===this.player.campaigns[campaignTypes][campaign].ias_activated||"1"===this.player.campaigns[campaignTypes][campaign].ias_fraud)return!0;return!1}}])&&Prebid_defineProperties(subClass.prototype,protoProps),_AddonAbstract&&Prebid_defineProperties(subClass,_AddonAbstract),Object.defineProperty(subClass,"prototype",{writable:!1}),Prebid}(PlayerAdapterFactory());function BigDataEvent_typeof(obj){return(BigDataEvent_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function BigDataEvent_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BigDataEvent_setPrototypeOf(o,p){return(BigDataEvent_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function BigDataEvent_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=BigDataEvent_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=BigDataEvent_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===BigDataEvent_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function BigDataEvent_getPrototypeOf(o){return(BigDataEvent_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const BigDataEvent=function(_AddonAbstract){var subClass=BigDataEvents;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&BigDataEvent_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=BigDataEvent_createSuper(BigDataEvents);function BigDataEvents(){var instance=this,Constructor=BigDataEvents;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=BigDataEvents,(_AddonAbstract=[{key:"initListner",value:function(){var _this=this;this.player.addListener("NormeValidated",function(n){"vdvis"!==n.name&&"vdprv"!==n.name||_this.sendEvent(n.name)}),this.player.addListener("ready",function(){var _this2=this,checkPlayJsEventWasLaunchedOnce=0;this.player.on("play",function(n){0===checkPlayJsEventWasLaunchedOnce&&1===_this2.player._video_preview_active&&(_this2.sendEvent("vdprv"),checkPlayJsEventWasLaunchedOnce=1)})}.bind(this)),this.player.addListener("adRequest",function(n){return _this.statAdRequest(n)}),this.player.addListener("visiblePlayerEnableNotify",function(){return _this.sendEvent("vispl")})}},{key:"init",value:function(){this.player.sendEvent=this.sendEvent.bind(this),this.initListner()}},{key:"sendEvent",value:function(event){var env,newparams=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.player._eventsent[event]||((newparams=void 0===newparams?{}:newparams).e=event,newparams.dif=this.player.getInfo("bd").diff,newparams.cl=this.player.getInfo("bd").client,newparams.v=this.player.getInfo("video_full_id"),newparams.adt=this.player.getInfo("adTry"),newparams.mdtk=this.player.getInfo("mdtk"),newparams.z=this.player.getInfo("zone"),newparams.zm=this.player.getInfo("mappingId"),newparams.adb=this.player.getInfo("adBlock"),newparams.tp=this.player.getInfo("typePlayer"),newparams.cat=this.player.getInfo("topicId"),newparams.o=this.player.getInfo("owner"),newparams.referer=this.player.getInfo("realReferer"),env=this.player.isAmp||this.player.isAmpSmart?"amp":"web",1===parseInt(this.player.getInfo("isWebview"))&&(env="app"),newparams.env=env,newparams.nw="",newparams.nws="",void 0!==(env=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&(void 0!==env.type&&(newparams.nw=env.type),void 0!==env.effectiveType&&(newparams.nws=env.effectiveType)),newparams.iv=this.player.isVisibleString(),newparams.vol=this.player.isMute()?0:this.player.getVolume(),newparams.trg=this.player.getInfo("trg"),newparams.pl=void 0!==this.player.getInfo("plindex")?this.player.getInfo("plindex"):null,newparams.fs=void 0!==this.player.getInfo("fstart")?this.player.getInfo("fstart"):null,newparams.vl=void 0!==this.player.getInfo("vl")?this.player.getInfo("vl"):null,newparams.pm=this.player.isPrivateMode,newparams.cs=this.player.getConsentData(),newparams.csga=this.player.getGdprApplies(),newparams.csdc=this.player.getDigitekaConsent(),newparams.csgs=this.player.getGdprGlobalScope(),newparams.cspa=this.player.getPurposesAllowed().join(","),"primp"==event&&void 0!==newparams.dur&&void 0===this.player.prerollDuration&&(this.player.prerollDuration=newparams.dur),"p2imp"==event&&void 0!==newparams.dur&&void 0===this.player.preroll2Duration&&(this.player.preroll2Duration=newparams.dur),"poimp"==event&&void 0!==newparams.dur&&void 0===this.player.postrollDuration&&(this.player.postrollDuration=newparams.dur),-1!==["pr1qt","pr2qt","pr3qt","pr4qt","pr10s","pr15s","pr20s","pr25s","pr30s","pr60s","pr90s","prclk","prfsc","priab","prskp","prsnd","prsfb","prsin","prstw"].indexOf(event)&&void 0!==this.player.prerollDuration&&(newparams.dur=this.player.prerollDuration),-1!==["p21qt","p22qt","p23qt","p24qt","p210s","p215s","p220s","p225s","p230s","p260s","p290s","p2clk","p2fsc","p2iab","p2skp","p2snd","p2sfb","p2sin","p2stw"].indexOf(event)&&void 0!==this.player.preroll2Duration&&(newparams.dur=this.player.preroll2Duration),-1!==["po1qt","po2qt","po3qt","po4qt","po10s","po15s","po20s","po25s","po30s","po60s","po90s","poclk","pofsc","poiab","poskp","posnd","posfb","posin","postw"].indexOf(event)&&void 0!==this.player.postrollDuration&&(newparams.dur=this.player.postrollDuration),HttpRequest_default().getScript("https://dig.ultimedia.com/v/?"+this.dataToStr(newparams)),["poreq","prreq","prrpt","porpt","ovrpt","ovreq","vdcpt","vdvwd"].includes(event)||(this.player._eventsent[event]=!0),document.getElementById("dtktestevents").classList.add(event))}},{key:"statAdRequest",value:function(tagInfo){var eventName,ad=tagInfo.ad;tagInfo.hb;switch(tagInfo.type){case"preroll":case"brandcontent":eventName="prreq";break;case"overlay":eventName="ovreq";break;case"postroll":eventName="poreq";break;default:throw new Error("The rollType is not defined")}this.sendEvent(eventName,{cp:ad.id})}},{key:"dataToStr",value:function(data){var dataStr=[];return Object.keys(data).forEach(function(k){var value=data.hasOwnProperty(k)&&void 0!==data[k]?data[k]:"";dataStr.push(encodeURIComponent(k)+"="+encodeURIComponent(value))}),dataStr.join("&")}}])&&BigDataEvent_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&BigDataEvent_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),BigDataEvents}(PlayerAdapterFactory());function DetectBroswerMode_typeof(obj){return(DetectBroswerMode_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function DetectBroswerMode_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DetectBroswerMode_setPrototypeOf(o,p){return(DetectBroswerMode_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function DetectBroswerMode_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=DetectBroswerMode_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=DetectBroswerMode_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===DetectBroswerMode_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function DetectBroswerMode_getPrototypeOf(o){return(DetectBroswerMode_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const DetectBroswerMode=function(_AddonAbstract){var subClass=DetectBrowserMode;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&DetectBroswerMode_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=DetectBroswerMode_createSuper(DetectBrowserMode);function DetectBrowserMode(){if(!(this instanceof DetectBrowserMode))throw new TypeError("Cannot call a class as a function");return _super.call(this)}return subClass=DetectBrowserMode,(_AddonAbstract=[{key:"init",value:function(){this.player.setPrivateMode=this.setPrivateMode.bind(this),this.detectPM()}},{key:"detectPM",value:function(){var db,on=function(){this.setPrivateMode(1)}.bind(this),off=function(){this.setPrivateMode(0)}.bind(this);window.webkitRequestFileSystem?webkitRequestFileSystem(0,0,off,on):"MozAppearance"in document.documentElement.style?((db=indexedDB.open("test")).onerror=on,db.onsuccess=off):(/constructor/i.test(window.HTMLElement)||window.safari?function(){try{localStorage.length||(localStorage.x=1,localStorage.removeItem("x")),off()}catch(e){(navigator.cookieEnabled?on:off)()}}:window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?off:on)()}},{key:"setPrivateMode",value:function(value){this.player.isPrivateMode=value}}])&&DetectBroswerMode_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&DetectBroswerMode_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),DetectBrowserMode}(PlayerAdapterFactory());var HttpRequest=__webpack_require__(3299),CimMatching_default=__webpack_require__.n(HttpRequest);function CimTracking_typeof(obj){return(CimTracking_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CimTracking_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CimTracking_setPrototypeOf(o,p){return(CimTracking_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CimTracking_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=CimTracking_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=CimTracking_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===CimTracking_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function CimTracking_getPrototypeOf(o){return(CimTracking_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}const addons_CimTracking=function(_AddonAbstract){var subClass=CimTracking;if("function"!=typeof _AddonAbstract&&null!==_AddonAbstract)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AddonAbstract&&_AddonAbstract.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AddonAbstract&&CimTracking_setPrototypeOf(subClass,_AddonAbstract);var staticProps,_super=CimTracking_createSuper(CimTracking);function CimTracking(){var instance=this,Constructor=CimTracking;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=CimTracking,(_AddonAbstract=[{key:"init",value:function(){var reset=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.allowToSend=!1,this.firstStart=!0,"string"==typeof this.player.infos.gemiusStream&&""!==this.player.infos.gemiusStream&&"0"!==this.player.infos.gemiusStream&&("undefined"==typeof gemiusStream?(window.gemius_use_cmp=!0,window.gemius_cmp_timeout=1/0,HttpRequest_default().getScript(("https:"===window.location.protocol?"https://":"http://")+"gabe.hit.gemius.pl/gplayer.js",this.initStream.bind(this,reset))):this.initStream(reset))}},{key:"initStream",value:function(reset){var _this=this;this.beginTime=Date.now(),this.materialIdentifier=(Math.random().toString(19)+Math.random().toString(29)).slice(2,40),this.totalTime=parseInt(this.player.infos.duration),this.autoplay=1===parseInt(this.player.getInfo("scrolltoplay"))||"yes"===this.player.getInfo("autoplay"),this.IDENTIFIER=this.player.infos.gemiusStream,this.additionalParameters={programName:this.player.infos.title.replace(/\W/g,""),programDuration:this.totalTime,ct:(new(CimMatching_default())).getCimType(this.player.getInfo("topicId")),st:"vid.wex.prof.free",se:this.player.getInfo("zone"),tv:"null",_SCTE:"video"},this.setPlayerId(),this.allowToSend=!0,reset||("loading"===this.player._state?this.player.addListener("ready",function(){_this.totalTime=parseInt(_this.player.infos.duration),_this.onReady()}):(this.totalTime=parseInt(this.player.infos.duration),this.onReady()))}},{key:"setPlayerId",value:function(){this.playerId=(Math.random().toString(19)+Math.random().toString(29)).slice(2,40)}},{key:"onReady",value:function(){var _this2=this;this.cimPlayer=new GemiusPlayer(this.playerId,this.IDENTIFIER),this.cimPlayer.setVideoObject(document.getElementById("player-player_html5_api")),this.cimPlayer.newProgram(this.materialIdentifier,this.additionalParameters),this.player.on("waiting",function(){_this2.sendEvent("buffer")}),this.player.on("playing",function(){_this2.sendEvent("play")}),this.player.on("pause",function(){_this2.sendEvent("pause")}),this.player.on("seeked",function(){_this2.sendEvent("seek")}),this.player.on("ended",function(){_this2.sendEvent("complete")}),this.player.on("dtk-reload",function(){_this2.sendEvent("stop")}),this.player.addListener("reinit",function(){_this2.init(!0)})}},{key:"sendEvent",value:function(event){var additionalParameters={autoPlay:this.autoplay};this.allowToSend&&this.cimPlayer.programEvent(this.materialIdentifier,this.getTime(),event,additionalParameters)}},{key:"getTime",value:function(){var time=Math.round(this.player.getPosition());return time=time>this.totalTime?this.totalTime:time}}])&&CimTracking_defineProperties(subClass.prototype,_AddonAbstract),staticProps&&CimTracking_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),CimTracking}(PlayerAdapterFactory());var HttpRequest=__webpack_require__(8095),PostMessageSender_default=__webpack_require__.n(HttpRequest),PlayerAdapterFactory=__webpack_require__(7940),Base64_default=__webpack_require__.n(PlayerAdapterFactory);function AdEvent_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const dtkplayer_AdEvent=function(){function AdEvent(player,admode){if(!(this instanceof AdEvent))throw new TypeError("Cannot call a class as a function");this.player=player,this.admode=admode}var Constructor,protoProps,staticProps;return Constructor=AdEvent,(protoProps=[{key:"registerEvent",value:function(adPlayer){var target={adPlayer:adPlayer,player:this.player,admode:this.admode};adPlayer.subscribe(this.onAdStarted.bind(target),"AdStarted"),adPlayer.subscribe(this.onAdLoaded.bind(target),"AdLoaded"),adPlayer.subscribe(this.onAdImpression.bind(target),"AdImpression"),adPlayer.subscribe(this.onAdRemainingTime.bind(target),"AdDurationChange"),adPlayer.subscribe(this.onAdVideoStart.bind(target),"AdVideoStart"),adPlayer.subscribe(this.onAdVideoFirstQuartile.bind(target),"AdVideoFirstQuartile"),adPlayer.subscribe(this.onAdVideoMidpoint.bind(target),"AdVideoMidpoint"),adPlayer.subscribe(this.onAdVideoThirdQuartile.bind(target),"AdVideoThirdQuartile"),adPlayer.subscribe(this.onAdPaused.bind(target),"AdPaused"),adPlayer.subscribe(this.onAdVideoComplete.bind(target),"AdVideoComplete"),adPlayer.subscribe(this.onAdStopped.bind(target),"AdStopped"),adPlayer.subscribe(this.onAdError.bind(target),"AdError"),adPlayer.subscribe(this.onAdClick.bind(target),"AdClickThru"),adPlayer.subscribe(this.onAdSkip.bind(target),"AdSkipped"),adPlayer.subscribe(this.onAdResume.bind(target),"AdPlaying")}},{key:"unregisterEvent",value:function(adPlayer){var target={adPlayer:adPlayer,player:this.player};adPlayer.unsubscribe(this.onAdStarted.bind(target),"AdStarted"),adPlayer.unsubscribe(this.onAdLoaded.bind(target),"AdLoaded"),adPlayer.unsubscribe(this.onAdImpression.bind(target),"AdImpression"),adPlayer.unsubscribe(this.onAdRemainingTime.bind(target),"AdRemainingTimeChange"),adPlayer.unsubscribe(this.onAdVideoStart.bind(target),"AdVideoStart"),adPlayer.unsubscribe(this.onAdVideoFirstQuartile.bind(target),"AdVideoFirstQuartile"),adPlayer.unsubscribe(this.onAdVideoMidpoint.bind(target),"AdVideoMidpoint"),adPlayer.unsubscribe(this.onAdVideoThirdQuartile.bind(target),"AdVideoThirdQuartile"),adPlayer.unsubscribe(this.onAdPaused.bind(target),"AdPaused"),adPlayer.unsubscribe(this.onAdVideoComplete.bind(target),"AdVideoComplete"),adPlayer.unsubscribe(this.onAdStopped.bind(target),"AdStopped"),adPlayer.unsubscribe(this.onAdError.bind(target),"AdError"),adPlayer.unsubscribe(this.onAdClick.bind(target),"AdClickThru"),adPlayer.unsubscribe(this.onAdSkip.bind(target),"AdSkipped"),adPlayer.unsubscribe(this.onAdResume.bind(target),"AdPlaying")}},{key:"onAdLoaded",value:function(){}},{key:"onAdRemainingTime",value:function(){this.adPlayer.getAdRemainingTime()<3&&1==this.player.nb_preroll&&(video_ad=document.getElementById("player-player-adp-preroll").querySelector("video"),canvas=document.getElementById("canvas-img"),null!==video_ad&&(document.getElementById("canvas-img").setAttribute("width",video_ad.offsetWidth),document.getElementById("canvas-img").setAttribute("height",video_ad.offsetWidth*video_ad.videoHeight/video_ad.videoWidth),canvas.getContext("2d").drawImage(video_ad,0,0,video_ad.offsetWidth,video_ad.offsetWidth*video_ad.videoHeight/video_ad.videoWidth)));var video_ad,canvas,prefix="";if(this.player._state.match(/preroll/)||this.player._midroll)prefix=this.player.double_preroll&&2==this.player.nb_preroll?"p2":"pr";else{if(!this.player._state.match(/postroll/))return;prefix="po"}var bigDataTimings=[10,15,20,25,30,60,90],requestStatTimings=[30,60,90],elapsedAdTime=this.adPlayer.getAdDuration()-this.adPlayer.getAdRemainingTime();if(null!==this.player.getCurrentAd()&&void 0!==this.player.getCurrentAd())for(var timing in bigDataTimings){var timing=bigDataTimings[timing],object="AdVideo"+timing+"s";timing<=elapsedAdTime&&!this.adPlayer.events[object]&&(this.player.sendEvent(prefix+timing+"s",{cp:this.player.getCurrentAd().id}),this.adPlayer.events[object]=!0,-1!==requestStatTimings.indexOf(timing)&&this.adPlayer.sendAdTimeRequestStat(timing+"seconds"))}}},{key:"onAdImpression",value:function(){this.player.notify("adImpression"),this.player.adapter.videojs.el_.classList.add("dtk-ad-player"),null!==document.getElementById("player-player-adp-preroll")&&(document.getElementById("player-player-adp-preroll").style.display="block");var d,cn="views_campaign_"+this.player.getCurrentAd().id,ecn="expiration_views_campaign_"+this.player.getCurrentAd().id,vc=cookieManager.getAdCookie(cn);""===vc?((d=new Date).setTime(d.getTime()+6048e5-1),cookieManager.setAdCookie(cn,1,7),cookieManager.setAdCookie(ecn,d.toUTCString(),7)):(d=cookieManager.getAdCookie(ecn))?cookieManager.setAdCookie(cn,parseInt(vc)+1,d,!0):cookieManager.setAdCookie(cn,parseInt(vc)+1,1),this.player.hbResponsesAdIds.hasOwnProperty(this.player.getCurrentAd().id)&&window.Pubstack&&Pubstack.cmd("prebid","bidWon",{adId:this.player.hbResponsesAdIds[this.player.getCurrentAd().id]}),(this.player._state.match(/preroll/)||this.player._midroll)&&(this.player.logInfo("STATS ADBEGIN (Impression) Nb Prerolll  ",this.player.nb_preroll,"log"),this.player.double_preroll&&1==this.player.nb_preroll?(document.getElementById("canvas").style.display="none",this.player.sendEvent("p2imp",{cp:this.player.getCurrentAd().id,tm:this.player.getCurrentAd().tags_matched,dur:this.adPlayer.getAdDuration(),bitrate:this.adPlayer.adBitrate})):this.player.sendEvent("primp",{cp:this.player.getCurrentAd().id,tm:this.player.getCurrentAd().tags_matched,dur:this.adPlayer.getAdDuration(),bitrate:this.adPlayer.adBitrate}),2==this.player.isVisibleString()&&(this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p2iab",{cp:this.player.getCurrentAd().id,iabv:0}):this.player.sendEvent("priab",{cp:this.player.getCurrentAd().id,iabv:0}))),this.player._state.match(/postroll/)&&(this.player.sendEvent("poimp",{cp:this.player.getCurrentAd().id}),2==this.player.isVisibleString()&&this.player.sendEvent("poiab",{cp:this.player.getCurrentAd().id,iabv:0})),"overlay"==this.admode&&this.player.sendEvent("ovimp",{cp:this.player.getCurrentAd().id})}},{key:"onAdClick",value:function(){(this.player._state.match(/preroll/)||this.player._midroll)&&(this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p2clk",{cp:this.player.getCurrentAd().id}):this.player.sendEvent("prclk",{cp:this.player.getCurrentAd().id}),this.player.notify("ad-click",this.player.getCurrentAd())),this.player._state.match(/postroll/)&&(this.player.sendEvent("poclk",{cp:this.player.getCurrentAd().id}),this.player.notify("ad-click",this.player.getCurrentAd())),"overlay"==this.admode&&(this.player.sendEvent("ovclk",{cp:this.player.getCurrentAd().id}),this.player.notify("ad-click",this.player.getCurrentAd()))}},{key:"onAdSkip",value:function(){(this.player._state.match(/preroll/)||this.player._midroll)&&(this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p2skp",{cp:this.player.getCurrentAd().id}):this.player.sendEvent("prskp",{cp:this.player.getCurrentAd().id})),this.player._state.match(/postroll/)&&this.player.sendEvent("poskp",{cp:this.player.getCurrentAd().id})}},{key:"onAdStarted",value:function(){}},{key:"onAdVideoStart",value:function(){}},{key:"onAdVideoFirstQuartile",value:function(){(this.player._state.match(/preroll/)||this.player._midroll)&&(this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p21qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate}):this.player.sendEvent("pr1qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate})),this.player._state.match(/postroll/)&&this.player.sendEvent("po1qt",{cp:this.player.getCurrentAd().id})}},{key:"onAdVideoMidpoint",value:function(){(this.player._state.match(/preroll/)||this.player._midroll)&&(this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p22qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate}):this.player.sendEvent("pr2qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate})),this.player._state.match(/postroll/)&&this.player.sendEvent("po2qt",{cp:this.player.getCurrentAd().id})}},{key:"onAdVideoThirdQuartile",value:function(){(this.player._state.match(/preroll/)||this.player._midroll)&&(this.player.double_preroll&&2==this.player.nb_preroll?this.player.sendEvent("p23qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate}):this.player.sendEvent("pr3qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate})),this.player._state.match(/postroll/)&&this.player.sendEvent("po3qt",{cp:this.player.getCurrentAd().id})}},{key:"onAdPaused",value:function(){}},{key:"onAdResume",value:function(){this.player.notify("ad-playing",this.player.getCurrentAd())}},{key:"onAdVideoComplete",value:function(){1==this.player.nb_preroll&&(document.getElementById("canvas").style.display="block");var prefix="";if(this.player._state.match(/preroll/)||this.player._midroll)prefix=this.player.double_preroll&&2==this.player.nb_preroll?"p2":"pr";else{if(!this.player._state.match(/postroll/))return;prefix="po"}var timing,bigDataTimings=[10,15,20,25,30,60,90],adDuration=this.adPlayer.getAdDuration();for(timing in this.player.sendEvent(prefix+"4qt",{cp:this.player.getCurrentAd().id,bitrate:this.adPlayer.adBitrate}),bigDataTimings){var time=bigDataTimings[timing],object="AdVideo"+time+"s";time-1<=adDuration&&!this.adPlayer.events[object]&&(this.player.sendEvent(prefix+time+"s",{cp:this.player.getCurrentAd().id}),this.adPlayer.events[object]=!0)}}},{key:"onAdStopped",value:function(){}},{key:"onAdError",value:function(){(this.player._state.match(/preroll/)||this.player._midroll)&&this.player.sendEvent("prerr",{cp:this.adPlayer.adsManagerIdLoaded}),this.player._state.match(/postroll/)&&this.player.sendEvent("poerr",{cp:this.adPlayer.adsManagerIdLoaded}),"overlay"==this.admode&&this.player.sendEvent("overr",{cp:this.adPlayer.adsManagerIdLoaded})}}])&&AdEvent_defineProperties(Constructor.prototype,protoProps),staticProps&&AdEvent_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AdEvent}();function AdSound_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const plugins_AdSound=function(){function AdSound(mdtks){if(!(this instanceof AdSound))throw new TypeError("Cannot call a class as a function");this.mdtks=mdtks}var Constructor,protoProps,staticProps;return Constructor=AdSound,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){var player=this.player,btnSound=(this.withBtnSound=1,this.player.showMute=this.showMute.bind(this),this.btnSound=document.createElement("div"),this.btnSound),adSnd=this,applyStyle=(btnSound.setAttribute("class","soundButton"),btnSound.setAttribute("id",player.getTarget()+"_soundButton"),btnSound.style.display="none",player.infos.isSafari&&(player.infos.muteState=1),player.addListener("after_preroll",function(){("no"!=player.infos.autoplay&&player.infos.isSafari||!player.isVisible())&&player.setMute(1)}),document.getElementById(player.getTarget()).appendChild(btnSound),player.addListener("ready",function(){void 0!==player.infos.muteState?(player.infos.muteState=(0,flagToInt.Z)(player.infos.muteState),player.setMute(player.infos.muteState)):"1"==cookieManager.getCookie("muteForced")&&-1!=adSnd.mdtks.indexOf(player.infos.mdtk)?(player.setMute(!0),player.infos.muteForced=!0,player.sendMessageToParent("muteForced"),adSnd.setMuteState(!0)):player.infos.muteForced||(player.infos.soundOnHover||player.infos.clickSoundControl?(player.setMute(player.infos.muteState),adSnd.setMuteState(!0)):(player.setVolume(50),player.setMute(!1),adSnd.setMuteState(!1)))}),this.applyStyle.bind(this));player.addListener("ad-volumechange",applyStyle),player.on("volumechange",applyStyle),player.on("volumechange",function(){var mute=player.isMute();mute&&(player._preventMuteForced||(player.infos.muteForced=!0,player.sendMessageToParent("muteForced"),cookieManager.setCookie("muteForced",1,30))),this.setMuteState(mute)}.bind(this)),btnSound.addEventListener("click",function(){player.toggleMute(),applyStyle()},!1)}},{key:"showMute",value:function(state){state=state&&this.withBtnSound;this.btnSound.style.display=state?"":"none",this.player,this.btnSound;this.applyStyle()}},{key:"applyStyle",value:function(){var player=this.player,btnSound=this.btnSound;player.isMute()?(btnSound.classList.remove("soundButton-unmuteState"),btnSound.classList.add("soundButton-muteState")):(btnSound.classList.remove("soundButton-muteState"),btnSound.classList.add("soundButton-unmuteState"))}},{key:"setMuteState",value:function(state){this.player.infos.muteState=(0,flagToInt.Z)(state),this.player.sendMessageToParent(this.player.infos.muteState?"muteStateTrue":"muteStateFalse"),this.player.notify("pl-mute",{mute:state})}}])&&AdSound_defineProperties(Constructor.prototype,protoProps),staticProps&&AdSound_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AdSound}();function AdPlay_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var translator=__webpack_require__(1502);const plugins_AdPlay=function(){function AdPlay(){if(!(this instanceof AdPlay))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=AdPlay,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){var player=this.player,btnPlay=(this.showPlay=this.showPlay.bind(this),this.btnPlay=document.createElement("div"),this.btnPlay);btnPlay.setAttribute("class","dtk-playButton"),btnPlay.setAttribute("id",player.getTarget()+"_playButton"),btnPlay.innerHTML=translator.translate("resumePlayAfterAdMessage"),btnPlay.style.display="none",document.getElementById(player.getTarget()).appendChild(btnPlay),player.addListener("ad-click",function(){this.showPlay(!0)}.bind(this)),player.addListener("ad-playing",function(){this.showPlay(!1)}.bind(this)),btnPlay.addEventListener("click",function(){this.showPlay(!1),this.player.adPlayer.resumeAd()}.bind(this))}},{key:"showPlay",value:function(state){var display=(state=["01300108","01841738","01786578","01097589","01341618","01124706","01876487","01530607","01812675","01086461","01458419","01249546","01927680","01529986","01748833","01730747","01487966","01895260","01611442","01696059","01517114","01110825","01106031","01457944","01589461","01571469","01429276","01346979","01375002","01630102","01951836","01903477","01120258","01576816","01935635","01921679","01187791","01472140","01884325","01942061","01031320","01509146","01994220","01428537","01890647","01702859","01572361","01958231","01585939","01875785","01469944","01027907","01380937","01777328","01012178","01587354","01272366","01690311","01818327","01328124","01839633","01956097","01907757","01990631","01910387","01594092","01658030","01503085","01831167","01643125","01447988","01850070","01532724","01789804","01732153","01381278","01364069","01828949","01402054","01069499","01394474","01849754","01480240","01383052","01681195","01991448","01327656","01164585","01163042","01067376","01802878","01324822","01706250","01413112","01020764","01197991","01187615","01592117","01812387","01091668","01674245","01347202","01009280","01388994","01273636","01738463","01824257","01541934","01954380","01441795","01207115","01537621","01231840","01170123","01895997","01662230","01113804","01774625","01095776","01867085","01619037","01865614","01638227","01790669","01136232","01743379","01789434","01362431","01674661","01234685","01379453","01429012","01610627","01691706","01648701","01851486","01496351","01724198","01500910","01337284","01041927","01494966","01653733","01246956","01176875","01327244","01199051","01437041","01628798","01091319","01654671","01724591","01763465","01618551","01349275","01777459","01502988","01758416","01357046","01558290","01039190","01888577","01366642","01804349","01414431","01305244","01138656"].includes(this.player.vinfos.video.mdtk)?!1:state)?"":"none";document.querySelector(".overlayEndAd").classList.contains("overlay-preview--active")&&(document.querySelector(".overlayEndAd").style.display=state?"none":"flex"),this.btnPlay.style.display=display}}])&&AdPlay_defineProperties(Constructor.prototype,protoProps),staticProps&&AdPlay_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AdPlay}();function Outstream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const plugins_Outstream=function(){function Outstream(){if(!(this instanceof Outstream))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=Outstream,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){5==this.player.infos.float_video&&(this.player.infos.recoOverlay=0,this.player.infos.recoEndpanel=0),5==this.player.infos.float_video&&this.player.infos.fromPlaylist&&this.player.infos.float_video.adBlock&&(this.player.infos.autoplay="no"),this.player.addListener("preroll",function(){null!=this.player.getCurrentAd()&&1==this.player.infos.unitaire||5!=this.player.infos.float_video||(this.endOutstream(),this.player.infos.autoplay="no",this.player.setState("ready",!0))}.bind(this)),this.player.addListener("adImpression",this.startOutstream.bind(this)),this.player.addListener("AtEndPub",function(){"vqls8s"==this.player.infos.id&&5==this.player.infos.float_video&&1!=this.player.infos.unitaire&&this.endOutstream()}.bind(this)),"vqls8s"==this.player.infos.id&&5==this.player.infos.float_video&&1==this.player.infos.unitaire&&(this.player.infos.autoplay="no",this.player.addListener("ready",function(){"vqls8s"==(this.player.vinfos.video.id||this.player.infos.id)&&this.player.notify("outsream-forcenext")}.bind(this)))}},{key:"startOutstream",value:function(){5==this.player.infos.float_video&&(this.player.notify("outstream-start"),window.parent.postMessage("outstream_1","*"),this.player.sendEvent("primp",{cp:this.player.getCurrentAd().id,dur:this.player.getCurrentAd().duration}))}},{key:"endOutstream",value:function(){5==this.player.infos.float_video&&window.parent.postMessage("outstream_0","*")}}])&&Outstream_defineProperties(Constructor.prototype,protoProps),staticProps&&Outstream_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Outstream}();function AdSkip_typeof(obj){return(AdSkip_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function AdSkip_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var AdSkip_translator=__webpack_require__(1502);__webpack_require__(6301);const plugins_AdSkip=function(){function AdSkip(){if(!(this instanceof AdSkip))throw new TypeError("Cannot call a class as a function");this.id_player=-1}var Constructor,protoProps,staticProps;return Constructor=AdSkip,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){this.player.showAdSkip=this.showSkip.bind(this),this.is_mobile=this.player.getInfo("isMobile"),this.conf={skipAdType:(0,flagToInt.Z)(this.player.infos.skipAdType),showSkipAd:(0,flagToInt.Z)(this.player.infos.showSkipAd),skipAdDelay:(0,flagToInt.Z)(this.player.infos.skipAdDelay)},this.is_visible_plus_and_mobile=this.option_visible_plus&&this.is_mobile?1:0,this.createBandeau();var instanceAdSkip=this;this.player.addListener("OverlayPreview-skipadCallback",function(){instanceAdSkip.skipadCallback()})}},{key:"skipadCallback",value:function(){this.player.skipAd()}},{key:"showBandeau",value:function(state){state||(this.bandeau.style.display="none",this.bandeauBottom.style.display="none"),this.bandeauBottom&&(this._show_skip_this_ad||this.player.infos.bc_video)&&(state?(0===this.conf.skipAdType&&(this.bandeauMessage.style.display="",this.bandeauBottom.style.display=""),1===this.conf.skipAdType&&(this.bandeau.style.display="")):(1===this.conf.skipAdType&&(this.bandeau.style.display="none"),this.bandeauBottom.style.display="none"))}},{key:"showSkip",value:function(state){var currentAd=this.player.getCurrentAd();void 0===currentAd||!state||"preroll"!==this.player._state&&"postroll"!==this.player._state?this.showBandeau(!1):(2===this.conf.skipAdType&&(state=!1),this._adCountdown=parseInt(this.conf.showSkipAd?this.conf.skipAdDelay:void 0!==currentAd?currentAd.skip_ad_delay:0)+1,this._show_skip_this_ad=parseInt(this.conf.showSkipAd||(void 0!==currentAd?currentAd.show_skip_ad:0)),this._skip_this_ad_type=parseInt(this.conf.skipAdType||(void 0!==currentAd?currentAd.skip_ad_type:0)),(0===this._skip_this_ad_type?this.bandeauMessage:this.innerBandeau).removeEventListener("click",this.skipadCallback.bind(this)),this.showBandeau(state),this.manageAdCountdown())}},{key:"manageAdCountdown",value:function(){"preroll"!==this.player._state&&"postroll"!==this.player._state||!this._show_skip_this_ad&&!this.player.infos.bc_video||(this._adCountdown--,this.player.notify("adSkip-updateCountdown",this._adCountdown),this.player.infos.bc_video?(this.innerBandeau.innerHTML="",this.bandeauMessage.innerHTML="",this.bandeauMessage.style.cursor="default",this.is_mobile&&window.parent.postMessage({action:"content_ad_wrapper",type:"bc_video",content:AdSkip_translator.translate("duringAdsMessage"),id_visible:this.id_player},"*")):this._adCountdown<=0?(1===this._skip_this_ad_type&&(this.innerBandeau.style.display="none",this.innerClose.style.backgroundColor="#fff",this.innerClose.style.opacity="0.8",this.innerCloseSpan.style.color="#000",this.innerCloseSpan.style.cursor="pointer"),this.innerClose.addEventListener("click",this.skipadCallback.bind(this)),this.bandeauMessage.innerHTML=AdSkip_translator.translate("afterSkipAdMessage"),this.bandeauMessage.style.cursor="pointer",this.bandeauMessage.addEventListener("click",this.skipadCallback.bind(this)),this.is_mobile&&window.parent.postMessage({action:"content_ad_wrapper",type:"end_countdown",content:AdSkip_translator.translate("afterSkipAdMessage"),id_visible:this.id_player},"*")):(this.innerBandeau.innerHTML=this._adCountdown+" s",this.bandeauMessage.style.cursor="default",2<=this._adCountdown?(this.bandeauMessage.innerHTML=AdSkip_translator.translate("beforeSkipAdMessagePlur").replace("xx",this._adCountdown),this.is_mobile&&window.parent.postMessage({action:"content_ad_wrapper",type:"countdown",content:AdSkip_translator.translate("beforeSkipAdMessagePlur").replace("xx",this._adCountdown),id_visible:this.id_player},"*")):(this.bandeauMessage.innerHTML=AdSkip_translator.translate("beforeSkipAdMessageSing").replace("xx",this._adCountdown),this.is_mobile&&window.parent.postMessage({action:"content_ad_wrapper",type:"countdown",content:AdSkip_translator.translate("beforeSkipAdMessageSing").replace("xx",this._adCountdown),id_visible:this.id_player},"*")),setTimeout(this.manageAdCountdown.bind(this),1e3)))}},{key:"createBandeau",value:function(){var bandeauBottom=document.createElement("div"),bandeauMessage=(bandeauBottom.setAttribute("id",this.player.getTarget()+"_bandeau_bottom"),document.createElement("div")),bandeau=(bandeauMessage.setAttribute("id",this.player.getTarget()+"_innerBandeauMessage"),bandeauMessage.classList.add("inner-bandeau-message"),bandeauBottom.appendChild(bandeauMessage),document.createElement("div")),innerBandeau=(bandeau.setAttribute("id",this.player.getTarget()+"_bandeau"),document.createElement("div")),innerCloseSpan=(innerBandeau.setAttribute("id",this.player.getTarget()+"_innerBandeau"),document.createElement("div")),innerClose=(innerCloseSpan.setAttribute("id",this.player.getTarget()+"_innerCloseSpan"),document.createElement("div"));innerClose.setAttribute("id",this.player.getTarget()+"_innerClose"),innerClose.appendChild(innerCloseSpan),bandeau.appendChild(innerClose),bandeau.appendChild(innerBandeau),document.getElementById(this.player.getTarget()).appendChild(bandeau),document.getElementById(this.player.getTarget()).appendChild(bandeauBottom),innerCloseSpan.classList.add("inner-close-span"),innerClose.classList.add("inner-close"),bandeau.classList.add("bandeau"),bandeau.classList.add("bandeau-top"),innerBandeau.classList.add("inner-bandeau"),bandeauBottom.classList.add("bandeau-bottom"),bandeauBottom.classList.add("bandeau"),this.bandeau=bandeau,this.bandeauMessage=bandeauMessage,this.innerBandeau=innerBandeau,this.innerClose=innerClose,this.innerCloseSpan=innerCloseSpan,this.bandeauBottom=bandeauBottom,this.bandeau.style.display="none",this.bandeauBottom.style.display="none"}},{key:"getPostMessageListener",value:function(){return function(evt){var matches;void 0===evt||"string"!=typeof evt.data||(matches=evt.data.match(/(your_id=)(\d+)/))&&(this.id_player=matches[2]),void 0!==evt&&"object"==AdSkip_typeof(evt.data)&&"skip_advertising"===evt.data.action&&this.skipadCallback()}.bind(this)}}])&&AdSkip_defineProperties(Constructor.prototype,protoProps),staticProps&&AdSkip_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AdSkip}();function VideoList_typeof(obj){return(VideoList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function VideoList_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const plugins_VideoList=function(){function VideoList(apiurl){if(!(this instanceof VideoList))throw new TypeError("Cannot call a class as a function");this.apiUrl=apiurl,this._alreadySeen=[],this._nextVideos=[],this.loading=!1,this.isFalseOutstream=!1}var Constructor,protoProps,staticProps;return Constructor=VideoList,(protoProps=[{key:"setPlayer",value:function(player){this.player=player,this._playlist=1===player.infos.typePlayer,this._playlist_index=0}},{key:"init",value:function(){var videolist=this;this.outstream=5===this.player.infos.float_video,this.infiniteLoop=this.outstream,this._urlfacebook=this.player.infos.referer,this.player.on("timeupdate",function(){0!==videolist._nextVideos.length||videolist.loading||(videolist.loading=!0,videolist.getNextVideos())}),this.player.addListener("outsream-forcenext",function(){this.initVideoList(),this.isFalseOutstream=!0,this.player.addListener("playlist_ready",this.launchNextVideo.bind(this))}.bind(this)),this.player.addListener("outstream-start",this.initVideoList.bind(this)),this.player.on("timeupdate",this.initVideoList.bind(this)),!this.player.infos.recoEndpanel||this.outstream?this.player.on("ended",this.launchNextVideo.bind(this)):this.player.on("ended",function(){setTimeout(videolist.launchNextVideo.bind(videolist),1e3*videolist.player.infos.delaiNextvideo)}),this._alreadySeen.push(this.player.infos.topicId+"_"+this.player.infos.id),this.player.addListener("replay-ready",function(){void 0===videolist._alreadySeen&&(videolist._alreadySeen=[])})}},{key:"initVideoList",value:function(){0!==this._nextVideos.length||this.loading||(this.loading=!0,this.getNextVideos())}},{key:"initReco",value:function(reset){if(!this.outstream){for(var videolistPlugin,player=this.player,suggest=(window.launchFromSuggest=(videolistPlugin=this,function(cid,encid){"undefined"!=typeof eStatTag&&player._mediametrieStreamTag&&"before_preroll"!==player._state&&player._mediametrieStreamTag.notifyPlayer("stop"),player.videoReadDuration=0,videolistPlugin.loadFromVideoList(cid,encid,!0)}),[]),ii=0;ii<this._nextVideos.length;ii++){var nextvideo=this._nextVideos[ii].content_id+"_"+this._nextVideos[ii].encrypt_id;-1===this._alreadySeen.indexOf(nextvideo)&&suggest.push({title:this._nextVideos[ii].title,description:this._nextVideos[ii].description,duration:this._nextVideos[ii].duration,url:"javascript:launchFromSuggest("+this._nextVideos[ii].content_id+', "'+this._nextVideos[ii].encrypt_id+'")',image:void 0===VideoList_typeof(this._nextVideos[ii].thumb_H)?this._nextVideos[ii].thumb:this._nextVideos[ii].thumb_H,imageSrc:this._nextVideos[ii].thumb,label:this._nextVideos[ii].label})}this.player.infos.recoEndpanel&&this.player.proposeVideoSetup(suggest,reset),suggest.length||this.player.on("ended",function(){this.player.setState("before_postroll")}.bind(this)),this.player.addListener("replay-ready",function(){videolist._alreadySeen=[]})}}},{key:"getNextVideos",value:function(){var videolist,player;!1!==this._playlist?(player=(videolist=this).player,HttpRequest_default().ajax({url:player.infos.path+"/api/widget/smart?mdtk="+player.infos.mdtk+"&zone="+player.infos.zone+"&meta_title="+encodeURIComponent(player.infos.title)+"&get_video_js=1&from=unitaire",dataType:"json",success:function(data){videolist._nextVideos=data=null!=data?data:[]},error:function(){},complete:function(){0<videolist._nextVideos.length&&((player.infos.recoEndpanel||player.infos.recoOverlay)&&videolist.initReco(!1),player.notify("playlist_ready",videolist._nextVideos),document.getElementById(player.getTarget()).classList.add("reco-loaded"))}})):this._nextVideos=[]}},{key:"launchNextVideo",value:function(){this.infiniteLoop&&this._nextVideos.length===this._alreadySeen.length&&(this._alreadySeen=[]);for(var ii=0;ii<this._nextVideos.length;ii++){var nextVideoTopic=this._nextVideos[ii].content_id,nextVideo=nextVideoTopic+"_"+this._nextVideos[ii].encrypt_id;if(-1===this._alreadySeen.indexOf(nextVideo))return this.loadFromVideoList(nextVideoTopic,this._nextVideos[ii].encrypt_id),!0}return this.player.setState("before_postroll"),!1}},{key:"loadFromVideoList",value:function(topicid,encid,fromSuggest){void 0!==fromSuggest&&!0===fromSuggest||(fromSuggest=!1),this._alreadySeen.push(topicid+"_"+encid),this.player.adapter.loading(),(this.player.infos.recoEndpanel||this.player.infos.recoOverlay)&&this.initReco(!0);var player=this.player,isFalseOutstream=this.isFalseOutstream,topicid=(this._playlist_index++,this.apiUrl+"/player/getConf/"+this.player.infos.mdtk+"/"+this.player.infos.zone+"/"+topicid+"_"+encid+"?width="+this.player.sizeX()+"&height="+this.player.sizeY()+"&autoplay=yes&target="+encodeURIComponent(this.player.getTarget())+"&plindex="+this._playlist_index+"&adb="+this.player.infos.adBlock+"&vsync="+this.player.infos.vsync+"&typePlayer="+this.player.infos.typePlayer);topicid+="&from_playlist=1",void 0!==this._urlfacebook&&null!=this._urlfacebook&&""!==this._urlfacebook&&(topicid+="&urlfacebook="+encodeURIComponent(this._urlfacebook)),HttpRequest_default().ajax({url:topicid,dataType:"json",success:function(data){var currentVol=player.getVolume(),currentIsMute=player.isMute(),newFstart=fromSuggest?0:player.infos.fstart,newPlindex=fromSuggest?0:"gvqls8s"===player.getInfo("video_full_id")?parseInt(player.infos.plindex):parseInt(player.infos.plindex)+1;player.reinit(data,{autoplay:"yes",fromPlaylist:1,volume:currentVol,mute:currentIsMute,fstart:newFstart,plindex:newPlindex},!0,isFalseOutstream)}})}}])&&VideoList_defineProperties(Constructor.prototype,protoProps),staticProps&&VideoList_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),VideoList}();function VideoLive_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VideoLive_translator=__webpack_require__(1502);const plugins_VideoLive=function(){function VideoLive(liveInfo){if(!(this instanceof VideoLive))throw new TypeError("Cannot call a class as a function");this.src=liveInfo.src,this.id=liveInfo.id}var Constructor,protoProps,staticProps;return Constructor=VideoLive,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){this.player.addListener("reinit",this.reinit.bind(this)),this.player.on("error",this.onError.bind(this)),this.player.on("ended",function(e){e.stopPropagation(),e.stopImmediatePropagation(),this.player.setState("live-notready")}.bind(this)),this.player.setState("ready"),this.liveStarted=!1,this.player.addListener("before_preroll",function(){this.liveStarted=!0}.bind(this)),"yes"===this.player.infos.autoplay&&this.player.adapter.loading()}},{key:"reinit",value:function(){this.liveStarted=!1,this.liveStatus="ready",this.checkStatusOfLive()}},{key:"onError",value:function(){var errcode;null!=this.player.adapter.getAdaptee().error()&&(errcode=this.player.adapter.getAdaptee().error().code,this.liveStarted||(this.player.setState("live-notready"),this.liveStatus="error"),"LIVE_STOPPED"!==errcode&&(this.displayError(),this.checkStatusOfLive()))}},{key:"refreshLive",value:function(){if(this.player.adapter.getAdaptee().error(null),"error"===this.liveStatus)return this.liveStatus="loading",void this.player.reinit(this.player.vinfos,{},!0);this.liveStarted?this.player.state:(this.liveStarted=!0,this.player.setState("ready",!0))}},{key:"checkStatusOfLive",value:function(){var wowzaId=this.id,objdtk=this.player,liveplugin=this;function refreshLiveManager(){HttpRequest_default().get(objdtk.infos.path+"/api/video/getlivestatus/?livestreamid="+wowzaId,[],function(data){"streaming"===data.status||""===wowzaId?(setTimeout(liveplugin.refreshLive.bind(liveplugin),5e3),clearInterval(liveplugin.refreshLiveManager)):liveplugin.displayError()},"json")}this.refreshLiveManager&&clearInterval(this.refreshLiveManager),this.refreshLiveManager=setInterval(refreshLiveManager,15e3),refreshLiveManager()}},{key:"displayError",value:function(){var err=this.player.adapter.getAdaptee().error();err&&"LIVE_STOPPED"===err.code||this.player.adapter.getAdaptee().error({code:"LIVE_STOPPED",headline:VideoLive_translator.translate("LIVE_STOPPED")})}}])&&VideoLive_defineProperties(Constructor.prototype,protoProps),staticProps&&VideoLive_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),VideoLive}();var HttpRequest=__webpack_require__(7646),PlayerEvent_default=__webpack_require__.n(HttpRequest),PlayerAdapterFactory=__webpack_require__(1841),OverlayPreview_default=__webpack_require__.n(PlayerAdapterFactory);function Secure_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const plugins_Secure=function(){function Secure(){if(!(this instanceof Secure))throw new TypeError("Cannot call a class as a function")}var Constructor,protoProps,staticProps;return Constructor=Secure,(protoProps=[{key:"setPlayer",value:function(player){this.player=player}},{key:"init",value:function(){this.player.infos.no_widget_embed&&!this.isAllowed()&&this.player.kill("Invalid referer")}},{key:"extractHostname",value:function(url){url=-1<url.indexOf("://")?url.split("/")[2]:url.split("/")[0];return url=(url=url.split(":")[0]).split("?")[0]}},{key:"isAllowed",value:function(){try{var domain_url=window.location!=window.parent.location?document.referrer:document.location.href,refererURL=this.extractHostname(this.player.infos.url).trim(),clientURL=this.extractHostname(domain_url).trim();if(""!=refererURL&&refererURL!=clientURL)return!1}catch(e){this.block_embed=!0}return!0}}])&&Secure_defineProperties(Constructor.prototype,protoProps),staticProps&&Secure_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Secure}();function ConsoleLog_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const plugins_ConsoleLog=function(){function ConsoleLog(){if(!(this instanceof ConsoleLog))throw new TypeError("Cannot call a class as a function");this.randomCss=((1<<24)*Math.random()|0).toString(16)}var Constructor,protoProps,staticProps;return Constructor=ConsoleLog,(protoProps=[{key:"setPlayer",value:function(player){this.player=player,this.player.randomCss=this.randomCss}},{key:"init",value:function(){this.player.logInfo=this.logInfo.bind(this)}},{key:"logInfo",value:function(titre,message){var text,randomCss,prefixCss,titleCss,args,type=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"log";library_DebugLog.isDebugActive()&&(args=[text="%c • %cDGTK DEBUG%c%s:%c %s",randomCss="background: #"+this.randomCss+";border-radius: 3px 3px;padding: 1px 1px;",prefixCss="background: #24325E;border-radius: 3px 3px;color: #fff;padding: 1px 3px;",titleCss="font-weight: bold;color: #000;padding: 1px 5px 1px 3px;",titre,"",message],"table"===type&&type in console&&"group"in console?(args=[text,randomCss,prefixCss,titleCss,titre,"",""],console.group.apply(console,args),console.table(message),console.groupEnd()):"error"===type||"object"===type?(args=[text,randomCss,prefixCss,titleCss,titre,"",""],console.group.apply(console,args),console.log(message),console.groupEnd()):type in console&&console.log.apply(console,args))}}])&&ConsoleLog_defineProperties(Constructor.prototype,protoProps),staticProps&&ConsoleLog_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ConsoleLog}();var lib=__webpack_require__(5088),cmpapi_lib=__webpack_require__(8114);function Rgpd_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}const plugins_Rgpd=function(){function Rgpd(requestOptions,adParam){if(!(this instanceof Rgpd))throw new TypeError("Cannot call a class as a function");this.hasGlobalScope=!1,this.urlConsentString=void 0!==requestOptions.gdprconsentstring?requestOptions.gdprconsentstring:"",this.consentString="",this.gdprApplies=!0,this.tcData=!1,this.consentObject=!1,this.digitekaConsent=!1,this.hasReceivedCmpResponse=!1,this.hasCmpAnswered=!1,this.adParam=adParam}var Constructor,protoProps,staticProps;return Constructor=Rgpd,(protoProps=[{key:"init",value:function(){var addon=this;if(this.player.getConsentData=function(){return addon.getConsentString()},this.player.getGdprApplies=function(){return addon.getGdprApplies()},this.player.getGdprGlobalScope=function(){return addon.getHasGlobalScope()},this.player.getDigitekaConsent=function(){return addon.getDigitekaConsent()},this.player.getConsentObject=function(){return addon.getConsentObject()},this.player.getTcData=function(){return addon.getTcData()},this.player.getVendorsAllowed=function(){return addon.getVendorsAllowed()},this.player.setDigitekaConsentString=function(purposesIdsList){return addon.setDigitekaConsentString(purposesIdsList)},this.player.getPurposesAllowed=function(){return addon.getPurposesAllowed()},this.player.hasReceivedCmpResponse=function(){return addon.hasReceivedCmpResponse},"no"===this.adParam&&this.cmpFailure(),this.player.isAmp||this.player.isAmpSmart)this.player.isAmp?(window.parent.postMessage({sentinel:"amp",type:"send-consent-data"},"*"),window.addEventListener("message",function(event){this.isAmpMessage(event,"consent-data")&&(this.gdprApplies=event.data.gdprApplies,this.consentString=event.data.consentString,void 0!==this.consentString&&this.treatConsentString())}.bind(this)),window.addEventListener("ampvideoiframe",function(event){null!==event.detail.consentString&&(this.hasCmpAnswered=!0,this.gdprApplies=event.detail.gdprApplies,this.consentString=event.detail.consentString),console.log("this.consentString",this.consentString),void 0!==this.consentString&&null!==this.consentString&&this.treatConsentString()}.bind(this))):(window.parent.postMessage("tcString","*"),window.addEventListener("message",function(event){var json={};try{json="string"==typeof event.data?JSON.parse(event.data):event.data}catch(ignore){}void 0!==json.tcString&&(this.consentString=json.tcString,this.player.isAmp=!0,void 0!==this.consentString&&""!==this.consentString?this.treatConsentString():this.cmpFailure())}.bind(this)));else{for(var cmpFrame,frame=window,cmpCallbacks={};!cmpFrame;){try{frame.frames.__tcfapiLocator&&(cmpFrame=frame)}catch(ignore){console.log(ignore)}if(frame===window.top)break;frame=frame.parent}if(!cmpFrame){if(""===this.urlConsentString)return this.cmpFailure(),!1;try{return this.consentObject=lib.TCString.decode(this.urlConsentString),new cmpapi_lib.CmpApi(this.consentObject.cmpId,this.consentObject.cmpVersion,!0).update(this.urlConsentString),window.__tcfapi("addEventListener",2,this.callBack.bind(this)),!1}catch(e){console.log(e)}}window.__tcfapi=function(cmd,version,callback,arg){var callId=Math.random()+"",cmd={__tcfapiCall:{command:cmd,parameter:arg,version:version,callId:callId}};cmpCallbacks[callId]=callback,cmd=JSON.parse(JSON.stringify(cmd)),cmpFrame.postMessage(cmd,"*")},window.addEventListener("message",function(event){var json={};try{json="string"==typeof event.data?JSON.parse(event.data):event.data}catch(ignore){}event=json.__tcfapiReturn;event&&"function"==typeof cmpCallbacks[event.callId]&&cmpCallbacks[event.callId](event.returnValue,event.success)},!1),__tcfapi("addEventListener",2,this.callBack.bind(this))}setTimeout(function(){this.hasReceivedCmpResponse||this.hasCmpAnswered||(this.player.cmpTimeOut=!0,this.cmpFailure())}.bind(this),5e3)}},{key:"treatConsentString",value:function(){var _this=this,tcData=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.player.gdprSubmitted){if(this.consentObject=lib.TCString.decode(this.consentString),this.hasGlobalScope=!!this.player.isAmp||!this.consentObject.isServiceSpecific,this.digitekaConsent=this.consentObject.vendorConsents.has(343),this.player.vendorsAllowed={digiteka:this.digitekaConsent,adot:this.consentObject.vendorConsents.has(272),adways:this.consentObject.vendorConsents.has(697),amazon:this.consentObject.vendorConsents.has(793),aniview:this.consentObject.vendorConsents.has(780),appnexus:this.consentObject.vendorConsents.has(32),bliink:this.consentObject.vendorConsents.has(658),criteo:this.consentObject.vendorConsents.has(91),"freewheel-ssp":this.consentObject.vendorConsents.has(285),improvedigital:this.consentObject.vendorConsents.has(253),invibes:this.consentObject.vendorConsents.has(436),ix:this.consentObject.vendorConsents.has(10),oneVideo:this.consentObject.vendorConsents.has(25),openx:this.consentObject.vendorConsents.has(69),proxistore:this.consentObject.vendorConsents.has(418),pubmatic:this.consentObject.vendorConsents.has(76),richaudience:this.consentObject.vendorConsents.has(108),rubicon:this.consentObject.vendorConsents.has(52),smartadserver:this.consentObject.vendorConsents.has(45),smilewanted:this.consentObject.vendorConsents.has(639),spotx:this.consentObject.vendorConsents.has(165),teads:this.consentObject.vendorConsents.has(132),triplelift:this.consentObject.vendorConsents.has(28)},this.player.purpose1Consent=this.consentObject.purposeOneTreatment||this.consentObject.purposeConsents.has(1),this.player.googleConsent=this.consentObject.purposeOneTreatment||this.consentObject.purposeConsents.has(1)&&this.consentObject.vendorConsents.has(755),this.player.amazonConsent=this.consentObject.purposeOneTreatment||this.consentObject.purposeConsents.has(1)&&this.consentObject.vendorConsents.has(793),tcData)this.tcData=tcData;else if("undefined"!=typeof __tcfapi)return void __tcfapi("getTCData",2,function(tcData,success){success&&(_this.tcData=tcData,_this.hasReceivedCmpResponse=!0,_this.player.notify("hasReceivedCmpResponse"))})}else this.player.purpose1Consent=!0,this.player.googleConsent=!0,this.player.amazonConsent=!0;this.hasReceivedCmpResponse=!0,this.player.notify("hasReceivedCmpResponse")}},{key:"cmpFailure",value:function(){return this.player.amazonConsent=!this.player.gdprSubmitted,this.player.googleConsent=!this.player.gdprSubmitted,this.player.purpose1Consent=!this.player.gdprSubmitted,this.hasGlobalScope=!1,this.consentString=this.urlConsentString,this.consentObject=!1,this.digitekaConsent=!1,this.hasReceivedCmpResponse=!0,console.log("CMP NOT FOUND"),this.player.notify("hasReceivedCmpResponse"),!1}},{key:"isAmpMessage",value:function(event,type){return event.source===window.parent&&event.origin!==window.location.origin&&event.data&&"amp"===event.data.sentinel&&event.data.type===type}},{key:"callBack",value:function(tcData,success){success?(this.hasCmpAnswered=!0,"tcloaded"===tcData.eventStatus||"useractioncomplete"===tcData.eventStatus?(this.gdprApplies=tcData.gdprApplies,this.consentString=tcData.tcString||"",this.treatConsentString(tcData)):"cmpuishown"===tcData.eventStatus?this.player.notify("waitingForCmpResponse"):!1===tcData.gdprApplies&&(console.log("gdprApplies=false"),this.gdprApplies=tcData.gdprApplies,this.consentString="",this.player.notify("hasReceivedCmpResponse"))):(console.log(tcData.msg),this.player.notify("hasReceivedCmpResponse"))}},{key:"setPlayer",value:function(player){this.player=player}},{key:"getConsentString",value:function(){return this.consentString}},{key:"getHasGlobalScope",value:function(){return this.hasGlobalScope?"1":"0"}},{key:"getGdprApplies",value:function(){return this.gdprApplies?"1":"0"}},{key:"getDigitekaConsent",value:function(){return this.digitekaConsent?"1":"0"}},{key:"getTcData",value:function(){return this.tcData}},{key:"getConsentObject",value:function(){return this.consentObject}},{key:"getVendorsAllowed",value:function(){var vendorsAllowed=[];return this.consentObject&&void 0!==this.consentObject.vendorConsents&&this.consentObject.vendorConsents.forEach(function(isConsented,vendorId){isConsented&&vendorsAllowed.push(vendorId)}),vendorsAllowed}},{key:"getPurposesAllowed",value:function(){var purposesAllowed=[];return this.consentObject&&void 0!==this.consentObject.purposeConsents&&this.consentObject.purposeConsents.forEach(function(isConsented,purposeId){isConsented&&purposesAllowed.push(purposeId)}),purposesAllowed}}])&&Rgpd_defineProperties(Constructor.prototype,protoProps),staticProps&&Rgpd_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Rgpd}(),adlooxMdtks_namespaceObject=JSON.parse('{"Rossel":{"params":{"clientId":552,"platformId":153,"tagId":1271,"id15":"366_rossel"},"mdtks":["01490263","01359658","01499695","01899962","01187891","01972780","01582336","01342685","01668433","01252572","01338879","01196208","01390230","01150954","01301629","01800993","01217291","01233516","01259546","01538406","01554892","01229771","01265947","01626200","01754691","01049290","01241502","01834960","01263265","01946698","01351267","01071750"]},"Groupe Centre France":{"params":{"clientId":547,"platformId":153,"tagId":1272,"id15":"366_gcf"},"mdtks":["01990186","01306397","01508587","01751485","01314098","01097272","01779426","01032851","01746979","01795794","01910819","01688353","01215341","01844706","01333852","01438264","01296071","01140256","01505690","01628597","01857231","01124390","01183426","01251541","01195618","01646257","01488231","01164353","01906649","01974043","01763821","01694925","01292998","01378472","01252460","01327192","01047221","01218283","01646079","01974676","01615586","01498551","01274722"]},"Nice Matin":{"params":{"clientId":553,"platformId":153,"tagId":1273,"id15":"366_gnm"},"mdtks":["01918569","01287619","01643836","01965113","01190010","01871734","01682990","01056167","01258346","01519609","01824556","01574673","01014614","01305944","01783741","01517932","01242768","01558150","01606562","01387625"]},"La Provence":{"params":{"clientId":556,"platformId":153,"tagId":1275,"id15":"366_glp"},"mdtks":["01206636"]},"Groupe Sud-Ouest":{"params":{"clientId":555,"platformId":153,"tagId":1274,"id15":"366_gso"},"mdtks":["01136982","01638914","01562435","01554596","01932357","01722489","01642969","01580237","01357770","01680736","01948483","01547588","01792283","01295189","01769029","01120520","01545722"]},"Ebra":{"params":{"clientId":545,"platformId":153,"tagId":1277,"id15":"366_ebra"},"mdtks":["01154240","01836259","01766029","01329309","01375761","01545897","01107633","01918483","01051340","01062179","01292291","01727543","01633345","01034768","01631583","01458898","01495950","01806600","01245095","01368938","01349206","01949181","01535838","01983842","01498311","01212946","01630322","01595008","01451761","01955548","01731436","01587903","01716212","01449283","01554610","01606522","01275242","01368185","01535495","01588494","01218089","01369135","01023659","01548607","01641231","01729016","01332235","01727711","01120440","01251262,"]},"Nrco":{"params":{"clientId":546,"platformId":153,"tagId":1278,"id15":"366_nrco"},"mdtks":["01027988","01056263","01466952","01546666","01539685","01072570","01767600"]},"Ouest France":{"params":{"clientId":544,"platformId":153,"tagId":1279,"id15":"366_ouestfrance"},"mdtks":["01300108","01124706","01357046","01804349","01592117","01067376","01199051","01502988","01375002","01630102","01300532","01189205","01876487","01530607","01558290","01039190","01951836","01841738","01786578","01097589","01164585","01903477","01341618","01349275","01346979","01812387","01091668","01437041","01628798","01802878","01324822","01812675","01888577","01086461","01458419","01197991","01187615","01366642","01091319","01654671","01706250","01413112","01674245","01347202","01777459","01163042","01921679","01136232","01789434","01362431","01674661","01234685","01379453","01610627","01691706","01648701","01851486","01496351","01724198","01500910","01337284","01041927","01494966","01653733","01246956","01249546","01176875","01927680","01327244","01429012","01763465","01618551","01388994","01273636","01738463","01824257","01541934","01954380","01441795","01207115","01537621","01774625"]},"La Dépêche du Midi":{"params":{"clientId":551,"platformId":153,"tagId":1276,"id15":"366_ldi"},"mdtks":["01325094","01268254","01371194","01914874","01644848","01044511","01067998","01352385","01736973","01433795","01028348","01249523","01910061","01906273","01793213","01301999","01768617","01907413","01652144","01986549"]},"telegramme":{"params":{"clientId":548,"platformId":153,"tagId":1280,"id15":"366_telegramme"},"mdtks":["01259353","01789283","01870878","01964539","01185017","01706615","01884000"]},"Boursorama":{"params":{"clientId":659,"platformId":153,"tagId":1651,"id15":"boursorama","id11":"video","id12":"$ADLOOX_WEBSITE"},"mdtks":["01747256","01684514","01171604"]}}');function DtkPlayer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DtkPlayer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DtkPlayer_createClass(Constructor,protoProps,staticProps){return protoProps&&DtkPlayer_defineProperties(Constructor.prototype,protoProps),staticProps&&DtkPlayer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}__webpack_require__(3565);var HttpRequest=function(){function DtkPlayer(adapter,wrapper){DtkPlayer_classCallCheck(this,DtkPlayer),this.adapter=adapter,this._debug_levels={vsync:1,dtk:1},this.infos={},this.wrapper=wrapper,this.listeners={},this._playAdAsap=!1,this._jw=adapter,this._state="",this.relevantTagFilter=[],this.forceNoAd=!1,this.hbCampaignIds=[],this.hbResponsesAdIds=[],this.hbBidderIds=[],this.isAdFraudInventory=!1}return DtkPlayer_createClass(DtkPlayer,[{key:"preInit",value:function(vinfos,requestOptions,player){var connection;player._preventMuteForced=!0,player.IMAReady=!1,player.useSpott=!1,player.isSpottInit=!1,"no"===vinfos.settings.ad||!player.hasCampaigns(vinfos.campaigns)&&!1===vinfos.settings.outstream?(player.IMAReady=!0,player.notify("ima-ready")):loadIMA(function(){player.IMAReady=!0,player.notify("ima-ready")}),void 0===vinfos.video.isMobile||1!==parseInt(vinfos.video.isMobile)||void 0===vinfos.settings.scrollToPlayWifi||1!==parseInt(vinfos.settings.scrollToPlayWifi)||void 0!==(connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&void 0!==connection.type&&("cellular"!==connection.type.toLowerCase()||1!==parseInt(vinfos.settings.play_mode)&&2!==parseInt(vinfos.settings.play_mode)||void 0!==vinfos.settings.plindex||(vinfos.settings.play_mode=0,vinfos.settings.autoplay=0,vinfos.settings.scrolltoplay=0,requestOptions.autoplay="no")),player.reinit(vinfos,requestOptions,!1)}},{key:"reinit",value:function(vinfos,requestOptions,reset){var addonsManager,isFalseOutstream=3<arguments.length&&void 0!==arguments[3]&&arguments[3],player=(this.vinfos=vinfos,this.isFalseOutstream=isFalseOutstream,this),isFalseOutstream=(reset&&(player._eventsent={},this.adapter.reset(),this.adapter.trigger("dtk-reload",vinfos),vinfos.video.bd.diff=parseInt(Date.now()+""+Math.floor(Math.random()*Math.floor(999999)),10).toString(36)+""+parseInt(Math.floor(Math.random()*Math.floor(99999999))+"",10).toString(36),this.adapter.trigger("change_visible_title",vinfos)),player.video.duration=void 0!==vinfos.video.duration?vinfos.video.duration:vinfos.video.providerDuration,this.timePreroll=void 0!==vinfos.settings.digitalAdTrust&&1===parseInt(vinfos.settings.digitalAdTrust)?player.video.duration/2:player.video.duration,this.nb_preroll=0,this.pause_on_scroll_out=void 0!==vinfos.settings.pauseOnScrollOut&&1===vinfos.settings.pauseOnScrollOut,this.infos.recoOverlay=1,this.infos.recoEndpanel=1,this.infos.delaiNextvideo=5,this._printed={preroll:!1,overlay:!1,postroll:!1},this.prerollAlreadyPlayed=[],this.overlayAlreadyPlayed=[],this.prebidAdsList=[],this._video_preview_active=0,this.infos.multiad_preload_video_preview_delay=3e3,this.infos.playMultiAdTimeoutDelay=8e3,this.playMultiAdTimeoutId=!1,__webpack_require__(2802));switch(player.listOfMdtkToFocus=isFalseOutstream.focusMdtk,player.statsurl=isFalseOutstream.statsurl,player.mergeInfos(vinfos.settings),player.mergeInfos(vinfos.adconf),player.adapter.getSkinLoader().initSkin(vinfos.settings.skin.filename),player.infos.bc_video=!1,player._firstAutoplay="no",player._scrollToPlayDelay=0,this.endOfVisiblePlayer=!1,this.urlfacebook=vinfos.settings.urlfacebook,this.gam_publisher=[],this.digitekaBid=!1,this.autoPilotedGagToHbP2Campaigns=[],this.autoPilotedP2Campaigns=[],this.adlooxMdtks=adlooxMdtks_namespaceObject,this.adlooxParams={},this.adlooxMdtks=Object.values(this.adlooxMdtks).filter(function(company){return-1!==company.mdtks.indexOf(vinfos.settings.mdtk)}),0<this.adlooxMdtks.length&&(this.adlooxParams=this.adlooxMdtks[0].params),player.infos.autoplay){case 0:case-1:player.infos.autoplay="no";break;case 1:player.infos.autoplay="yes";break;case 2:player.infos.autoplay="scroll-to-play"}if(player._firstAutoplay=player.infos.autoplay,void 0===this.infos.plindex&&(this.infos.plindex=0),void 0===this.infos.fstart)if(1===player.infos.scrolltoplay)this.infos.fstart=2;else switch(this.infos.autoplay){case"no":this.infos.fstart=0;break;case"yes":this.infos.fstart=1;break;case"scroll-to-play":case"in-read":this.infos.fstart=2;break;case"over-to-play":case"hover-to-play":this.infos.fstart=3;break;default:this.infos.fstart=null}void 0===vinfos.video.isMobile&&(player.infos.isMobile=0),player.infos.gemiusStream=vinfos.video.gemiusStream,player.infos.isVisibleIframe=2,player.infos.is50percentVisible=0,player.infos.isIframe=player.infos.iframeMode,player.infos.owner=vinfos.video.ownerId,player.infos.adBlock="undefined"!=typeof _um_ads_allowed&&1===_um_ads_allowed||1===player.infos.isWebview?0:1,player.mergeInfos(requestOptions),void 0===player.infos.recoEndpanel?player.infos.recoEndpanel=0:player.infos.recoEndpanel=parseInt(player.infos.recoEndpanel),void 0===player.infos.recoOverlay?player.infos.recoOverlay=0:player.infos.recoOverlay=parseInt(player.infos.recoOverlay),void 0===player.infos.typePlayer&&void 0===player.infos.type_player?player.infos.typePlayer=1:player.infos.typePlayer=player.infos.typePlayer||player.infos.type_player,void 0===player.infos.scrolltoplay&&(player.infos.scrolltoplay=0),player.infos.path=void 0!==isFalseOutstream.path?isFalseOutstream.path:"//www.ultimedia.com",player.eventlogUrl=void 0!==isFalseOutstream.eventlogUrl?isFalseOutstream.eventlogUrl:"//dig.ultimedia.com/v/",player.allTagsTimeout=void 0!==isFalseOutstream.allTagTimeout?isFalseOutstream.allTagTimeout:9999999,player.allTagsTimeout=void 0!==player.infos.onetagtimeout?player.infos.onetagtimeout:player.allTagsTimeout,void 0===vinfos.adTry&&(player.infos.adTry=1),player.infos.DEFAULT_DURATION_PREVIEW=8,player.infos.DEFAULT_DURATION_PREVIEW_MESSAGE=2,player.infos.DEFAULT_THRESHOLD_PREVIEW=99,player.infos.initVsyncId=null,player.infos.preroll_inventory_sent=!1,player.infos.postroll_inventory_sent=!1,player.infos.preroll_stat_sent=!1,player.infos.postroll_stat_sent=!1,player.initCampaigns(vinfos.campaigns,vinfos.campaignEgs),(1===player.infos.typePlayer&&1!==player.infos.scrolltoplay||(0!==this.infos.float_video||0!==this.infos.visible_plus)&&"yes"===this.infos.autoplay)&&(this.campaigns.preroll=this.campaigns.preroll.map(function(obj){return obj.preview=0,obj})),vinfos.customSettings=requestOptions,player.adapter.getPlayerInfo=player.getInfo.bind(player),player.load(vinfos,reset),reset?(player.addonsManager.addons.prebid.init(!0),player.addonsManager.addons.cim.setPlayerId()):(player.registerPlugin(new plugins_ConsoleLog),(addonsManager=new(AddonsManager_default())(player)).attachAddon(new addons_Pulpix,"pulpix",!0),addonsManager.attachAddon(new addons_Visibility,"visibility",!0),addonsManager.attachAddon(new BigDataEvent,"bigDataEvent",!0),addonsManager.attachAddon(new addons_Prebid,"prebid",!0),addonsManager.attachAddon(new DetectBroswerMode,"detectBroswerMode",!0),addonsManager.attachAddon(new addons_CimTracking,"cim",!0),addonsManager.attachAddon(new addons_CookieManager(vinfos.allowedCookies),"cookieManager"),"function"==typeof initSpott&&(addonsManager.attachAddon(new addons_Spott,"spott",!1),player.useSpott=!0),player.addListener("visibilityChanged",player.manageVisibility.bind(player)),player.addListener("prebidAdReady",player.managePrebidAd.bind(player)),addonsManager.attachAddon(new addons_Lotname(isFalseOutstream.mdtkLotname),"lotnameAddon"),addonsManager.attachAddon(new addons_Mediametrie(isFalseOutstream.mediametrieSerial),"mediametrie",!0),addonsManager.attachAddon(new addons_Vertical,"Vertical",!0),addonsManager.init(),player.addonsManager=addonsManager),player.cmpTimeOut&&player.sendEvent("cmpko"),player.on("playerresize",function(){player.sendMessageToParent("event=resize")}),player.on("error",function(){player.notify("error")}),document.getElementById(player.getTarget()).addEventListener("mouseover",function(){player.manageHover()},!1),void 0!==requestOptions.endMessage&&player.on("ended",function(){parent.postMessage(requestOptions.endMessage,"*")}),reset||((addonsManager=new(PostMessageManager_default())(window)).attachListener(new postmessage_VsyncListener(player)),addonsManager.attachListener(new postmessage_VpaidListener(player)),addonsManager.attachListener(new postmessage_DtkListener(player)),player.messageListener=addonsManager,player.registerPlugin(new(Notification_default())),player.registerPlugin(new VisiblePlayer),player.registerPlugin(new plugins_AdPlay),player.registerPlugin(new plugins_AdSound(isFalseOutstream.mdtkSound)),player.registerPlugin(new plugins_AdSkip),player.registerPlugin(new plugins_VideoList(isFalseOutstream.deliveryapipath)),player.registerPlugin(new(OverlayPreview_default())),player.registerPlugin(new plugins_Outstream),player.registerPlugin(new plugins_Secure),player.registerPlugin(new(PlayerEvent_default())),void 0!==vinfos.video.media_sources.live&&player.registerPlugin(new plugins_VideoLive(vinfos.video.media_sources.live)),player.on("play",function(){player.visibilityStats(null,!0)}),player.on(["timeupdate","ended"],function(){player.visibilityStats()}),player.addListener("seek",function(seekInfo){player.visibilityStats({offset:seekInfo.oldPosition,position:seekInfo.newPosition})}),player.breakPoint=5,player.breakPointSec=10,player.startPos=0,player.videoReadDuration=0,player.start=(new Date).getTime()/1e3,player.on("playing",function(){player.start=(new Date).getTime()/1e3}),player.on("pause",function(){player.paused=(new Date).getTime()/1e3,player.videoReadDuration+=player.paused-player.start,player.sendEvent("vdvwd",{sec:Math.floor(player.videoReadDuration)})}),player.on("seeking",function(){player.breakPointSec=10*Math.floor(player.getPosition()/10)+10}),player.on("timeupdate",function(){var position=player.getPosition(),pct=100*position/player.getDuration(),arrPos10=(player.now=(new Date).getTime()/1e3,10*Math.floor(position/10)),position=Math.floor(position);arrPos10===player.breakPointSec&&position%10==0&&(player.videoReadDuration+=player.now-player.start,player.start=(new Date).getTime()/1e3,player.sendEvent("vdvwd",{sec:Math.floor(player.videoReadDuration)}),player.breakPointSec=10+arrPos10),pct>=player.breakPoint&&(pct=5*Math.floor(pct/5),player.sendEvent("vdcpt",{pct:pct}),player.breakPoint=pct+5),25<=pct&&player.sendEvent("vd1qt",{}),50<=pct&&player.sendEvent("vd2qt",{}),75<=pct&&player.sendEvent("vd3qt",{})}),player.on("fullscreenchange",function(){player.getFullscreen()&&("stream"===player._state?player.sendEvent("vdfsc",{pos:player.getPosition()}):"preroll"===player._state?player.sendEvent("prfsc",{cp:player.getCurrentAd().id}):"postroll"===player._state&&player.sendEvent("pofsc",{cp:player.getCurrentAd().id}))})),this.notify("reinit",player)}},{key:"kill",value:function(message){this.setState("killed"),console.log(message),this.adapter.destroy()}},{key:"reload",value:function(){this.reinit(this.vinfos,this.vinfos.customSettings,!0)}},{key:"registerPlugin",value:function(plugin){plugin.setPlayer(this),plugin.init(),void 0!==plugin.getPostMessageListener&&this.messageListener.attachListener(plugin.getPostMessageListener())}},{key:"skipAd",value:function(){if(null!=this.adPlayer)if(this.manageAdPlayerClass(!1),this.adPlayer.getAdSkippableState())this.adPlayer.skipAd();else{this.adPlayer.skipAd(!0);try{document.getElementById(this.getTarget()).removeChild(this.adcontainer)}catch(e){}this.isSpottInit&&this.spottPlayer.hideProducts(),this.adPlayer.callEvent_("AdSkipped")}}},{key:"setCurrentAd",value:function(adInfo){this.currentAd=adInfo}},{key:"getCurrentAd",value:function(){return this.currentAd}},{key:"getTarget",value:function(){return this.adapter.target}},{key:"off",value:function(){this.adapter.off.apply(this.adapter,arguments)}},{key:"on",value:function(){this.adapter.on.apply(this.adapter,arguments)}},{key:"one",value:function(){this.adapter.one.apply(this.adapter,arguments)}},{key:"play",value:function(){"stream"!==this._state||this.player?"before_preroll"!==this._state&&"ready"!==this._state||this.setState("before_preroll",!0):this.adapter.play.apply(this.adapter,arguments)}},{key:"isPaused",value:function(){return this.adapter.isPaused()}},{key:"isPlaying",value:function(){return"ready"!==this._state&&"loading"!==this._state&&"end"!==this._state&&!this.isPaused()}},{key:"pause",value:function(){"stream"===this._state&&this.adapter.pause.apply(this.adapter,arguments)}},{key:"pauseAd",value:function(setPause){this.infos.bc_video?this.pause():this.adPlayer&&(void 0===setPause||!setPause&&!this.adPlayer.isPlaying||setPause&&this.adPlayer.isPlaying)&&this.adPlayer.pauseAd()}},{key:"stop",value:function(){this.adapter.stop.apply(this.adapter,arguments)}},{key:"getFullscreen",value:function(){return this.adapter.getFullScreen()}},{key:"getPosition",value:function(){return this.adapter.getPosition()}},{key:"getDuration",value:function(){return this.adapter.getDuration()}},{key:"getRemainingTime",value:function(){return this.adapter.getRemainingTime()}},{key:"seek",value:function(position){this.adapter.seek(position)}},{key:"setMute",value:function(state){void 0===state?this.toggleMute():(state=(0,flagToInt.Z)(state),this.infos.muteState=state,this.setVolume(state?0:50),this.adapter.setMute(state)),this.notify("dtk-volumechange")}},{key:"getVolume",value:function(){return this.adapter.getVolume()}},{key:"setVolume",value:function(vol){this._playerVolume=vol,this.adapter.setVolume(vol),this.hasAdPlayer()&&(this.adPlayer.setAdVolume(+vol/100),this.notify("ad-volumechange"))}},{key:"isMute",value:function(){return this.hasAdPlayer()&&this.adPlayer.AdStarted?this.adPlayer.getAdVolume()<=.01:this.adapter.isMute()||this.infos.muteState||0===this.getVolume()}},{key:"hasAdPlayer",value:function(){return null!=this.adPlayer&&void 0!==this.adPlayer&&"overlay"!==this.adPlayer.rolltype}},{key:"visibilityStats",value:function(seek,termined){var newPosition,isVisibilityStatAd=this.infos.isVisibilityStatsAd,isVisibilityStat=this.infos.isVisibilityStats;this._positionAdTimestamp=(new Date).getTime(),"preroll"!==this._state&&"postroll"!==this._state||(isVisibilityStatAd=isVisibilityStatAd||this.getCurrentAd().isVisibilityStatsAd),null!==this.getCurrentAd()&&!isVisibilityStatAd&&"stream"!==this._state||!isVisibilityStat&&"stream"===this._state||(isVisibilityStatAd=this.isVisible(),(isVisibilityStat=(this.infos.datalogs?JSON.parse(Base64_default().decode(this.infos.datalogs)):{})||{}).adblock=this.infos.adBlock,isVisibilityStat.type_player=this.infos.typePlayer,isVisibilityStatAd=this.scrollout?"scrollout":"hidden"===document.visibilityState?document.visibilityState:isVisibilityStatAd?"visible":"scrollout","stream"===this._state&&(newPosition=void 0!==seek&&null!=seek?seek.position:this.getPosition(),isVisibilityStat.duration=newPosition-this._visibilityOldPosition,isVisibilityStat.durationTotal=this.getDuration(),(void 0!==termined&&termined||!(isVisibilityStat.duration<0||isVisibilityStatAd==this._visibilityOldVisibility&&isVisibilityStat.duration<5&&void 0===seek))&&(termined=""===(termined=this._visibilityOldVisibility)?"hidden":termined,this._visibilityOldPosition=void 0!==seek&&null!=seek?seek.offset:newPosition,this._visibilityOldPositionAd=this._positionAdTimestamp,this._visibilityOldVisibility=isVisibilityStatAd,isVisibilityStat.visibilityData={},isVisibilityStat.visibilityData[termined]=isVisibilityStat.duration,HttpRequest_default().ajax({type:"POST",url:this.statsurl+"/deliver/statistiques/visibility",data:{data:isVisibilityStat},dataType:"jsonp",jsonp:!1}))))}},{key:"sendRematchVideoStat",value:function(externalId){HttpRequest_default().ajax({type:"POST",url:"https://api.rematch.fr/videos/"+externalId+"/hit",jsonp:!1})}},{key:"hasCampaigns",value:function(campaigns){var key,allCampaigns={preroll:campaigns.preroll,preroll_google:campaigns.preroll_google,postroll:campaigns.postroll,postroll_google:campaigns.postroll_google,overlay:campaigns.overlay,overlay_google:campaigns.overlay_google,brandcontent:campaigns.brandcontent},campaignsAvailables={};for(key in allCampaigns)void 0!==allCampaigns[key]&&0<allCampaigns[key].length&&(campaignsAvailables[key]=allCampaigns[key]);return 0<Object.keys(campaignsAvailables).length}},{key:"initCampaigns",value:function(campaigns,campaignEgs){var campaignType,_campaignType,gagHbs,_this2=this,urlToSsp=(this.campaigns={preroll:campaigns.preroll,dbpreroll:campaigns.dbpreroll,preroll_google:campaigns.preroll_google,postroll:campaigns.postroll,postroll_google:campaigns.postroll_google,overlay:campaigns.overlay,overlay_google:campaigns.overlay_google,brandcontent:campaigns.brandcontent},this.campaignEgs=campaignEgs,console.log("EGS =",this.campaignEgs),{"www.videoadex.com":"digiteka","tag.adotmob.com":"adot","hv-contents.adpaths.com":"adways","vast.aniview.com":"aniview","secure.adnxs.com":"appnexus","engine.bliink.io":"bliink","ads.stickyadstv.com":"freewheel-ssp","ad.360yield.com":"improvedigital","instream.casalemedia.com":"ix","ads.adaptv.advertising.com":"oneVideo","vid.pubmatic.com":"pubmatic","video-ads.rubiconproject.com":"rubicon","www8.smartadserver.com":"smartadserver","videoapi.smartadserver.com":"smartadserver","vast.smilewanted.com":"smilewanted","search.spotxchange.com":"spotx"});for(campaignType in this.remainingCampaignEgs=[],this.remainingCampaignEgs2=[],this.campaigns)void 0!==this.campaigns[campaignType]&&(this.campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){campaign=void 0!==campaign.isCookieless?parseInt(campaign.isCookieless):0;return 0===campaign||1===campaign&&!_this2.purpose1Consent||2===campaign&&_this2.purpose1Consent}),this.campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){return!_this2.isAmp||void 0!==campaign.is_amp&&1===parseInt(campaign.is_amp)}),this.getInfo("filterVendorsAllowed")&&(this.campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){var domain=campaign.script.split("/")[2];return 0!==parseInt(campaign.is_hb)||urlToSsp[domain]in _this2.vendorsAllowed&&_this2.vendorsAllowed[urlToSsp[domain]]})),this.campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){var env,network,connection;return 1!==parseInt(campaign.autopilot)||(env=_this2.isAmp||_this2.isAmpSmart?"amp":"web",1===parseInt(_this2.getInfo("isWebview"))&&(env="app"),connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,network=void 0!==connection&&void 0!==connection.type?connection.type:"",0<(connection=campaignEgs.filter(function(egCampaign){return egCampaign.env===env&&egCampaign.network===network&&egCampaign.campaign_id===campaign.id})).length&&connection.forEach(function(egCampaign){return _this2.remainingCampaignEgs.push(egCampaign)}),0<connection.length)}),this.autoPilotedGagToHbP2Campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){var prEgs;return 1===parseInt(campaign.autopilot)&&1===parseInt(campaign.gag_to_hb)&&(prEgs=_this2.remainingCampaignEgs.filter(function(egCampaign){return"pr"===egCampaign.ad_position&&egCampaign.campaign_id===campaign.id}),0<_this2.remainingCampaignEgs.filter(function(egCampaign){return"p2"===egCampaign.ad_position&&egCampaign.campaign_id===campaign.id}).length&&0===prEgs.length)}),this.autoPilotedP2Campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){return 1===parseInt(campaign.autopilot)&&1!==parseInt(campaign.gag_to_hb)&&0<_this2.remainingCampaignEgs.length&&0<_this2.remainingCampaignEgs.filter(function(egCampaign){return"p2"===egCampaign.ad_position&&egCampaign.campaign_id===campaign.id}).length}),this.campaigns[campaignType]=this.campaigns[campaignType].filter(function(campaign){var remainingCampaignEgs;return!(1===parseInt(campaign.autopilot)&&0<_this2.remainingCampaignEgs.length)||(0<(remainingCampaignEgs=_this2.remainingCampaignEgs.filter(function(egCampaign){return"pr"===egCampaign.ad_position&&egCampaign.campaign_id===campaign.id})).length&&remainingCampaignEgs.forEach(function(egCampaign){return _this2.remainingCampaignEgs2.push(egCampaign)}),0<_this2.remainingCampaignEgs2.length)}));for(_campaignType in this.campaigns)!this.isHbCompetitionWithGag(_campaignType)||0<(gagHbs=this.campaigns[_campaignType].filter(function(campaign){return"1"===campaign.gag_to_hb})).length&&(gagHbs=gagHbs.reduce(function(campaign,campaign2){var cpm=parseFloat(campaign.cpm),cpm2=parseFloat(campaign2.cpm);return cpm2<cpm||cpm===cpm2&&(campaign.priority>campaign2.priority||campaign.priority===campaign2.priority&&1===Math.round(Math.random()+1))?campaign:campaign2}),this.gagToHb(gagHbs,_campaignType))}},{key:"isHbCompetitionWithGag",value:function(campaignType){if(void 0!==this.campaigns[campaignType]&&0<this.campaigns[campaignType].length)for(var campaignIndex in this.campaigns[campaignType])if("1"===this.campaigns[campaignType][campaignIndex].hb_with_gag)return this.hb_floor=addons_Prebid.getBidParamFromUltimediaAd(this.campaigns[campaignType][campaignIndex]).bidMin,"1"===this.campaigns[campaignType][campaignIndex].gam_publisher&&(this.gam_publisher[campaignType]=!0),!0;return!1}},{key:"gagToHb",value:function(campaign,campaignType){var alias,price;return"1"===campaign.gag_to_hb&&(campaign.is_hb=!0,alias="dtk",price=campaign.cpm,this.gam_publisher[campaignType]&&(alias+="ssp",campaign.cpm=price*=.595),1===(campaignType=parseInt(campaign.competition_rule))&&(price=this.hb_floor),campaign.bid_ajustment=1,campaign.alias=alias,campaign.bidder="digiteka",campaign.bid_params={id:campaign.id,price:price,currency:"EUR",tag:campaign.script,rule:campaignType},this.digitekaBid=campaign.bid_params,campaign.bid_params=JSON.stringify(campaign.bid_params)),campaign}},{key:"hasPreroll",value:function(){return 0<this.removeNonRelevantTags(this.campaigns.preroll).length}},{key:"inventoryStat",value:function(rolltype){var key=rolltype+"_inventory_sent";this.infos[key]||(this.infos[key]=!0,HttpRequest_default().ajax({type:"POST",url:this.statsurl+"/deliver/statistiques/inventory",data:{code_enc:this.infos.mdtk+"_"+this.infos.zone+"_"+rolltype+"_"+this.infos.isMobile+"_"+this.infos.adBlock+"_"+this.getInfo("country_code"),type_player:this.infos.typePlayer,first_ad:"33m03",visible:this.isVisibleString()},dataType:"jsonp",jsonp:!1}),"preroll"===rolltype&&(this.double_preroll&&1==this.nb_preroll?this.sendEvent("p2inv",{}):this.sendEvent("prinv",{})),0===this.infos.adBlock&&"FR"===this.getInfo("country_code")&&void 0!==this.infos.dar_pixel&&HttpRequest_default().getScript(this.infos.dar_pixel))}},{key:"loadAd",value:function(admode){var _this3=this;if(this.infos.currentRoll=admode,!this.forceNoAd){var _admode="midroll"===admode?"preroll":admode;if(_admode in this.campaigns){var ads=[];if(0===(ads=this.infos.adBlock?ads:(ads=this.removeNonRelevantTags(this.campaigns[_admode])).filter(function(ad){if("overlay"===ad.roll_type||"overlay_mobile"===ad.roll_type){if(void 0!==ad.forcedByPreroll)return-1!==_this3.prerollAlreadyPlayed.indexOf(ad.forcedByPreroll);if(void 0!==ad.overlay_no_preroll&&1===parseInt(ad.overlay_no_preroll))return 0<!_this3.prerollAlreadyPlayed.length;if(void 0!==ad.preroll_id&&null!==ad.preroll_id&&0!==parseInt(ad.preroll_id))return!(-1===_this3.prerollAlreadyPlayed.indexOf(ad.preroll_id))}return void 0===ad.prebid||!1===ad.prebid})).length)return this.infos.adTry&&"overlay"!==admode&&this.inventoryStat(admode),void("before_preroll"===this._state?(this.setState("preroll"),this.setState("after_preroll")):"before_postroll"===this._state?(this.setState("postroll"),this.setState("after_postroll")):"stream"===this._state&&"overlay"!==admode&&this.loadAd("overlay"));this.getInfo("multiadPreloadVideoPreview")||("postroll"===admode?this.inventoryStat("postroll"):"preroll"!==admode||this._adsPreloaded||this.inventoryStat("preroll"));var _admode=new(PostMessageSender_default())(window.self),_admode=(this.adPlayer=window.getVPAIDAd(_admode,this.statsurl),(this.adPlayer.player=this).getTarget()+"-adp-"+admode),adcontainer=document.getElementById(_admode),rolltype=(null==adcontainer&&((adcontainer=document.createElement("div")).setAttribute("id",_admode),admode.match(/overlay/)?adcontainer.setAttribute("style","width:100%;height:100%;position:absolute;top:0;left:0;visibility:hidden;"):adcontainer.setAttribute("style","width:100%;height:100%;position:absolute;top:0;left:0;visibility:hidden;background-color:black"),document.getElementById(this.getTarget()).appendChild(adcontainer)),adcontainer.style.display="",this.adcontainer=adcontainer,""),rolltype=admode.match(/preroll/)?"preroll":admode.match(/postroll/)?"postroll":admode.match(/brandcontent/)?"brandcontent":"midroll"===admode?"midroll":"overlay",_admode=(this.adPlayer.rolltype=rolltype,this.adPlayer.setVideoContainerId(this.adapter.getVideoId()),{ads:ads,timeout:this.allTagsTimeout,params:{waterfall:!0,ad_block:this.infos.adBlock,v2System:1,mdtk:this.getInfo("mdtk"),zone:this.getInfo("zone"),ns:this.getInfo("ns"),is_mobile:this.getInfo("isMobile"),type_player:this.getInfo("typePlayer"),country_code:this.getInfo("country_code"),rolltype:rolltype,is_visible:this.isVisibleString(),automute:this.infos.muteState,extern:!1,fromDtk:!0,insecure_mode:this.getInfo("isMobile")||this.infos.isSafari?0:1,intern_cm_ias_id:this.getInfo("intern_cm_ias_id"),intern_cm_ias:parseInt(this.getInfo("intern_cm_ias_id"))?1:0,intern_ias:1,camp_ias:[],insp:0,dbg:library_DebugLog.isDebugActive()?1:0,monito:this.getInfo("monitoring"),video:this.getInfo("id"),topic:this.getInfo("topicId"),owner:this.getInfo("owner"),s_url:this.getInfo("url"),moatIntegration:this.getInfo("moatIntegration"),preview:this.getInfo("multiadPreloadVideoPreview")?1:0,adsParam:this.getInfo("tagparam",this.getInfo("adsparam","")),adsParamDecoded:this.getInfo("tagparamdecoded",this.getInfo("adsparamdecoded","")),sspParam:this.getInfo("sspParam",!1),sspParamDecoded:this.getInfo("sspParamDecoded",!1),gdprconsentstring:this.getInfo("gdprconsentstring",""),gdpr_applies:this.getGdprApplies(),gdpr_consent:this.getConsentData(),gdpr_digiteka:this.getDigitekaConsent(),gdpr_globalscope:this.getGdprGlobalScope()},statParams:{trg:this.infos.trg,pl:this.infos.plindex||null,fs:this.infos.fstart||null}}),adPlayer=this.adPlayer,player=this,atEndPub=function(){},ads=function(state){var closure=new ClosureOnce(function(){if(player.notify("AtEndPub"),player.manageAdPlayerClass(!1),player.getInfo("multiadPreloadVideoPreview")){player.notify("after_preroll"),player.adapter.setMidrollState(!1),adcontainer.style.display="none";try{document.getElementById(player.getTarget()).removeChild(adcontainer)}catch(e){}player.showMute(!1),player.seek(player.getPosition()-4),player.play(),player.adapter.show(),player.loadAd("overlay"),player.adPlayer.playerReady(),player._midroll=!1,player.streamImpression()}else{player.showMute(!1),player.showAdSkip(!1),adeventListener.unregisterEvent(adPlayer),player.adPlayer=null;try{document.getElementById(player.getTarget()).removeChild(adcontainer)}catch(e){}player.setState(state.replace("after_","")),player.setState(state)}});return closure.execute.bind(closure)},nextState="",adeventListener=(admode.match(/preroll/)||"brandcontent"===admode?(atEndPub=ads("after_preroll"),nextState="preroll"):admode.match(/postroll/)?(atEndPub=ads("after_postroll"),nextState="postroll"):atEndPub=function(){if(adPlayer.adsManagers.hasOwnProperty(adPlayer.adsManagerIdLoaded)&&(-1===adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag.script.indexOf("contents.adpaths.com")||-1===adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag.script.indexOf("&magic_code=1"))){adeventListener.unregisterEvent(adPlayer),player.manageAdPlayerClass(!1),adcontainer.style.display="none";try{document.getElementById(player.getTarget()).removeChild(adcontainer)}catch(e){}}},adPlayer.subscribe(function(){adcontainer.style.visibility="inherit",adPlayer.setAdVolume(player.isMute()?0:player.getVolume()/100),player.setCurrentAd(adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag),player.showMute(!0),admode.match(/preroll/)&&player.notify("onAdPrerollImpression"),admode.match(/overlay/)?player.showMute(!1):(player.setState(nextState),player.showAdSkip(!0))},"AdImpression"),new dtkplayer_AdEvent(this,admode));adeventListener.registerEvent(adPlayer),"overlay"!==rolltype?(adPlayer.subscribe(function(){parent.postMessage("event=AdPlay","*")},"AdPlaying"),adPlayer.subscribe(function(){parent.postMessage("event=AdPause","*")},"AdPaused"),adPlayer.subscribe(function(){player._printed[rolltype]=!0,parent.postMessage("event=AdImpression","*")},"AdImpression"),adPlayer.subscribe(function(){parent.postMessage("event=AdError","*")},"AdError"),adPlayer.subscribe(function(){parent.postMessage("event=AdComplete","*")},"AdVideoComplete"),adPlayer.subscribe(function(){player.infos.muteState?adPlayer.setAdVolume(0):adPlayer.setAdVolume(+player._playerVolume/100),player.notify("ad-volumechange")},"AdStarted"),adPlayer.subscribe(function(){atEndPub()},"AdError"),adPlayer.subscribe(function(){atEndPub()},"AdStopped"),adPlayer.subscribe(function(){},"AdVideoComplete"),adPlayer.subscribe(function(){setTimeout(atEndPub,100)},"AdSkipped")):(adPlayer.subscribe(function(){atEndPub()},"AdStopped"),adPlayer.subscribe(function(){atEndPub()},"AdVideoComplete"),adPlayer.subscribe(function(){atEndPub()},"AdSkipped"),adPlayer.subscribe(function(){atEndPub()},"AdError"),adPlayer.subscribe(function(){if(-1!=adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag.script.indexOf("contents.adpaths.com")||-1!=adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag.script.indexOf("&magic_code=1")){adeventListener.unregisterEvent(adPlayer),player.manageAdPlayerClass(!1),adcontainer.style.display="none";try{document.getElementById(player.getTarget()).removeChild(adcontainer)}catch(e){}}},"AdImpression"),this.on("ended",function(){-1==adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag.script.indexOf("contents.adpaths.com")&&-1==adPlayer.adsManagers[adPlayer.adsManagerIdLoaded].infosTag.script.indexOf("&magic_code=1")||void 0===player.adwaysVastLoader||(adPlayer.callEvent_("VideoComplete"),player.adwaysVastLoader.clearAll(),adeventListener.unregisterEvent(adPlayer)),atEndPub()})),adPlayer.initClearAd(player.sizeX(),player.sizeY(),_admode,adcontainer)}else this.debug("player","loadAd: bad admode",admode)}}},{key:"load",value:function(vinfos,reset){this.currentAd=null,this._stream_stat_sent=!1,this._noStat=0,this._visibilityOldPosition=0,this._visibilityOldPositionAd=0,this._visibilityOldVisibility="",this._positionAdTimestamp=0,this._ad_scroll_paused=!1,this._hoveredOnce=!1,this._eventsent={},this.adPlayer=null,this.adPlayerHbStats={hb:0,hbn:"",hbcpm:0,hba9:0,hbna9:"",hba9idc:"",hba9cpm:0,hbcpmmax:0,bidwinner:"Other",hbwin:0,fdealid:"",fdealcpm:0};var player=this;this.setState("loading"),this.mergeInfos(vinfos.video),this.adconf=vinfos.adconf,player.adapter.embedData=function(player){return{new_path:player.infos.path,topic:player.infos.source,mdtk:player.infos.mdtk,src:1==player.infos.topicId?"article":"src",video:player.infos.id||player.infos.src||player.infos.article,zone:player.infos.zone,width:player.infos.width,height:player.infos.height,title:player.infos.title,owner:player.infos.owner}}(player),this.adapter.load(vinfos,function(vjs){player.on("error",function(e){"preroll"!==player._state?(console.log("Kill the player because an error occurred"),player.setState("killed")):console.log("La c'est pas cool: l'erreur arrive trop tard :(")}),null!=player.infos.mute&&player.setMute(player.infos.mute),null!=player.infos.volume&&player.setVolume(player.infos.volume),"sound"in vinfos.customSettings&&(player.infos.muteState=0==player.infos.sound?1:0),player.setState("ready"),player.adapter.trigger("dtk-ready"),player.off("custom-bigplay-click"),player.one("custom-bigplay-click",function(e){"stream"!==player._state&&1===player.infos.adTry&&0===player.infos.adBlock&&player.hasPreroll()?(player._playAdAsap=!0,"sound"in vinfos.customSettings?(player.infos.muteState=0===player.infos.sound?1:0,player.setMute(player.infos.muteState)):(player.infos.muteState=!1,player.infos.clickSoundControl&&player.setMute(0)),player.adapter.loading(),!player.getInfo("multiadPreloadVideoPreview")&&player.getInfo("multiadPreload")?(player.sendPlayMessageFullAdSrc(),player.notify("visibilityChanged",{v:player.getVisibilityRate(),stp:!0})):player.setState("before_preroll",!0)):("sound"in vinfos.customSettings?(player.infos.muteState=0===player.infos.sound?1:0,player.setMute(player.infos.muteState)):(player.infos.muteState=!1,player.infos.clickSoundControl&&player.setMute(0)),player.play()),player.on("custom-bigplay-click",function(e){player.play()})}),player.infos.isMobile&&window.location.href.match(/applewebdata/)&&(window.location.hash="#player_load"),player.one("loadedmetadata",function(){"yes"==player.getInfo("autoplay")||player.infos.isMobile&&"yes"==player.infos.autoplayMobile?(player.infos.isMobile&&window.chrome,void 0!==vjs&&(player.setState("ready"),player.adapter.trigger("dtk-ready"),player.sendMessageToParent("ready"))):(player.setState("ready"),player.adapter.trigger("dtk-ready"),player.sendMessageToParent("ready"))})},reset)}},{key:"endSetup",value:function(){}},{key:"getInfo",value:function(info){var defaultValue=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return info in this.infos?this.infos[info]:defaultValue}},{key:"hasInfo",value:function(info){return info in this.infos}},{key:"mergeInfos",value:function(infos){var player;infos&&(player=this,Object.keys(infos).forEach(function(opt){void 0!==infos&&null!=infos[opt]&&(player.infos[opt]=infos[opt])}))}},{key:"isAdapterLoaded",value:function(){return this.adapter.isLoaded()}},{key:"sizeX",value:function(){return document.getElementById(this.getTarget()).offsetWidth}},{key:"sizeY",value:function(){return document.getElementById(this.getTarget()).offsetHeight}},{key:"debug",value:function(level,message,object){library_DebugLog.isDebugActive()&&void 0!==this._debug_levels[level.toLowerCase()]&&1==this._debug_levels[level.toLowerCase()]&&(void 0===object&&(object=""),console.log("DEBUG "+level+" - "+Date.now()+" - "+message,object))}},{key:"addListener",value:function(eventName,callback){null==this.listeners[eventName]&&(this.listeners[eventName]=[]),this.listeners[eventName].push(callback)}},{key:"notify",value:function(eventName,params){null!=this.listeners[eventName]&&this.listeners[eventName].map(function(callback){callback(params)})}},{key:"proposeVideoSetup",value:function(suggest,reset){this.adapter.setUpEndSuggest(suggest,reset)}},{key:"scrollCallback",value:function(player){return function(){player.notify("manageScroll")}}},{key:"playCallback",value:function(player){return function(){"after_preroll"==player._state&&player.isPaused()&&(player.play(!0),setTimeout(player.playCallback(player),100))}}},{key:"getAdCallsPreroll",value:function(){for(var ad_calls=new Array,prerollAds=this.infos.allads||[],i=0;i<prerollAds.length;i++)(null==this.getCurrentAd()||null!=this.getCurrentAd()&&prerollAds[i].id!=this.getCurrentAd().id)&&ad_calls.push(prerollAds[i].id);return this.infos.mdtk+"_"+this.infos.zone+'_["'+ad_calls.join('","')+'"]'}},{key:"streamImpression",value:function(){if(0==this._noStat&&0==this._stream_stat_sent&&!this.infos.bc_video&&140!=this.infos.providerId){this._stream_stat_sent=!0;var path,code_enc,userToLog=this.infos.fromPlaylist||!this.getInfo("typePlayer")?0:1,ad_calls=this.getAdCallsPreroll(),localAdTry=!this.isVisible()&&this.infos.viewToPlay?0:this.infos.adTry;switch(this.getInfo("topicId")){case 1:code_enc=this.getInfo("mdtk")+"_"+this.getInfo("zone")+"_"+this.getInfo("id")+"_"+this.getInfo("owner")+"_"+(null===this.getCurrentAd()?"33m03":this.getCurrentAd().id)+"_33m03_"+this.getInfo("topicId")+"_"+localAdTry+"_"+(0,flagToInt.Z)(this.getInfo("isMobile")),path="/deliver/statistiques/videobegin";break;case 3:code_enc=this.getInfo("mdtk")+"_"+this.getInfo("zone")+"_"+this.getInfo("id")+"_"+this.getInfo("owner")+"__0_"+(null===this.getCurrentAd()?"33m03":this.getCurrentAd().id)+"_"+localAdTry+"_"+(0,flagToInt.Z)(this.getInfo("isMobile")),path="/deliver/statistiques/travelvideobegin";break;case 6:code_enc=this.getInfo("mdtk")+"_"+this.getInfo("zone")+"_"+this.getInfo("id")+"_"+this.getInfo("owner")+"_"+(null===this.getCurrentAd()?"33m03":this.getCurrentAd().id)+"_"+localAdTry+"_"+(0,flagToInt.Z)(this.getInfo("isMobile")),path="/deliver/statistiques/peoplevideobegin";break;default:code_enc=this.getInfo("mdtk")+"_"+this.getInfo("zone")+"_"+this.getInfo("id")+"_"+this.getInfo("owner")+"_"+(null===this.getCurrentAd()?"33m03":this.getCurrentAd().id)+"_"+localAdTry+"_"+this.getInfo("topicId")+"_"+(0,flagToInt.Z)(this.getInfo("isMobile")),path="/deliver/statistiques/genericvideobegin"}HttpRequest_default().ajax({type:"POST",url:this.statsurl+path,data:{code_enc:code_enc,ad_calls:ad_calls,ad_blocks:this.getInfo("adBlock"),type_player:this.getInfo("typePlayer"),userToLog:userToLog},dataType:"jsonp",jsonp:!1});ad_calls=this._printed.preroll||1!=localAdTry?0:1;this.sendEvent("vdimp",{uns:ad_calls})}}},{key:"onAdComplete",value:function(){}},{key:"resizeVsync",value:function(width,height){null!=this.infos.initVsyncId&&null!=this.infos.fullAdSrc&&this.infos.fullAdSrc.postMessage("resizeAd_"+width+"_"+height+"_"+this.infos.initVsyncId,"*")}},{key:"removeNonRelevantTags",value:function(tags){if(void 0===tags||0===tags.length)return[];for(var newtags=[],i=0;i<tags.length;i++)this.relevantTagFilter.reduce(function(acc,callback){return acc&&callback(tags[i])},!0)&&(tags[i].qc_matched=void 0!==tags[i].qc_segments&&0<tags[i].qc_segments.length?1:0,newtags.push(tags[i]));return newtags}},{key:"addRelevantTagFilter",value:function(callback){this.relevantTagFilter.push(callback)}},{key:"toggleMute",value:function(state,preventMuteForced){void 0===preventMuteForced&&(preventMuteForced=this._preventMuteForced);var mute=this.isMute();mute||void 0!==state&&!state?!mute||void 0!==state&&state||(this._preventMuteForced=preventMuteForced,this.setVolume(50),this.setMute(!1),this.infos.isMobile&&window.location.href.match(/applewebdata/)&&(window.location.hash="#mute_off")):(this._preventMuteForced=preventMuteForced,this.setMute(!0),this.infos.isMobile&&window.location.href.match(/applewebdata/)&&(window.location.hash="#mute_on")),"preroll"==this._state?this.sendEvent("prsnd",{cp:this.getCurrentAd().id}):"postroll"==this._state&&this.sendEvent("posnd",{cp:this.getCurrentAd().id})}},{key:"setState",value:function(newState,force){if((force=void 0===force?!1:force)||this.isValidNextState(newState))if("before_preroll"!=newState||this.IMAReady||this.infos.adBlock){switch(this._state=newState){case"loading":this.notify("loading"),this.notify("manageScroll");break;case"live-notready":this.notify("live-notready");break;case"ready":if(this.notify("ready"),this._preventMuteForced=!1,this.adAlreadyCalled=!1,this.adMidrollReady=!1,this.playerMidrollReady=!1,this.adMidrollError=!1,this.previewCountdownReady=!1,this.playerMidrollMessageReady=!1,this.addListener("previewPlayerReady",this.onPlayerMidrollReady.bind(this)),this.addListener("previewAdReady",this.onAdMidrollReady.bind(this)),this.addListener("previewAdError",this.onAdMidrollError.bind(this)),this.addListener("onPreviewCountdownReady",this.onPreviewCountdownReady.bind(this)),this._midroll=!1,!this.isVisible()&&(this.infos.viewPlayerToPlay||1==this.infos.float_video||this.infos.visible_plus)&&"yes"==this.getInfo("autoplay")&&0<this.infos.plindex&&(this.infos.autoplay="scroll-to-play"),this.sendEvent("r2ply",{}),"yes"==this.getInfo("autoplay")||this.infos.isMobile&&"yes"==this.infos.autoplayMobile)return void setTimeout(function(){this.setState("before_preroll")}.bind(this),250);break;case"before_preroll":if(this.setMute(this.infos.muteState),this.notify("before_preroll"),this.sendEvent("trgrd",{}),((2==this.infos.play_mode||"yes"==this.infos.autoplay)&&this.getInfo("multiadPreload")||this.getInfo("multiadPreload")&&"no"==this.infos.autoplay&&this.adAlreadyCalled||!this.getInfo("multiadPreload"))&&this.adapter.loading(),this.getInfo("multiadPreloadVideoPreview")&&0==this._video_preview_active&&(this._video_preview_active=1),this.infos.adBlock||!this.infos.adTry||this.infos.multiadPreloadVideoPreview||this.infos.viewToPlay&&!this.isVisible()&&("yes"!=this.infos.autoplay||!this.infos.float_video&&!this.infos.visible_plus||this.endOfVisiblePlayer||!this.isFocus()))return this.infos.adBlock&&this.infos.adTry&&this.inventoryStat("preroll"),this.setState("preroll"),void this.setState("after_preroll");this.infos.bc_video?this.loadAd("brandcontent"):this.adAlreadyCalled?this.sendPlayMessageFullAdSrc():(this.adAlreadyCalled=!0,this.loadAd("preroll"));break;case"preroll":this.notify("preroll"),this.sendPrefetchingPostMessage(!1);break;case"after_preroll":if("sqsu5"!==this.infos.owner&&"sq5x3"!==this.infos.owner||this.sendRematchVideoStat(this.infos.externalId),this.notify("after_preroll"),this.adapter.trigger("after_preroll"),this.adapter.videojs.cmpComponent().trigger("set_dtkplayer_to_component",{data:this}),this.getInfo("showCmpPlayer")&&!this.getInfo("optionVideoPlayCmp")&&""===cookieManager.getCookie("cmp_consent")&&320<=this.adapter.videojs.currentWidth())break;this.setState("stream"),this.setCurrentAd(null),this.infos.disableAutoplayVisibleNoAd&&1!=this.infos.scrolltoplay&&(0!=this.infos.float_video||0!=this.infos.visible_plus)&&"yes"==this.infos.autoplay&&0===this.prerollAlreadyPlayed.length||(this.getInfo("bc_video")||this.play(!0));break;case"stream":if(this.getInfo("bc_video")){this.adapter.trigger("ended");break}this.notify("stream"),this.on("ended",function(){this.sendEvent("vd4qt",{})}.bind(this)),this._video_preview_active?(this.addListener("previewInventoryReady",this.onPreviewInventoryReady.bind(this)),this.on("timeupdate",function(){!this.playerMidrollMessageReady&&this.getRemainingTime()<this.previewSettigs.duration&&(this.infos.adTry=0,this.streamImpression())}.bind(this)),this.adMidrollReady||this.loadAd("preroll")):(this.streamImpression(),this.loadAd("overlay"));break;case"before_postroll":this.currentAd=null,this.adapter.loading(),this.notify("before_postroll"),this.infos.viewToPlay&&!this.isVisible()||1!=this.infos.typePlayer?(this.setState("postroll"),this.setState("after_postroll")):(this.sendEvent("poinv",{}),this.loadAd("postroll"));break;case"postroll":this.adapter.hide(),this.notify("postroll");break;case"after_postroll":this.notify("after_postroll"),this.adapter.show(),this.adapter.removeLoading(),this.setCurrentAd(null),this._state="end",this.endSetup();case"end":this.notify("end"),"function"==typeof this._endRollCallback&&this._endRollCallback()}this.notify("stateChanged")}else this.addListener("ima-ready",function(){this.setState("before_preroll")}.bind(this))}},{key:"isValidNextState",value:function(newState){return"killed"!==this._state&&("killed"===newState||"live-notready"!==this._state&&"loading"===newState||"live-notready"===newState||"killed"!==this._state&&"loading"===newState||"loading"===this._state&&"ready"===newState||"ready"===this._state&&"before_preroll"===newState||"before_preroll"===this._state&&"preroll"===newState||"preroll"===this._state&&"after_preroll"===newState||"after_preroll"===this._state&&"stream"===newState||"stream"===this._state&&"before_postroll"===newState||"before_postroll"===this._state&&"postroll"===newState||"postroll"===this._state&&"after_postroll"===newState||"after_postroll"===this._state&&"end"===newState)}},{key:"playMultiAd",value:function(){this.hasPreroll()&&(this.debug("VSYNC","play MultiAd"),this.sendPrefetchingPostMessage(!0),this._adsPreloaded=!0,this.infos.viewToPlay=0,this.setState("before_preroll"))}},{key:"playMidroll",value:function(){var onMidrollImpression;this.getInfo("multiadPreloadVideoPreview")&&(this.adMidrollReady&&this.playerMidrollReady&&!this.previewCountdownReady&&this.notify("showCountdownPreview"),this.adMidrollReady&&this.playerMidrollReady&&this.previewCountdownReady&&(this.adPlayer.updateMute(0==this.getVolume()),this.notify("resetVisibility"),this.showAd(),this.adPlayer.playerReady(),this.notify("preroll"),this.adapter.setMidrollState(!0),onMidrollImpression=function(player){var closure=new ClosureOnce(function(){player._midroll=!0,player.adapter.hide(),player.pause(),player.adMidrollReady=!1,player.playerMidrollReady=!1,player.adPlayer.setAdVolume(player.getVolume()/100)});return closure.execute.bind(closure)}.bind(this),this.addListener("adImpression",onMidrollImpression(this))))}},{key:"onAdMidrollReady",value:function(){this.adMidrollReady=!0,this.getInfo("multiadPreloadVideoPreview")||(this.infos.multiadPreloadVideoPreview=!0,this.adPlayer.playerNotReady(),this._video_preview_active=1,this.notify("visibilityChanged",{v:this.getVisibilityRate(),stp:!0}),"no"==this.infos.autoplay&&!this._playAdAsap||(this.setState("preroll"),this.setState("after_preroll"))),this.playMidroll()}},{key:"onAdMidrollError",value:function(){this.adMidrollError=!0,this.playerMidrollMessageReady&&this.streamImpression()}},{key:"onPlayerMidrollReady",value:function(){this.playerMidrollReady=!0,this.playMidroll(),this.adMidrollError&&this.streamImpression()}},{key:"onPreviewCountdownReady",value:function(){this.previewCountdownReady=!0,this.playMidroll()}},{key:"onPreviewInventoryReady",value:function(){this.playerMidrollMessageReady=!0,this.inventoryStat("preroll")}},{key:"showAd",value:function(){this.manageAdPlayerClass(!0),this.adcontainer.style.display="block"}},{key:"managePrebidAd",value:function(prebidAd){this.adPlayer?this.adPlayer.managePrebidAd(prebidAd):this.prebidAdsList.push(prebidAd),this.prebid.useDfp&&this.notify("allHBTagReceived")}},{key:"manageVisibility",value:function(data){var _this,visibilityRate=data.v,data=data.stp,isIntersectPartial=0<visibilityRate,isIntersectCustom=51<=visibilityRate,visibilityRate=100<=visibilityRate;("scroll-to-play"===this._firstAutoplay||"in-read"===this._firstAutoplay||void 0!==data&&data)&&(0<this._scrollToPlayDelay&&(visibilityRate&&0==this._lastTotalIntersectTime?(this._lastTotalIntersectTime=(new Date).getTime(),this._scrollToPlayDelayTimeout=setTimeout(this.scrollCallback(this),this._scrollToPlayDelay)):visibilityRate&&0<this._lastTotalIntersectTime?(0!=this._scrollToPlayDelayTimeout&&(clearTimeout(this._scrollToPlayDelayTimeout),this._scrollToPlayDelayTimeout=0),this._scrollToPlayDelay-=(new Date).getTime()-this._lastTotalIntersectTime,this._lastTotalIntersectTime=(new Date).getTime(),0<this._scrollToPlayDelay?this._scrollToPlayDelayTimeout=setTimeout(this.scrollCallback(this),this._scrollToPlayDelay):this._scrollToPlayDelay=0):!visibilityRate&&0<this._lastTotalIntersectTime&&(this._scrollToPlayDelay-=(new Date).getTime()-this._lastTotalIntersectTime,(this._lastTotalIntersectTime=0)!=this._scrollToPlayDelayTimeout&&(clearTimeout(this._scrollToPlayDelayTimeout),this._scrollToPlayDelayTimeout=0))),this.in_page_visible_player||"ready"!==this._state&&"before_preroll"!==this._state||"scroll-to-play"!==this.infos.autoplay&&"in-read"!==this.infos.autoplay||isIntersectCustom&&this._scrollToPlayDelay<=0&&(this.infos.is50percentVisible=1,this.infos.isVisibleIframe=1,this.setState("before_preroll")),"ready"!=this._state||!this.infos.multiadPreload||this.infos.adBlock||this.infos.multiadPreloadVideoPreview||(this.hasReceivedCmpResponse()||this.infos.gdprconsentstring&&""!==this.infos.gdprconsentstring?this.playMultiAd():(_this=this).playMultiAdTimeoutId=setTimeout(function(){_this.playMultiAd()},this.infos.playMultiAdTimeoutDelay)),this.in_page_visible_player||"ready"!=this._state&&"before_preroll"!=this._state||2!==this.getInfo("play_mode")&&"scroll-to-play"!=this.infos.autoplay&&"in-read"!=this.infos.autoplay||isIntersectCustom&&this._scrollToPlayDelay<=0&&(!this.infos.multiadPreloadVideoPreview&&this.getInfo("multiadPreload")&&this.infos.adTry&&this.hasPreroll()&&!this.infos.adBlock?this.sendPlayMessageFullAdSrc():this.setState("before_preroll",!0)),this.infos.muteForced||"stream"!=this._state||(data=this.isMute(),isIntersectPartial?!this._hoveredOnce&&this.getInfo("soundOnHover")||this.getInfo("clickSoundControl")||!visibilityRate||data&&this.toggleMute(!1,!0):data||this.getFullscreen()||0!=this.infos.float_video&&0!=this.infos.visible_plus||this.toggleMute(!0,!0)))}},{key:"manageHover",value:function(isHtpAnyway){this.in_page_visible_player||"ready"!=this._state||"over-to-play"!=this.infos.autoplay&&!isHtpAnyway||(this.setState("before_preroll"),this.sendPlayMessageFullAdSrc());isHtpAnyway=this.isMute();!this.getInfo("soundOnHover")||this.getInfo("clickSoundControl")||this._hoveredOnce||this.infos.muteForced||!isHtpAnyway||(this.toggleMute(!1,!0),this._hoveredOnce=!0,this.sendMessageToParent("hoveredOnce"))}},{key:"manageVideoPreview",value:function(visible,endPreview){}},{key:"sendPlayMessageFullAdSrc",value:function(){this.adPlayer?(this._video_preview_active?this.infos.autoplay="yes":this.inventoryStat("preroll"),this.adPlayer.playerReady(!1)):this.infos.autoplay="yes"}},{key:"sendMessageFullAdSrc",value:function(message){this.inventoryStat("preroll"),null!=this.infos.fullAdSrc&&this.infos.fullAdSrc.postMessage(message,"*")}},{key:"sendMessageToParent",value:function(message){var widgetPrefix=this.infos.widgetPrefix||"";parent.postMessage(widgetPrefix+message,"*")}},{key:"getMyVarName",value:function(){if(null==this.myVarname)for(var name in window)if(window[name]===this){this.myVarname=name;break}return this.myVarname}},{key:"manageAdPlayerClass",value:function(state){state?this.adapter.videojs.el_.classList.add("dtk-ad-player"):this.adapter.videojs.el_.classList.remove("dtk-ad-player")}}],[{key:"init",value:function(vinfos,requestOptions,userTarget){var userTarget=userTarget||(void 0!==window.ULTIMEDIA_target?window.ULTIMEDIA_target:"dtkplayer"),playerdiv=document.createElement("div"),wrapper=(playerdiv.setAttribute("id",userTarget+"-player"),document.getElementById(userTarget)),playerdiv=(wrapper.appendChild(playerdiv),userTarget+"-player"),player=new DtkPlayer((new(PlayerAdapterFactory_default())).createPlayerAdapter(playerdiv,vinfos.video.isMobile),wrapper);player.gdprSubmitted=-1!==["DE","AT","BE","BG","CY","HR","DK","ES","EE","FI","FR","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","SE","CZ","GB"].indexOf(vinfos.adconf.country_code),player.googleConsent=!0,player.purpose1Consent=!0,player.cmpTimeOut=!1,player.hasExecuteCmpResponse=!1,player.video={},player.vendorsAllowed={},player.video.duration=void 0!==vinfos.video.duration?vinfos.video.duration:vinfos.video.providerDuration,player.timePreroll=void 0!==vinfos.settings.digitalAdTrust&&1===vinfos.settings.digitalAdTrust?player.video.duration/2:player.video.duration,player.double_preroll=void 0!==vinfos.adconf.double_preroll&&1===vinfos.adconf.double_preroll||void 0!==vinfos.video.isMobile&&0===parseInt(vinfos.video.isMobile)&&void 0!==vinfos.adconf.double_preroll&&2===vinfos.adconf.double_preroll||void 0!==vinfos.video.isMobile&&1===parseInt(vinfos.video.isMobile)&&void 0!==vinfos.adconf.double_preroll&&3===vinfos.adconf.double_preroll,player.nb_preroll=0,player.minTimeDoublePreroll=10,console.log("Double Preroll status",player.double_preroll),player.isAmp=-1!==window.frames.name.indexOf("amp");try{player.isAmpSmart=-1!==window.parent.name.indexOf("amp")}catch(e){player.isAmpSmart=!1}void 0!==vinfos.video.isWebview?player.infos.isWebview=vinfos.video.isWebview:player.infos.isWebview=0,player.addListener("hasReceivedCmpResponse",function(){player.hasExecuteCmpResponse||(player.hasExecuteCmpResponse=!0,player.preInit(vinfos,requestOptions,player))}),-1!==window.frames.name.indexOf("amp")&&((userTarget=document.createElement("script")).setAttribute("src","https://cdn.ampproject.org/video-iframe-integration-v0.js"),userTarget.setAttribute("async",!0),document.head.appendChild(userTarget),(playerdiv=document.createElement("script")).innerHTML="(window.AmpVideoIframe = window.AmpVideoIframe || []).push(onAmpIntegrationRGPDReady); function onAmpIntegrationRGPDReady(ampIntegration) { ampIntegration.getConsentData(function(consent) {window.dispatchEvent(new CustomEvent('ampvideoiframe', {'detail': consent}));}); }",document.body.appendChild(playerdiv)),player.addListener("waitingForCmpResponse",function(){console.log("StandBy - Waiting for Cmp Response")});wrapper=new plugins_Rgpd(requestOptions,vinfos.settings.ad);return wrapper.setPlayer(player),wrapper.init(),window.addEventListener("resize",function(){player.adapter.getAdaptee().trigger("playerresize"),player.adPlayer&&player.resizeVsync(player.sizeX(),player.sizeY())}),player}}]),DtkPlayer}(),ClosureOnce=function(){function ClosureOnce(action){DtkPlayer_classCallCheck(this,ClosureOnce),this.action=action,this.performed=!1}return DtkPlayer_createClass(ClosureOnce,[{key:"execute",value:function(){this.performed||(this.performed=!0,this.action())}}]),ClosureOnce}();const dtkplayer_DtkPlayer=HttpRequest;(window.DtkPlayer=dtkplayer_DtkPlayer).prototype.initCustomParams=function(){var name,custom_param={};for(name in window){var matches=name.match(/^ULTIMEDIA_(.*)$/);null!=matches&&(custom_param[matches[1]]=window[name])}}})(),(()=>{"use strict";var SkinLoader=__webpack_require__(4122),SkinLoader_default=__webpack_require__.n(SkinLoader);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var adapter_AdapterAbstract=function(){function AdapterAbstract(){if(!(this instanceof AdapterAbstract))throw new TypeError("Cannot call a class as a function");this._internalOptions={},this._skinLoader=null}var Constructor,protoProps,staticProps;return Constructor=AdapterAbstract,(protoProps=[{key:"getInternalOptions",value:function(){return this._internalOptions}},{key:"setMute",value:function(state){throw new Error("You have to implement the method setMute(state) !")}},{key:"isMute",value:function(){throw new Error("You have to implement the method isMute() !")}},{key:"toggleMute",value:function(){throw new Error("You have to implement the method toggleMute() !")}},{key:"getVolume",value:function(){throw new Error("You have to implement the method getVolume() !")}},{key:"setVolume",value:function(vol){throw new Error("You have to implement the method setVolume() !")}},{key:"getFullScreen",value:function(){throw new Error("You have to implement the method getFullScreen() !")}},{key:"getPosition",value:function(){throw new Error("You have to implement the method getPosition() !")}},{key:"seek",value:function(position){throw new Error("You have to implement the method seek(position) !")}},{key:"getDuration",value:function(){throw new Error("You have to implement the method getDuration() !")}},{key:"getRemainingTime",value:function(){throw new Error("You have to implement the method getRemainingTime() !")}},{key:"on",value:function(){throw new Error("You have to implement the method on() !")}},{key:"play",value:function(){throw new Error("You have to implement the method play() !")}},{key:"isPaused",value:function(){throw new Error("You have to implement the method isPaused() !")}},{key:"pause",value:function(){throw new Error("You have to implement the method pause() !")}},{key:"stop",value:function(){this.pause(),this.seek(0)}},{key:"getAdaptee",value:function(){throw new Error("You have to implement the method getAdaptee() !")}},{key:"isLoaded",value:function(){return!1}},{key:"loading",value:function(){throw new Error("You have to implement the method loading() !")}},{key:"setup",value:function(options){for(var k in options)this._internalOptions[k]=options[k]}},{key:"load",value:function(vinfos,readyCallback,reset){throw new Error("You have to implement the method load() !")}},{key:"getVersion",value:function(){throw new Error("You have to implement the method getVersion() !")}},{key:"getPlayerType",value:function(){throw new Error("You have to implement the method getPlayerType() !")}},{key:"reset",value:function(){throw new Error("You have to implement the method reset() !")}},{key:"getStylesPath",value:function(){throw new Error("You have to implement the method getStylePath() !")}},{key:"getSkinLoader",value:function(){return null==this._skinLoader&&(this._skinLoader=new(SkinLoader_default()),this._skinLoader.setStylesLocation(this.getStylesPath())),this._skinLoader}},{key:"isMobile",value:function(){return this._mobile}},{key:"setMobile",value:function(isMobile){this._mobile=isMobile}},{key:"onError",value:function(callback){throw new Error("You have to implement the method onError() !")}},{key:"onComplete",value:function(callback){throw new Error("You have to implement the method onComplete() !")}},{key:"onIdle",value:function(callback){throw new Error("You have to implement the method onIdle() !")}},{key:"onBuffer",value:function(callback){throw new Error("You have to implement the method onBuffer() !")}},{key:"onPause",value:function(callback){throw new Error("You have to implement the method onPause() !")}},{key:"onPlay",value:function(callback){throw new Error("You have to implement the method onPlay() !")}},{key:"getState",value:function(){throw new Error("You have to implement the method getState() !")}},{key:"onReady",value:function(callback){throw new Error("You have to implement the method onReady() !")}},{key:"getBuffer",value:function(){throw new Error("You have to implement the method getBuffer() !")}},{key:"onBufferChange",value:function(callback){throw new Error("You have to implement the method onBufferChange() !")}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AdapterAbstract}(),SkinLoader=__webpack_require__(5146),HttpRequest_default=__webpack_require__.n(SkinLoader);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ExternalInterraction_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Plugin=videojs.getPlugin("plugin"),translator=__webpack_require__(1502);const plugins_videojs_ExternalInterraction=function(){var subClass=ExternalInterraction,superClass=Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass);var staticProps,_super=_createSuper(ExternalInterraction);function ExternalInterraction(player,options){var _this;if(!(this instanceof ExternalInterraction))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).buttons=[],_this.embedData=options.embedData(),_this.reportDatas=options.reportDatas(),player.on("dtk-ready",function(){0<this.buttons.length&&(this.buttons=[],this.embedData=options.embedData(),this.reportDatas=options.reportDatas()),this.btnlist&&player.removeChild(this.btnlist),this.modalembed&&player.removeChild(this.modalembed),this.modalreport&&player.removeChild(this.modalreport),options.initInteractions.bind(this)(player,player.interactions),this.attachButtonsToPlayer(player)}.bind(_assertThisInitialized(_this))),_this}return subClass=ExternalInterraction,(superClass=[{key:"addButton",value:function(label,icon,action){this.buttons.push({label:label,icon:icon,action:action})}},{key:"attachButtonsToPlayer",value:function(player){var list,mdl_wrap_embed,mdl_label_embed,mdl_textarea_embed,mdl_btn_select_embed,mdl_btn_close_embed,mdl_label_copied_embed,modalEmbed,modalReport,instanceModal,instance,ButtonComponent,Item;this.buttons.length<=0||((list=new(videojs.getComponent("Component"))(player)).addClass("vjs-interaction-display"),this.btnlist=list,(mdl_wrap_embed=document.createElement("div")).setAttribute("id","wrap_embed"),(mdl_label_embed=document.createElement("label")).setAttribute("id","label_embed"),(mdl_textarea_embed=document.createElement("textarea")).setAttribute("id","textarea_embed"),(mdl_btn_select_embed=document.createElement("div")).setAttribute("id","btn_select_embed"),(mdl_label_copied_embed=document.createElement("span")).setAttribute("id","label_copied_embed"),mdl_label_copied_embed.innerHTML=translator.translate("textLabelCopiedEmbed"),(mdl_btn_close_embed=document.createElement("div")).setAttribute("id","btn_close_embed"),mdl_label_embed.innerHTML="<i class='vjs-icon-embed'></i> "+translator.translate("labelEmbedCode"),mdl_textarea_embed.innerHTML='<iframe src="'+this.embedData.new_path+"/deliver/"+this.embedData.topic+"/iframe/mdtk/"+this.embedData.mdtk+"/"+this.embedData.src+"/"+this.embedData.video+"/zone/"+this.embedData.zone+'/showtitle/1/" frameborder="0" scrolling="no" marginwidth="0" marginheight="0" hspace="0" vspace="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true"',void 0!==this.embedData.width&&void 0!==this.embedData.height&&(mdl_textarea_embed.innerHTML+='width="'+this.embedData.width+'" height="'+this.embedData.height+'"'),mdl_textarea_embed.innerHTML+=' allow="autoplay; fullscreen"',mdl_textarea_embed.innerHTML="></iframe>",mdl_btn_select_embed.innerHTML=translator.translate("textButtonCopyCode"),mdl_btn_select_embed.appendChild(mdl_label_copied_embed),mdl_wrap_embed.appendChild(mdl_label_embed),mdl_wrap_embed.appendChild(mdl_btn_close_embed),mdl_wrap_embed.appendChild(mdl_textarea_embed),mdl_wrap_embed.appendChild(mdl_btn_select_embed),mdl_btn_select_embed.addEventListener("click",function(){var temp;return mdl_textarea_embed.select(),document.execCommand("copy")&&(mdl_btn_select_embed.classList.add("copied"),temp=setInterval(function(){mdl_btn_select_embed.classList.remove("copied"),clearInterval(temp)},1e3)),!1}),mdl_btn_close_embed.onclick=function(){return modalEmbed.close(),!1},mdl_label_copied_embed=videojs.getComponent("ModalDialog"),modalEmbed=new mdl_label_copied_embed(player,{content:mdl_wrap_embed,temporary:!1}),(this.modalembed=modalEmbed).setAttribute("id","um-modal-embed"),(modalReport=new mdl_label_copied_embed(player,{content:translator.translate("afterMessageSendOkMessage"),temporary:!1})).setAttribute("id","um-modal-report"),(instanceModal=modalReport).el().addEventListener("click",function(event){instanceModal.close(),event.preventDefault(),event.stopPropagation()}),this.modalreport=modalReport,instance=this,ButtonComponent=videojs.getComponent("Button"),Item=videojs.extend(ButtonComponent,{constructor:function(player,label,action){this.label=label,this.action=action,ButtonComponent.call(this,player),"report"===this.label?this.controlText(translator.translate("labelReportButton")):this.controlText(this.label),this.addClass("vjs-icon-"+this.label),this.on("click",this.onClick),this.on("touchstart",this.onClick)},onClick:function(){switch(player.trigger("interraction-click",{label:this.label}),this.label){case"embed":this.openModal();break;case"report":if("sqsu5"!==instance.reportDatas.owner&&"sq5x3"!==instance.reportDatas.owner){this.openUrlAlert();break}default:this.openUrl()}},openUrl:function(){window.open(this.action)},openModal:function(){player.addChild(modalEmbed),modalEmbed.open()},openUrlAlert:function(){HttpRequest_default().get(this.action,{video_id:instance.reportDatas.video,video_title:instance.reportDatas.title,zone_id:instance.reportDatas.zone}),this.hide(),player.addChild(modalReport),modalReport.open()}}),this.buttons.forEach(function(button){button=new Item(player,button.label,button.action);list.addChild(button)}),player.addChild(list),player.on(["preview-stop","ended"],function(){list.hide(),player.one("play",function(){list.show()})}))}}])&&ExternalInterraction_defineProperties(subClass.prototype,superClass),staticProps&&ExternalInterraction_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),ExternalInterraction}();function OverlayTitle_typeof(obj){return(OverlayTitle_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function OverlayTitle_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OverlayTitle_setPrototypeOf(o,p){return(OverlayTitle_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function OverlayTitle_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=OverlayTitle_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=OverlayTitle_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===OverlayTitle_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return OverlayTitle_assertThisInitialized(Super)}}function OverlayTitle_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function OverlayTitle_getPrototypeOf(o){return(OverlayTitle_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var OverlayTitle_Plugin=videojs.getPlugin("plugin");const plugins_videojs_OverlayTitle=function(){var subClass=OverlayTitle,superClass=OverlayTitle_Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OverlayTitle_setPrototypeOf(subClass,superClass);var staticProps,_super=OverlayTitle_createSuper(OverlayTitle);function OverlayTitle(player,options){var _this;if(!(this instanceof OverlayTitle))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).display=options.display||options.displayOverlayTitle,_this.display_pos="jukebo"==options.skin||"ultimediawl"==options.skin,_this.displayPreroll=options.displayPreroll,_this.title=options.title,_this.description=options.description,_this.duration=options.duration,_this.isDtkSkin="dtkplayer"==options.skin,_this.isLive=void 0!==options.isLive.live,_this.display&&""!=_this.title&&(player.one("ready",function(){this.attachOverlayTitleToPlayer(player),this.display_pos&&player.on("playerresize",function(e){this.setPosition(player)}.bind(this))}.bind(OverlayTitle_assertThisInitialized(_this))),player.on("dtk-reload",function(e,options){player.el_.removeChild(this.wrap_overlay),this.title=options.video.title,this.attachOverlayTitleToPlayer(player)}.bind(OverlayTitle_assertThisInitialized(_this)))),_this}return subClass=OverlayTitle,(superClass=[{key:"attachOverlayTitleToPlayer",value:function(player){this.wrap_overlay=document.createElement("div"),this.wrap_overlay.setAttribute("class","vjs-overlay-text"),this.wrap_overlay.setAttribute("id","vjs-overlay-title");var overlay_duration,overlay_title=document.createElement("div");overlay_title.setAttribute("class","vjs-overlay-title-item"),overlay_title.setAttribute("id","vjs-overlay-title-item-1"),overlay_title.innerHTML=this.title,this.isDtkSkin&&("0"===this.duration||this.isLive||((overlay_duration=document.createElement("div")).setAttribute("id","dtk_overlay_duration"),overlay_duration.innerHTML=this.formatDuration(this.duration),this.wrap_overlay.appendChild(overlay_duration)),this.isLive&&((overlay_duration=document.createElement("div")).setAttribute("id","dtk_overlay_live"),overlay_duration.classList.add("dtk_label_live"),overlay_duration.innerHTML="LIVE",this.wrap_overlay.appendChild(overlay_duration)),""!==this.description&&((overlay_duration=document.createElement("div")).setAttribute("id","dtk_overlay_description"),overlay_duration.innerHTML=this.description,this.wrap_overlay.appendChild(overlay_duration))),this.display_pos?this.setPosition(player):this.wrap_overlay.style.top=0,this.wrap_overlay.appendChild(overlay_title),player.el_.appendChild(this.wrap_overlay)}},{key:"setPosition",value:function(player){player=player.controlBar.currentHeight();this.wrap_overlay.style.bottom=player+"px"}},{key:"formatDuration",value:function(duration){var duration=new Date(1e3*duration).toISOString().substr(11,8),hrs=duration.split(":")[0],durationFormated="";return 0<hrs&&(durationFormated+=hrs+":"),durationFormated=durationFormated+(duration.split(":")[1]+":")+(""+duration.split(":")[2])}}])&&OverlayTitle_defineProperties(subClass.prototype,superClass),staticProps&&OverlayTitle_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),OverlayTitle}();var SkinLoader=__webpack_require__(7302),ResponsiveUtils_default=__webpack_require__.n(SkinLoader),SkinLoader=__webpack_require__(5196),ContextMenu_default=__webpack_require__.n(SkinLoader),SkinLoader=__webpack_require__(7005),ExternalInterractionButton_default=__webpack_require__.n(SkinLoader),SkinLoader=__webpack_require__(391),VerticalUtils_default=__webpack_require__.n(SkinLoader),SkinLoader=__webpack_require__(9835),OptOutComponent_default=__webpack_require__.n(SkinLoader);const customPurposesListDigiteka_namespaceObject=JSON.parse('{"st":[{"id":1,"name":"Conserver des informations et/ou accéder à des informations sur un périphérique","description":"Les cookies, identifiants de périphérique ou autres informations peuvent être stockés ou consultés sur votre périphérique aux fins qui vous sont présentées.","disabled":false,"checked":false},{"id":2,"name":"Sélectionner des publicités standards","description":"Les publicités peuvent vous être présentées en fonction du contenu que vous consultez, de l’application que vous utilisez, de votre localisation approximative, ou du type de périphérique que vous utilisez.","disabled":false,"checked":false},{"id":3,"name":"Créer un profil de publicités personnalisées","description":"Un profil peut être créé sur vous et sur vos centres d’intérêt pour vous présenter des publicités personnalisées susceptibles de vous intéresser.","disabled":false,"checked":false},{"id":4,"name":"Sélectionner des publicités personnalisées","description":"Des publicités personnalisées peuvent vous être présentées sur la base d’un profil créé sur vous.","disabled":false,"checked":false},{"id":5,"name":"Créer un profil de contenu personnalisé","description":"Un profil peut être créé sur vous et sur vos centres d’intérêt pour vous présenter du contenu personnalisé susceptible de vous intéresser.","disabled":false,"checked":true},{"id":6,"name":"Sélectionner du contenu personnalisé","description":"Du contenu personnalisé peut vous être présenté sur la base d’un profil créé sur vous.","disabled":false,"checked":true},{"id":7,"name":"Mesurer la performance des publicités","description":"La performance et l’efficacité des publicités que vous voyez ou avec lesquelles vous interagissez peuvent être mesurées.","disabled":false,"checked":false},{"id":8,"name":"Mesurer la performance du contenu","description":"La performance et l’efficacité du contenu que vous voyez ou avec lequel vous interagissez peuvent être mesurées.","disabled":false,"checked":false},{"id":9,"name":"Utiliser des études de marché pour générer des données d’audience","description":"Les études de marché peuvent servir à en apprendre davantage sur les publics qui visitent des sites/utilisent des applications et regardent des publicités.","disabled":false,"checked":false},{"id":10,"name":"Développer et améliorer les produits","description":"Vos données peuvent être utilisées pour améliorer les systèmes et logiciels existants, et pour développer de nouveaux produits.","disabled":false,"checked":true}],"fp":[{"id":"s1","name":"Assurer la sécurité, prévenir la fraude et déboguer","description":"Vos données peuvent être utilisées pour surveiller et prévenir les activités frauduleuses, et s’assurer que les systèmes et processus fonctionnent correctement et en toute sécurité.","disabled":true,"checked":true},{"id":"s2","name":"Sélectionner du contenu personnalisé","description":"Votre périphérique peut recevoir et envoyer des informations qui vous permettent de voir des publicités et du contenu et d’interagir avec eux.","disabled":true,"checked":true}]}');function CmpComponent_typeof(obj){return(CmpComponent_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CmpComponent_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CmpComponent_setPrototypeOf(o,p){return(CmpComponent_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CmpComponent_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=CmpComponent_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=CmpComponent_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===CmpComponent_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return CmpComponent_assertThisInitialized(Super)}}function CmpComponent_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CmpComponent_getPrototypeOf(o){return(CmpComponent_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var CmpComponent_Plugin=videojs.getPlugin("plugin"),CmpComponent_translator=__webpack_require__(1502);const plugins_videojs_CmpComponent=function(){var subClass=CmpComponent,superClass=CmpComponent_Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CmpComponent_setPrototypeOf(subClass,superClass);var staticProps,_super=CmpComponent_createSuper(CmpComponent);function CmpComponent(player,options){var _this;if(!(this instanceof CmpComponent))throw new TypeError("Cannot call a class as a function");(_this=_super.call(this,player,options)).player=player,_this.options=options,_this.cname="um_cmp_consent",_this.dtkplayer,_this.timer=!1,_this.isCountdownOk=!1,_this.isClickSetting=!1,_this.isModaleOpened=!1,_this.isResized=!1,_this.customSpecialsPurposesIDsListDigiteka=customPurposesListDigiteka_namespaceObject.fp.map(function(special_purpose){return special_purpose.id}),_this.customPurposesIDsListDigiteka=customPurposesListDigiteka_namespaceObject.st.map(function(purpose){return purpose.id}),_this.allCustomPurposesIDsDigiteka=_this.customSpecialsPurposesIDsListDigiteka.concat(_this.customPurposesIDsListDigiteka).join("_"),_this.defaultPurposesIdsChecked=customPurposesListDigiteka_namespaceObject.st.filter(function(item){return item.checked}).map(function(item){return item.id}),_this.defaultSpecialsPurposesIdsChecked=customPurposesListDigiteka_namespaceObject.fp.filter(function(item){return item.checked}).map(function(item){return item.id}),_this.defaultAllPurposesIdsChecked=_this.defaultSpecialsPurposesIdsChecked.concat(_this.defaultPurposesIdsChecked).join("_");var is_rossel=_this.inArray(_this.options.mdtk,["01499695","01762991","01593643","01187891","01972780","01582336","01342685","01668433","01252572","01338879","01196208","01390230","01150954","01301629","01071750","01800993","01217291","01233516","01259546","01538406","01554892","01229771","01265947","01626200","01754691","01895765","01834960","01263265"]);return _this.options.display&&player.on("after_preroll",function(){this.modalCmp&&player.removeChild(this.modalCmp),!this.isCookie(this.cname)&&320<=this.player.currentWidth()&&(!is_rossel||20*Math.random()<1)&&this.init()}.bind(CmpComponent_assertThisInitialized(_this))),_this}return subClass=CmpComponent,(superClass=[{key:"init",value:function(){this.createModal(),this.initListener(),this.on("set_dtkplayer_to_component",function(e,data){this.dtkplayer=data.data,this.initVisibilityChanged(),this.dtkplayer.addListener("visibilityChanged",function(){this.isCountdownOk?this.isModaleOpened||this.manageSetConsentCookie(this.allCustomPurposesIDsDigiteka,!this.options.play_option):this.initVisibilityChanged()}.bind(this)),this.dtkplayer.addListener("scrollEvent",function(){this.isCountdownOk&&!this.isModaleOpened&&this.manageSetConsentCookie(this.allCustomPurposesIDsDigiteka,!this.options.play_option)}.bind(this)),this.player.on("playerresize",function(){!this.isCountdownOk&&this.player.currentWidth()<320&&!this.isResized&&(this.timer&&clearInterval(this.timer),this.manageSetConsentCookie("",!0),this.isResized=!0)}.bind(this))}.bind(this))}},{key:"initVisibilityChanged",value:function(){var visibilityState=this.dtkplayer.isVisible(99);this.isClickSetting||this.countdown(visibilityState)}},{key:"createModal",value:function(){var content=this.createContentModal(),ModalComponent=videojs.getComponent("ModalDialog");this.modalCmp=new ModalComponent(this.player,{content:content,temporary:!1}),this.modalCmp.setAttribute("id","um_modal_cmp"),this.player.addChild(this.modalCmp),this.modalCmp.open()}},{key:"createContentModal",value:function(){var mdl_wrap_cmp=document.createElement("div"),wrap_text=(mdl_wrap_cmp.setAttribute("id","um_wrap_cmp"),document.createElement("div")),labelLinkReplace=(wrap_text.setAttribute("id","um_wrap_text"),['<a href="https://www.ultimedia.com/default/presentation/vendors" target="_blank">'+CmpComponent_translator.translate("labelLinkVendors")+"</a>",'<a href="https://www.ultimedia.com/default/presentation/politiqueconfidentialite" target="_blank">'+CmpComponent_translator.translate("labelLinkPolicy")+"</a>"]),wrap_actions=(this.options.is_mobile?wrap_text.innerHTML="<p>"+CmpComponent_translator.translate("textConstentCmpMobile").replace(/%(\d+)/g,function(_,n){return labelLinkReplace[+n-1]})+"</p>":wrap_text.innerHTML="<p>"+CmpComponent_translator.translate("textConstentCmp").replace(/%(\d+)/g,function(_,n){return labelLinkReplace[+n-1]})+"</p>",document.createElement("div")),button_constent=(wrap_actions.setAttribute("id","um_wrap_actions"),document.createElement("button")),icon=(button_constent.setAttribute("id","um_button_constent"),document.createElement("span")),link_info=(icon.setAttribute("id","um_timer_icon"),document.createElement("a")),button_close=(link_info.setAttribute("id","um_link_info"),link_info.setAttribute("target","_blank"),link_info.setAttribute("href","https://www.ultimedia.com/default/presentation/politiqueconfidentialite#optout"),link_info.innerHTML=CmpComponent_translator.translate("labelLinkSettingsCmp"),document.createElement("button"));return button_close.setAttribute("id","um_button_close"),button_close.innerHTML=CmpComponent_translator.translate("labelLinkCloseButton"),button_close.style.display="none",button_constent.appendChild(icon),button_constent.insertAdjacentHTML("beforeend",CmpComponent_translator.translate("labelButtonConsentCmp")),wrap_actions.appendChild(button_constent),wrap_actions.appendChild(link_info),wrap_actions.appendChild(button_close),mdl_wrap_cmp.appendChild(wrap_text),mdl_wrap_cmp.appendChild(wrap_actions),mdl_wrap_cmp}},{key:"initListener",value:function(){this.modalCmp.content().querySelector("#um_button_constent").addEventListener("click",function(e){this.manageSetConsentCookie(this.allCustomPurposesIDsDigiteka,!this.options.play_option),e.preventDefault(),e.stopPropagation()}.bind(this)),this.modalCmp.content().querySelector("#um_wrap_cmp a").addEventListener("click",function(){this.setConsentCookie(this.defaultAllPurposesIdsChecked),this.timer&&clearInterval(this.timer),this.modalCmp.content().querySelector("#um_button_constent").style.display="none",this.modalCmp.content().querySelector("#um_link_info").style.display="none",this.modalCmp.content().querySelector("#um_button_close").style.display="inline-block",this.modalCmp.content().querySelector("#um_wrap_text").style.flex="none",this.modalCmp.content().querySelector("#um_wrap_text").innerHTML="<p>"+CmpComponent_translator.translate("textAfterConstentCmp")+"</p>",this.isClickSetting=!0}.bind(this)),this.modalCmp.content().querySelector("#um_button_close").addEventListener("click",function(e){this.manageSetConsentCookie("",!this.options.play_option),e.preventDefault(),e.stopPropagation()}.bind(this))}},{key:"setConsentCookie",value:function(value){var d=new Date,d=(d.setTime(d.getTime()+2592e6),"expires="+d.toUTCString());document.cookie=this.cname+"="+value+"; "+d+"; path=/; domain=.ultimedia.com"}},{key:"isCookie",value:function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(name))return!0}return!1}},{key:"countdown",value:function(visibilityState){var countdown=3;visibilityState?this.timer||(this.timer=setInterval(function(){--countdown<=0&&(clearInterval(this.timer),this.isCountdownOk=!0)}.bind(this),1e3)):this.timer&&(clearInterval(this.timer),this.timer=!1)}},{key:"manageSetConsentCookie",value:function(cvalue,play_option){""!=cvalue&&this.setConsentCookie(cvalue),this.modalCmp.close(),this.isModaleOpened=!0,play_option&&(this.dtkplayer.setState("stream"),this.dtkplayer.setCurrentAd(null),this.player.play(!0))}},{key:"inArray",value:function(mdtk,array_mdtks){for(var length=array_mdtks.length,i=0;i<length;i++)if(array_mdtks[i]==mdtk)return!0;return!1}}])&&CmpComponent_defineProperties(subClass.prototype,superClass),staticProps&&CmpComponent_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),CmpComponent}();function DtkSkinUtils_typeof(obj){return(DtkSkinUtils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function DtkSkinUtils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DtkSkinUtils_setPrototypeOf(o,p){return(DtkSkinUtils_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function DtkSkinUtils_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=DtkSkinUtils_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=DtkSkinUtils_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===DtkSkinUtils_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return DtkSkinUtils_assertThisInitialized(Super)}}function DtkSkinUtils_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DtkSkinUtils_getPrototypeOf(o){return(DtkSkinUtils_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var DtkSkinUtils_Plugin=videojs.getPlugin("plugin");__webpack_require__(1502);const plugins_videojs_DtkSkinUtils=function(){var subClass=DtkSkinUtils,superClass=DtkSkinUtils_Plugin;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DtkSkinUtils_setPrototypeOf(subClass,superClass);var staticProps,_super=DtkSkinUtils_createSuper(DtkSkinUtils);function DtkSkinUtils(player,options){var _this;if(!(this instanceof DtkSkinUtils))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this,player,options)).player=player,_this.options=options,player.one("ready",function(){"dtkplayer"==this.options.skin&&this.init()}.bind(DtkSkinUtils_assertThisInitialized(_this))),_this}return subClass=DtkSkinUtils,(superClass=[{key:"init",value:function(){this.createGradient()}},{key:"createGradient",value:function(){var gradient_top=document.createElement("div"),gradient_bottom=(gradient_top.setAttribute("class","dtk-gradient"),gradient_top.setAttribute("id","dtk_gradient_top"),document.createElement("div"));gradient_bottom.setAttribute("class","dtk-gradient"),gradient_bottom.setAttribute("id","dtk_gradient_bottom"),this.player.el_.appendChild(gradient_top),this.player.el_.appendChild(gradient_bottom)}},{key:"setEvent",value:function(action){this.player.trigger(action,this.DEFAULT_DURATION_REWIND_FORWARD)}},{key:"setEventMobile",value:function(action,e){var currentTime=(new Date).getTime(),tapLength=currentTime-this.lastTap;clearTimeout(this.timeout),tapLength<700&&0<tapLength?(this.setEvent(action),e.preventDefault()):this.timeout=setTimeout(function(){clearTimeout(this.timeout)},700),this.lastTap=currentTime}}])&&DtkSkinUtils_defineProperties(subClass.prototype,superClass),staticProps&&DtkSkinUtils_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),DtkSkinUtils}();function initPlugin(player,options){function updateErrors(updates){options.errors=videojs.mergeOptions(options.errors,updates),Object.keys(options.errors).forEach(function(k){var err=options.errors[k];err.type||(err.type=k)})}function healthcheck(type,fn){function check(){if(!player.error()){var tech=player.$(".vjs-tech");if(tech&&"application/x-shockwave-flash"===tech.type&&!tech.vjs_getProperty)return void player.error({code:-2,type:"PLAYER_ERR_TIMEOUT"});if(player.paused())return resetMonitor();if(player.ended())return resetMonitor()}fn.call(this)}player.on(type,check),listeners.push([type,check])}function onDisposeHandler(){cleanup(),player.removeClass("vjs-errors"),player.off("play",onPlayStartMonitor),player.off("play",onPlayNoSource),player.off("dispose",onDisposeHandler),player.off(["aderror","error"],onErrorHandler)}function reInitPlugin(newOptions){onDisposeHandler(),initPlugin(player,videojs.mergeOptions(defaults,newOptions))}var monitor,waiting,isStalling,listeners=[],resetMonitor=(updateErrors(),function(){player.clearTimeout(waiting),isStalling&&(isStalling=!1,player.removeClass("vjs-waiting")),waiting=player.setTimeout(function(){player.error()||player.paused()||player.ended()||(isStalling=!0,player.addClass("vjs-waiting"))},1e3),player.clearTimeout(monitor),monitor=player.setTimeout(function(){player.error()||player.paused()||player.ended()||player.error({code:-2,type:"PLAYER_ERR_TIMEOUT"})},options.timeout),player.error()&&-2===player.error().code&&player.error(null)}),cleanup=function(){for(var listener;listeners.length;)listener=listeners.shift(),player.off(listener[0],listener[1]);player.clearTimeout(monitor),player.clearTimeout(waiting)},onPlayStartMonitor=function(){var lastTime=0;cleanup(),resetMonitor(),healthcheck(["timeupdate","adtimeupdate"],function(){var currentTime=player.currentTime();currentTime!==lastTime&&(lastTime=currentTime,resetMonitor())}),options.progressDisabled||healthcheck("progress",resetMonitor)},onPlayNoSource=function(){player.currentSrc()||player.error({code:-1,type:"PLAYER_ERR_NO_SRC"})},onErrorHandler=function(){var display,flashMessage,details="",error=player.error(),content=document_default().createElement("div"),dialogContent="",isDtkSkin=player.el().classList.contains("dtkplayer-skin");error&&(4===(error=videojs.mergeOptions(error,options.errors[error.code||0])).code&&FlashObj&&!FlashObj.isSupported()&&(flashMessage=player.localize(plugin_translator.translate("flashMessage")),details+='<span class="vjs-errors-flashmessage">'.concat(flashMessage,"</span>")),display=player.getChild("errorDisplay"),"LIVE_STOPPED"==error.code&&display.addClass("dtk-live"),content.className="vjs-errors-dialog",content.id="vjs-errors-dialog",dialogContent='<div class="vjs-errors-content-container">',isDtkSkin&&(flashMessage="LIVE_STOPPED"==error.code?error.headline:plugin_translator.translate("ERR_SORRY"),dialogContent+='<div class="vjs-errors-first-headline">'.concat(this.localize(flashMessage),"</div>")),dialogContent+='<div class="vjs-errors-headline">'.concat(this.localize(error.headline),"</div>"),isDtkSkin&&(dialogContent+='<div class="vjs-errors-last-headline">'.concat(this.localize(plugin_translator.translate("ERR_RETRY")),"</div>")),dialogContent+="<div class='vjs-error-code'><b>".concat(this.localize(plugin_translator.translate("labelCodeErrorMessage")),"</b>: ").concat(error.type||error.code,"</div>").concat(details,"</div>"),display.closeable(!("dismiss"in error)||error.dismiss)?(dialogContent+='<div class="vjs-errors-ok-button-container">\n          <button class="vjs-errors-ok-button">'.concat(this.localize("OK"),"</button>\n        </div>"),content.innerHTML=dialogContent,display.fillWith(content),display.contentEl().firstChild.appendChild(display.getChild("closeButton").el()),flashMessage=display.el().querySelector(".vjs-errors-ok-button"),player.on(flashMessage,"click",function(){display.close()})):(content.innerHTML=dialogContent,display.fillWith(content)),(player.currentWidth()<=600||player.currentHeight()<=250)&&display.addClass("vjs-xs"),display.one("modalclose",function(){return player.error(null)}))};reInitPlugin.extend=updateErrors,reInitPlugin.getAll=function(){return videojs.mergeOptions(options.errors)},reInitPlugin.disableProgress=function(disabled){options.progressDisabled=disabled,onPlayStartMonitor()},player.on("play",onPlayStartMonitor),player.on("play",onPlayNoSource),player.on("dispose",onDisposeHandler),player.on(["aderror","error"],onErrorHandler),player.ready(function(){player.addClass("vjs-errors")}),player.errors=reInitPlugin}function errors(options){initPlugin(this,videojs.mergeOptions(defaults,options))}function watermark(options){var _this=this;this.ready(function(){!function(player,options){player.addClass("vjs-watermark"),options.image&&(setupWatermark(player,options),null!==options.fadeTime&&player.on("play",function(){return fadeWatermark(options)}))}(_this,videojs.mergeOptions(plugin_defaults,options))})}var SkinLoader=__webpack_require__(9144),document_default=__webpack_require__.n(SkinLoader),plugin_translator=__webpack_require__(1502),FlashObj=videojs.getComponent("Flash"),SkinLoader=!videojs.browser.IS_IPHONE,registerPlugin=videojs.registerPlugin||videojs.plugin,defaults={header:"",code:"",message:"",timeout:45e3,dismiss:SkinLoader,progressDisabled:!1,errors:{1:{type:"MEDIA_ERR_ABORTED",headline:plugin_translator.translate("MEDIA_ERR_ABORTED")},2:{type:"MEDIA_ERR_NETWORK",headline:plugin_translator.translate("MEDIA_ERR_NETWORK")},3:{type:"MEDIA_ERR_DECODE",headline:plugin_translator.translate("MEDIA_ERR_DECODE")},4:{type:"MEDIA_ERR_SRC_NOT_SUPPORTED",headline:plugin_translator.translate("MEDIA_ERR_SRC_NOT_SUPPORTED")},5:{type:"MEDIA_ERR_ENCRYPTED",headline:plugin_translator.translate("MEDIA_ERR_ENCRYPTED")},unknown:{type:"MEDIA_ERR_UNKNOWN",headline:plugin_translator.translate("MEDIA_ERR_UNKNOWN")},"-1":{type:"PLAYER_ERR_NO_SRC",headline:plugin_translator.translate("PLAYER_ERR_NO_SRC")},"-2":{type:"PLAYER_ERR_TIMEOUT",headline:plugin_translator.translate("PLAYER_ERR_TIMEOUT")},PLAYER_ERR_DOMAIN_RESTRICTED:{headline:plugin_translator.translate("PLAYER_ERR_DOMAIN_RESTRICTED")},PLAYER_ERR_IP_RESTRICTED:{headline:plugin_translator.translate("PLAYER_ERR_IP_RESTRICTED")},PLAYER_ERR_GEO_RESTRICTED:{headline:plugin_translator.translate("PLAYER_ERR_GEO_RESTRICTED")}}},plugin_defaults=(["extend","getAll","disableProgress"].forEach(function(k){errors[k]=function(){videojs.log.warn("The errors.".concat(k,"() method is not available until the plugin has been initialized!"))}}),registerPlugin("errors",errors),__webpack_require__(428),{position:"top-right",fadeTime:3e3,url:void 0,image:void 0}),setupWatermark=function(player,options){var a,videoEl=player.el(),div=document.createElement("div"),img=document.createElement("img");div.classList.add("vjs-watermark-content"),div.classList.add("vjs-watermark-".concat(options.position)),img.src=options.image,options.url?((a=document.createElement("a")).href=options.url,a.onclick=function(e){e.preventDefault(),player.pause(),window.open(options.url)},a.appendChild(img),div.appendChild(a)):div.appendChild(img),videoEl.appendChild(div)},fadeWatermark=function(options){setTimeout(function(){return document.getElementsByClassName("vjs-watermark-content")[0].classList.add("vjs-watermark-fade")},options.fadeTime)};videojs.registerPlugin("watermark",watermark),watermark.VERSION="__VERSION__";function VideoJsAdapter_typeof(obj){return(VideoJsAdapter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var i,it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length)return it&&(o=it),i=0,{s:allowArrayLike=function(){},n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:allowArrayLike};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function VideoJsAdapter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function VideoJsAdapter_setPrototypeOf(o,p){return(VideoJsAdapter_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function VideoJsAdapter_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=VideoJsAdapter_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=VideoJsAdapter_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===VideoJsAdapter_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function VideoJsAdapter_getPrototypeOf(o){return(VideoJsAdapter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(4538),__webpack_require__(1932);var conf=__webpack_require__(2802),VideoJsAdapter_translator=__webpack_require__(1502),video_js_VideoJsAdapter=function(){var subClass=VideoJsAdapter,superClass=adapter_AdapterAbstract;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&VideoJsAdapter_setPrototypeOf(subClass,superClass);var staticProps,_super=VideoJsAdapter_createSuper(VideoJsAdapter);function VideoJsAdapter(target){var _this;if(!(this instanceof VideoJsAdapter))throw new TypeError("Cannot call a class as a function");return(_this=_super.call(this)).target=target,_this.videojs=null,_this._videojs=_this.getVideoJs(),_this._videojs.registerPlugin("externalInterraction",plugins_videojs_ExternalInterraction),_this._videojs.registerPlugin("overlayTitle",plugins_videojs_OverlayTitle),_this._videojs.registerPlugin("responsiveUtils",ResponsiveUtils_default()),_this._videojs.registerPlugin("contextMenu",ContextMenu_default()),_this._videojs.registerPlugin("externalInterractionButton",ExternalInterractionButton_default()),_this._videojs.registerPlugin("verticalUtils",VerticalUtils_default()),_this._videojs.registerPlugin("optOutComponent",OptOutComponent_default()),_this._videojs.registerPlugin("cmpComponent",plugins_videojs_CmpComponent),_this._videojs.registerPlugin("dtkSkinUtils",plugins_videojs_DtkSkinUtils),_this.VIDEO_FORMAT_VERTICAL=1,_this.midRollInProgress=!1,_this.alreadySet=!1,_this}return subClass=VideoJsAdapter,(superClass=[{key:"getVideoJs",value:function(){throw new Error("You have to implement the method getVideoJs() !")}},{key:"getPlugins",value:function(){return{}}},{key:"addCustomError",value:function(errors){this.getAdaptee().errors.extend(errors)}},{key:"getPlayerType",value:function(){return"VideoJsAdapter"}},{key:"setMute",value:function(state){this.getAdaptee().muted(state)}},{key:"toggleMute",value:function(){this.getAdaptee().muted(!this.getAdaptee().muted())}},{key:"isMute",value:function(){return this.getAdaptee().muted()}},{key:"getVolume",value:function(){return parseInt(100*this.getAdaptee().volume())}},{key:"setVolume",value:function(vol){this.getAdaptee().volume(+vol/100)}},{key:"getFullScreen",value:function(){return this.getAdaptee().isFullscreen()}},{key:"getPosition",value:function(){return this.getAdaptee().currentTime()}},{key:"seek",value:function(position){return this.getAdaptee().currentTime(position)}},{key:"getDuration",value:function(){return this.getAdaptee().duration()}},{key:"getRemainingTime",value:function(){return this.getAdaptee().remainingTime()}},{key:"trigger",value:function(){this.getAdaptee().trigger.apply(this.getAdaptee(),arguments)}},{key:"one",value:function(){this.getAdaptee().one.apply(this.getAdaptee(),arguments)}},{key:"on",value:function(){this.getAdaptee().on.apply(this.getAdaptee(),arguments)}},{key:"off",value:function(){this.getAdaptee().off.apply(this.getAdaptee(),arguments)}},{key:"play",value:function(){0===arguments.length&&(arguments[0]=this.isPaused()),(arguments[0]?this.getAdaptee().play:this.getAdaptee().pause).apply(this.getAdaptee())}},{key:"pause",value:function(){0===arguments.length&&(arguments[0]=!this.isPaused()),(arguments[0]?this.getAdaptee().pause:this.getAdaptee().play).apply(this.getAdaptee())}},{key:"isPaused",value:function(){return this.getAdaptee().paused()}},{key:"loading",value:function(){var vjsPlayer=this.getAdaptee();vjsPlayer.addClass("vjs-waiting"),vjsPlayer.on("play",function(){vjsPlayer.removeClass("vjs-waiting")})}},{key:"removeLoading",value:function(){null!==document.getElementById("canvas")&&(document.getElementById("canvas").style.display="none"),this.getAdaptee().removeClass("vjs-waiting")}},{key:"addLoading",value:function(){document.getElementById("canvas").style.display="block",this.getAdaptee().addClass("vjs-waiting")}},{key:"hide",value:function(){this.getAdaptee().controlBar.hide()}},{key:"show",value:function(){this.getAdaptee().controlBar.show()}},{key:"reset",value:function(){this.getAdaptee().reset()}},{key:"setMidrollState",value:function(state){this.midRollInProgress=state}},{key:"setSource",value:function(type,url){"live"===type&&(this.getAdaptee().reset(),this.getAdaptee().src({type:"application/x-mpegURL",src:url}))}},{key:"load",value:function(vinfos,readyCallback,reset){var class_skin=this.getSkinLoader().getSkinName(),isDtkSkin=(this.getSkinLoader().loadStyles(),"dtkplayer"==vinfos.settings.skin.filename),class_vertical="";switch(vinfos.settings.video_format===this.VIDEO_FORMAT_VERTICAL&&"um"===class_skin&&(class_vertical="dtkplayer-vertical ",this.getSkinLoader().loadStylesVertical()),vinfos.settings.skin.filename){case"ultimediawl":conf_player=__webpack_require__(9889);break;case"jukebo":var conf_player=__webpack_require__(3423),ButtonComponent=videojs.getComponent("Button"),adapter=this,BrandButton=videojs.extend(ButtonComponent,{constructor:function(videojs,options){ButtonComponent.apply(this,arguments),this.label=VideoJsAdapter_translator.translate("labelRecommendation"),ButtonComponent.call(this,videojs),this.controlText(this.label),this.on("click",this.onClick),this.on("touchstart",this.onClick)},buildCSSClass:function(){return"vjs-brand-button vjs-suggest-control vjs-control vjs-button vjs-tooltip"},onClick:function(){adapter.getAdaptee().trigger("recommandation-click")}});videojs.registerComponent("BrandButton",BrandButton);break;case"boursorama":conf_player=__webpack_require__(5226);break;case"dtkplayer":conf_player=__webpack_require__(8852);break;default:conf_player=__webpack_require__(9075)}var sources=[],resSelected=!1;if(void 0!==vinfos.video.media_sources.hls)for(var format in vinfos.video.media_sources.hls){var res=format.replace("hls_",""),source={src:vinfos.video.media_sources.hls[format],type:"application/x-mpegURL",label:res,res:res};"hls_auto"===format&&(source.selected=!0),sources.push(source)}else for(var format in vinfos.video.media_sources.mp4){var res=format.replace("mp4_",""),_source={src:vinfos.video.media_sources.mp4[format],type:"video/mp4",label:res,res:res};(void 0!==vinfos.video.ownerId&&"3fuzu"===vinfos.video.ownerId&&parseInt(res)<=1080&&!resSelected||parseInt(res)<=480&&!resSelected)&&(resSelected=_source.selected=!0),sources.push(_source)}if(vinfos.video.media_sources.youtube&&(sources=[{type:"video/youtube",src:vinfos.video.media_sources.youtube}]),vinfos.video.media_sources.live&&(sources=[{type:"application/x-mpegURL",src:vinfos.video.media_sources.live.src}]),this.interactions={},vinfos.video.interactions_action){if(vinfos.video.interactions_action.socials_url)for(var keys=Object.keys(vinfos.video.interactions_action.socials_url),i=0;i<keys.length;++i){var k=keys[i];this.interactions[k]=vinfos.video.interactions_action.socials_url[k]}vinfos.video.interactions_action.embed&&(this.interactions.embed=vinfos.video.interactions_action.embed),vinfos.video.interactions_action.report&&(this.interactions.report=vinfos.video.interactions_action.report)}var position_logo,options={html5:{nativeTextTracks:!1},controls:!0,controlBar:{volumePanel:conf_player.volumePanel,children:conf_player.children},poster:vinfos.video.image,sources:sources,autoplay:!1,plugins:this.getPlugins(),inactivityTimeout:4e3,languages:{fr:{Play:"Lecture","Play Video":"Lecture",Mute:"Désactiver le son",Unmute:"Activer le son",Fullscreen:"Plein écran","Non-Fullscreen":"Quitter le plein écran","Close Modal Dialog":"Fermer"},es:{Play:"Jugar","Play Video":"Jugar",Mute:"Deshabilitar sonido",Unmute:"Encienda el sonido",Fullscreen:"Pantalla completa","Non-Fullscreen":"Salir de pantalla completa","Close Modal Dialog":"Cerrar",Pause:"Pausa"}}},mobileopt=("gq3usrs5"==vinfos.video.video_full_id&&(options.html5.quanteec={quanteecKey:"7408968b3aa644aab045c718ea2277f5",videoID:vinfos.video.video_full_id},quanteecSourceHandler.register()),vinfos.video.media_sources.youtube&&(options.techOrder=["html5","youtube"]),this.isMobile()?"playsinline muted":""),class_skin='<video crossorigin="anonymous" id="'+this.target+'" class="video-js '+class_skin+" "+class_vertical+'vjs-skin-adapter vjs-seeking vjs-big-play-centered" style="height: 100%; width:100%;" '+mobileopt+"></video>",class_vertical=document.createElement("div");if(class_vertical.innerHTML=class_skin,-1!==window.frames.name.indexOf("amp")&&((mobileopt=document.createElement("script")).innerHTML="(window.AmpVideoIframe = window.AmpVideoIframe || []).push(onAmpIntegrationReady); function onAmpIntegrationReady(ampIntegration) { ampIntegration.getConsentData(function(consent) { var myVideo = document.querySelector('#"+this.target+"');ampIntegration.listenTo('videojs', myVideo);}); }",document.body.appendChild(mobileopt)),reset?(this.videojs.on("ready",function(){readyCallback(adapter)}),this.videojs.src(sources),this.videojs.poster(vinfos.video.image)):(document.getElementById(this.target).parentNode.replaceChild(class_vertical.firstChild,document.getElementById(this.target)),document.getElementById(this.target).setAttribute("controlsList","nodownload"),(adapter=this).videojs=this._videojs(this.target,options,function(){this.on("error",function(e){var cs;"MediaError"===this.error().constructor.name&&(cs=this.currentSrc(),0!=(sources=sources.filter(function(s){return s.src!=cs})).length&&(e.stopImmediatePropagation(),this.error(null),this.src(sources)))}),adapter.isMobile()&&this.el().classList.add("vjs-mobile"),this.errors(),this.on("error",function(e){this.bigPlayButton.hide()}),this.on("userinactive",function(e){this.controlBar.subsCapsButton.unpressButton()}),isDtkSkin&&(loader=this.$(".vjs-loading-spinner"),docFrag=document.createDocumentFragment(),["top","bottom","left","move-blob"].forEach(function(classe){var div=document.createElement("div");div.classList.add("blob",classe),docFrag.appendChild(div)}),loader.appendChild(docFrag)),this.bigPlayButton.off(["click","touchstart","touchend"]),this.posterImage.off(["click","touchstart","touchend"]);var loader,docFrag,vjsplayer=this,tracks=(this.bigPlayButton.on(["click"],function(e){e.stopPropagation(),vjsplayer.trigger("custom-bigplay-click")}),this.posterImage.on(["click"],function(e){e.preventDefault(),vjsplayer.trigger("custom-bigplay-click")}),adapter.isMobile()||this.on("pause",function(e){this.seeking()||this.ended()||adapter.midRollInProgress||vjsplayer.trigger("recommandation-pause")}),adapter.initEventMobile(),[]);if(vinfos.video.tracks){0!=vinfos.video.tracks.length&&adapter.getAdaptee().addClass("dtkplayer-has-subtitles");var _step,_iterator=_createForOfIteratorHelper(vinfos.video.tracks);try{for(_iterator.s();!(_step=_iterator.n()).done;){var track=_step.value;1==vinfos.settings.tracksShowingMode&&(track.mode="showing"),vjsplayer.addRemoteTextTrack(track),tracks.push({kind:track.kind,label:track.label,active:track.active,src:track.src})}}catch(err){_iterator.e(err)}finally{_iterator.f()}var allTracks=this.textTracks();vjsplayer.textTrackSettings.setValues({backgroundOpacity:"0",color:"#FFF",edgeStyle:"dropshadow",fontPercent:1.25});vjsplayer.on("playerresize",function(){this.textTrackSettings.updateDisplay()}),1==tracks.length?(this.controlBar.subsCapsButton.addClass("vjs-sub-auto"),1==vinfos.settings.tracksShowingMode&&this.controlBar.subsCapsButton.addClass("vjs-subtitle-active"),this.controlBar.subsCapsButton.on(["click","touchstart"],function(e){this.toggleClass("vjs-subtitle-active"),this.el().classList.contains("vjs-subtitle-active")?allTracks.tracks_.find(function(track){return track.mode="showing"}):allTracks.tracks_.find(function(track){return track.mode="hidden"}),e.stopPropagation()})):allTracks.on("change",function(e){vjsplayer.textTrackSettings.updateDisplay(),0!=allTracks.tracks_.map(function(x){return x.mode}).filter(function(x){return"showing"==x}).length?vjsplayer.controlBar.subsCapsButton.el().classList.contains("vjs-subtitle-active")||vjsplayer.controlBar.subsCapsButton.addClass("vjs-subtitle-active"):vjsplayer.controlBar.subsCapsButton.el().classList.contains("vjs-subtitle-active")&&vjsplayer.controlBar.subsCapsButton.removeClass("vjs-subtitle-active")})}readyCallback(adapter)})),vinfos.settings.displayLogo&&(vinfos.settings.logoPath||0!==vinfos.settings.logoPath.length)){switch(vinfos.settings.displayLogo){case 1:position_logo=vinfos.settings.showtitle?"bottom-right-title":"bottom-right";break;case 2:position_logo=vinfos.settings.showtitle?"top-left-title":"top-left";break;case 3:position_logo=vinfos.settings.showtitle?"top-right-title":"top-right";break;case 4:position_logo=vinfos.settings.showtitle?"bottom-left-title":"bottom-left"}var logoPath=(void 0!==conf.staticsPath?conf.staticsPath:"//medialb.ultimedia.com/")+vinfos.settings.logoPath,class_skin=function(url,callback){var img=new Image;img.addEventListener("load",function(){callback(!0)}),img.addEventListener("error",function(){callback(!1)}),img.src=url},player=this;this.alreadySet||class_skin(logoPath,function(exists){exists&&(player.alreadySet=!0,player.videojs.watermark({image:logoPath,url:vinfos.settings.redirectClick,position:position_logo,fadeTime:null}))})}this.videojs.ga({debug:!1,eventCategory:"digiteka_video",eventLabel:vinfos.video.title,eventsToTrack:["percentsPlayed","start","end","seek","play","pause","volumeChange","error","fullscreen"]})}},{key:"destroy",value:function(){return this.getAdaptee().dispose()}},{key:"getVideoId",value:function(){return void 0!==this.getAdaptee().tech_?this.getAdaptee().tech_.el_.id:"player-player_html5_api"}},{key:"getAdaptee",value:function(){if(!this.videojs)throw new Error("player not set");return this.videojs}},{key:"getStylesPath",value:function(){return"statics/styles/scss/videojs/"}},{key:"isLoaded",value:function(){return null!=this.videojs}},{key:"initEventMobile",value:function(){this.videojs.on(["touchend","touchstart","touchcancel","touchleave","touchmove","userinactive"],function(e){var dataEvent={type:e.type,target:e.target};switch(dataEvent.type){case"touchstart":var target=dataEvent.target.parentElement;(target.classList.contains("vjs-resolution-button")||target.classList.contains("vjs-subs-caps-button"))&&(target.classList.contains("isNotTouched")&&target.classList.remove("isNotTouched"),target.classList.add("isTouched"));break;case"userinactive":for(var items=document.getElementsByClassName("isTouched"),i=0;i<items.length;i++)items.item(i).classList.add("isNotTouched"),items.item(i).classList.remove("isTouched")}})}},{key:"onError",value:function(callback){var vjs=this.getAdaptee();this.on("error",function(){callback(vjs.error())})}},{key:"onComplete",value:function(callback){this.on("ended",function(){callback()})}},{key:"onIdle",value:function(callback){}},{key:"onBuffer",value:function(callback){}},{key:"onPause",value:function(callback){this.on("pause",function(e){callback({oldstate:"PLAYING"})}.bind(this))}},{key:"onPlay",value:function(callback){this.on("play",function(e){callback({oldstate:"PAUSED"})}.bind(this))}},{key:"getState",value:function(){return this._state}},{key:"onReady",value:function(callback){this.on("ready",function(){callback()})}},{key:"getBuffer",value:function(){return this.getAdaptee().bufferedPercent()}},{key:"onBufferChange",value:function(callback){var adapter=this;this.on("progress",function(){callback({buffer:adapter.getBuffer()})})}}])&&VideoJsAdapter_defineProperties(subClass.prototype,superClass),staticProps&&VideoJsAdapter_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),VideoJsAdapter}(),flagToInt=(__webpack_require__(2677),__webpack_require__(6346));function vjs_node_typeof(obj){return(vjs_node_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function vjs_node_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function vjs_node_setPrototypeOf(o,p){return(vjs_node_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function vjs_node_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=vjs_node_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=vjs_node_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===vjs_node_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function vjs_node_getPrototypeOf(o){return(vjs_node_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var vjs_node_translator=__webpack_require__(1502),SkinLoader=(__webpack_require__(6016),function(){var subClass=VideoJs_Npm_Adapter,superClass=video_js_VideoJsAdapter;if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&vjs_node_setPrototypeOf(subClass,superClass);var staticProps,_super=vjs_node_createSuper(VideoJs_Npm_Adapter);function VideoJs_Npm_Adapter(){var instance=this,Constructor=VideoJs_Npm_Adapter;if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");return _super.apply(this,arguments)}return subClass=VideoJs_Npm_Adapter,(superClass=[{key:"getVideoJs",value:function(){return videojs}},{key:"getPlugins",value:function(){var adapter=this;return{externalInterraction:{initInteractions:function(player){for(var _i=0,_Object$keys=Object.keys(adapter.interactions);_i<_Object$keys.length;_i++){var k=_Object$keys[_i];"report"==k&&this.addButton(k,k,adapter.interactions[k])}},embedData:function(){return adapter.embedData},reportDatas:function(){return adapter.embedData}},overlayTitle:{display:(0,flagToInt.Z)(adapter.getPlayerInfo("showtitle")),displayPreroll:(0,flagToInt.Z)(adapter.getPlayerInfo("showtitlePreroll")),displayOverlayTitle:null==adapter.getPlayerInfo("overlay_title")||""===adapter.getPlayerInfo("overlay_title")?0:1,title:adapter.getPlayerInfo("title"),skin:adapter.getSkinLoader().getSkinNameDB(),description:adapter.getPlayerInfo("description"),duration:adapter.getPlayerInfo("duration"),isLive:adapter.getPlayerInfo("media_sources")},responsiveUtils:{skin:adapter.getSkinLoader().getSkinNameDB()},contextMenu:{content:[{href:vjs_node_translator.translate("linkDigitekaSite"),label:"Digiteka"},{href:vjs_node_translator.translate("linkOptoutDigiteka"),label:vjs_node_translator.translate("optoutDigiteka")},{label:"Digiteka Player v.5"}]},externalInterractionButton:{initInteractions:function(player){for(var _i2=0,_Object$keys2=Object.keys(adapter.interactions);_i2<_Object$keys2.length;_i2++){var k=_Object$keys2[_i2];"report"!==k&&this.addButton(k,k,adapter.interactions[k])}},embedData:function(){return adapter.embedData},skin:adapter.getSkinLoader().getSkinNameDB(),isLive:adapter.getPlayerInfo("media_sources"),owner:adapter.getPlayerInfo("owner")},verticalUtils:{video_format:adapter.getPlayerInfo("video_format"),VIDEO_FORMAT_VERTICAL:adapter.VIDEO_FORMAT_VERTICAL,skin:adapter.getSkinLoader().getSkinName()},cmpComponent:{display:adapter.getPlayerInfo("showCmpPlayer"),play_option:adapter.getPlayerInfo("optionVideoPlayCmp"),mdtk:adapter.getPlayerInfo("mdtk"),is_mobile:adapter.getPlayerInfo("isMobile"),width_mobile:adapter.getPlayerInfo("display_visible_mobile"),width_desktop:adapter.getPlayerInfo("width_float_video_css")},optOutComponent:{is_mobile:adapter.getPlayerInfo("isMobile"),skin:adapter.getSkinLoader().getSkinNameDB()},dtkSkinUtils:{skin:adapter.getSkinLoader().getSkinNameDB(),description:adapter.getPlayerInfo("description"),duration:adapter.getPlayerInfo("duration"),is_mobile:adapter.getPlayerInfo("isMobile"),width_mobile:adapter.getPlayerInfo("display_visible_mobile"),width_desktop:adapter.getPlayerInfo("width_float_video_css"),video_format:adapter.getPlayerInfo("video_format"),VIDEO_FORMAT_VERTICAL:adapter.VIDEO_FORMAT_VERTICAL}}}},{key:"setUpEndSuggest",value:function(suggest,reset){reset&&this.getAdaptee().trigger("suggest-destroy"),suggest.length&&this.getAdaptee().suggestedVideoEndcap({suggestions:suggest,header:vjs_node_translator.translate("headerRecommandation"),max:6})}}])&&vjs_node_defineProperties(subClass.prototype,superClass),staticProps&&vjs_node_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),VideoJs_Npm_Adapter}());__webpack_require__.g.PlayerAdapter=SkinLoader})()})();